{"version":3,"file":"three.js","sources":["../../node_modules/three/src/core/EventDispatcher.js","../../node_modules/three/src/math/Math.js","../../node_modules/three/src/math/Color.js","../../node_modules/three/src/math/Quaternion.js","../../node_modules/three/src/math/Vector3.js","../../node_modules/three/src/core/Face3.js","../../node_modules/three/src/math/Matrix3.js","../../node_modules/three/src/math/Box3.js","../../node_modules/three/src/math/Sphere.js","../../node_modules/three/src/math/Matrix4.js","../../node_modules/three/src/math/Vector2.js","../../node_modules/three/src/math/Euler.js","../../node_modules/three/src/core/Layers.js","../../node_modules/three/src/constants.js","../../node_modules/three/src/core/Object3D.js","../../node_modules/three/src/core/Geometry.js","../../node_modules/three/src/math/Vector4.js","../../node_modules/three/src/core/BufferAttribute.js","../../node_modules/three/src/core/DirectGeometry.js","../../node_modules/three/src/utils.js","../../node_modules/three/src/core/BufferGeometry.js","../../node_modules/three/src/geometries/BoxGeometry.js","../../node_modules/three/src/lights/Light.js","../../node_modules/three/src/math/Plane.js","../../node_modules/three/src/math/Frustum.js","../../node_modules/three/src/lights/LightShadow.js","../../node_modules/three/src/cameras/Camera.js","../../node_modules/three/src/cameras/OrthographicCamera.js","../../node_modules/three/src/lights/DirectionalLightShadow.js","../../node_modules/three/src/lights/DirectionalLight.js","../../node_modules/three/src/math/Ray.js","../../node_modules/three/src/math/Triangle.js","../../node_modules/three/src/materials/Material.js","../../node_modules/three/src/materials/MeshBasicMaterial.js","../../node_modules/three/src/objects/Mesh.js","../../node_modules/three/src/extras/ImageUtils.js","../../node_modules/three/src/materials/MeshNormalMaterial.js","../../node_modules/three/src/cameras/PerspectiveCamera.js","../../node_modules/three/src/scenes/Scene.js","../../node_modules/three/src/textures/Texture.js","../../node_modules/three/src/textures/DataTexture.js","../../node_modules/three/src/renderers/shaders/ShaderChunk.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/alphamap_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/alphatest_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/aomap_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/aomap_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/begin_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/beginnormal_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/bsdfs.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/clipping_planes_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/clipping_planes_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/clipping_planes_pars_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/clipping_planes_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/color_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/color_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/color_pars_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/color_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/common.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/cube_uv_reflection_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/displacementmap_pars_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/displacementmap_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/emissivemap_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/emissivemap_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/encodings_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/encodings_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/envmap_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/envmap_common_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/envmap_physical_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/envmap_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/fog_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/fog_pars_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/fog_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/gradientmap_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/lightmap_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/lights_pars_begin.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/lights_physical_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/lights_physical_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/lights_fragment_begin.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/lights_fragment_maps.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/lights_fragment_end.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/map_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/map_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/map_particle_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/metalnessmap_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/metalnessmap_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/normal_fragment_begin.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/normal_fragment_maps.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/clearcoat_normal_fragment_begin.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/clearcoat_normal_fragment_maps.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/clearcoat_normalmap_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/packing.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/premultiplied_alpha_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/project_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/dithering_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/dithering_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/roughnessmap_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/roughnessmap_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/shadowmask_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/skinbase_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/skinning_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/specularmap_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/tonemapping_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/tonemapping_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/uv_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/uv_pars_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/uv_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/uv2_pars_fragment.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/uv2_pars_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/uv2_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/worldpos_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/background_frag.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/background_vert.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/cube_frag.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/cube_vert.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/depth_frag.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/depth_vert.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/distanceRGBA_frag.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/distanceRGBA_vert.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/equirect_frag.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/equirect_vert.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/linedashed_frag.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/linedashed_vert.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/meshbasic_frag.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/meshbasic_vert.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/meshlambert_frag.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/meshlambert_vert.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/meshmatcap_frag.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/meshmatcap_vert.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/meshphong_frag.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/meshphong_vert.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/meshphysical_frag.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/meshphysical_vert.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/normal_frag.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/normal_vert.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/points_frag.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/points_vert.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/shadow_frag.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/shadow_vert.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/sprite_frag.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/sprite_vert.glsl.js","../../node_modules/three/src/renderers/shaders/UniformsUtils.js","../../node_modules/three/src/renderers/shaders/UniformsLib.js","../../node_modules/three/src/renderers/shaders/ShaderLib.js","../../node_modules/three/src/renderers/webgl/WebGLAnimation.js","../../node_modules/three/src/renderers/webgl/WebGLAttributes.js","../../node_modules/three/src/geometries/PlaneGeometry.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/default_vertex.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderChunk/default_fragment.glsl.js","../../node_modules/three/src/materials/ShaderMaterial.js","../../node_modules/three/src/renderers/webgl/WebGLBackground.js","../../node_modules/three/src/renderers/webgl/WebGLBufferRenderer.js","../../node_modules/three/src/renderers/webgl/WebGLCapabilities.js","../../node_modules/three/src/renderers/webgl/WebGLClipping.js","../../node_modules/three/src/renderers/webgl/WebGLExtensions.js","../../node_modules/three/src/renderers/webgl/WebGLGeometries.js","../../node_modules/three/src/renderers/webgl/WebGLIndexedBufferRenderer.js","../../node_modules/three/src/renderers/webgl/WebGLInfo.js","../../node_modules/three/src/renderers/webgl/WebGLMorphtargets.js","../../node_modules/three/src/renderers/webgl/WebGLObjects.js","../../node_modules/three/src/textures/CubeTexture.js","../../node_modules/three/src/textures/DataTexture2DArray.js","../../node_modules/three/src/textures/DataTexture3D.js","../../node_modules/three/src/renderers/webgl/WebGLUniforms.js","../../node_modules/three/src/renderers/webgl/WebGLShader.js","../../node_modules/three/src/renderers/webgl/WebGLProgram.js","../../node_modules/three/src/renderers/webgl/WebGLPrograms.js","../../node_modules/three/src/renderers/webgl/WebGLProperties.js","../../node_modules/three/src/renderers/webgl/WebGLRenderLists.js","../../node_modules/three/src/renderers/webgl/WebGLLights.js","../../node_modules/three/src/renderers/webgl/WebGLRenderStates.js","../../node_modules/three/src/renderers/WebGLRenderTarget.js","../../node_modules/three/src/materials/MeshDepthMaterial.js","../../node_modules/three/src/materials/MeshDistanceMaterial.js","../../node_modules/three/src/renderers/shaders/ShaderLib/vsm_frag.glsl.js","../../node_modules/three/src/renderers/shaders/ShaderLib/vsm_vert.glsl.js","../../node_modules/three/src/renderers/webgl/WebGLShadowMap.js","../../node_modules/three/src/renderers/webgl/WebGLState.js","../../node_modules/three/src/renderers/webgl/WebGLTextures.js","../../node_modules/three/src/renderers/webgl/WebGLUtils.js","../../node_modules/three/src/renderers/WebGLMultiviewRenderTarget.js","../../node_modules/three/src/renderers/webgl/WebGLMultiview.js","../../node_modules/three/src/objects/Group.js","../../node_modules/three/src/cameras/ArrayCamera.js","../../node_modules/three/src/renderers/webvr/WebVRUtils.js","../../node_modules/three/src/renderers/webvr/WebVRManager.js","../../node_modules/three/src/renderers/webvr/WebXRManager.js","../../src/three.js","../../node_modules/three/src/renderers/WebGLRenderer.js"],"sourcesContent":["/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nfunction EventDispatcher() {}\n\nObject.assign( EventDispatcher.prototype, {\n\n\taddEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tvar listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t},\n\n\thasEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tvar listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t},\n\n\tremoveEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tvar index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\tvar array = listenerArray.slice( 0 );\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { EventDispatcher };\n","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _lut = [];\n\nfor ( var i = 0; i < 256; i ++ ) {\n\n\t_lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\n\n}\n\nvar _Math = {\n\n\tDEG2RAD: Math.PI / 180,\n\tRAD2DEG: 180 / Math.PI,\n\n\tgenerateUUID: function () {\n\n\t\t// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n\n\t\tvar d0 = Math.random() * 0xffffffff | 0;\n\t\tvar d1 = Math.random() * 0xffffffff | 0;\n\t\tvar d2 = Math.random() * 0xffffffff | 0;\n\t\tvar d3 = Math.random() * 0xffffffff | 0;\n\t\tvar uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\n\t\treturn uuid.toUpperCase();\n\n\t},\n\n\tclamp: function ( value, min, max ) {\n\n\t\treturn Math.max( min, Math.min( max, value ) );\n\n\t},\n\n\t// compute euclidian modulo of m % n\n\t// https://en.wikipedia.org/wiki/Modulo_operation\n\n\teuclideanModulo: function ( n, m ) {\n\n\t\treturn ( ( n % m ) + m ) % m;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\n\n\tlerp: function ( x, y, t ) {\n\n\t\treturn ( 1 - t ) * x + t * y;\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\tdegToRad: function ( degrees ) {\n\n\t\treturn degrees * _Math.DEG2RAD;\n\n\t},\n\n\tradToDeg: function ( radians ) {\n\n\t\treturn radians * _Math.RAD2DEG;\n\n\t},\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t},\n\n\tceilPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tfloorPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n\t}\n\n};\n\n\nexport { _Math };\n","import { _Math } from './Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _colorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nvar _hslA = { h: 0, s: 0, l: 0 };\nvar _hslB = { h: 0, s: 0, l: 0 };\n\nfunction Color( r, g, b ) {\n\n\tif ( g === undefined && b === undefined ) {\n\n\t\t// r is THREE.Color, hex or string\n\t\treturn this.set( r );\n\n\t}\n\n\treturn this.setRGB( r, g, b );\n\n}\n\nfunction hue2rgb( p, q, t ) {\n\n\tif ( t < 0 ) t += 1;\n\tif ( t > 1 ) t -= 1;\n\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\tif ( t < 1 / 2 ) return q;\n\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\treturn p;\n\n}\n\nfunction SRGBToLinear( c ) {\n\n\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\n\n}\n\nfunction LinearToSRGB( c ) {\n\n\treturn ( c < 0.0031308 ) ? c * 12.92 : 1.055 * ( Math.pow( c, 0.41666 ) ) - 0.055;\n\n}\n\nObject.assign( Color.prototype, {\n\n\tisColor: true,\n\n\tr: 1, g: 1, b: 1,\n\n\tset: function ( value ) {\n\n\t\tif ( value && value.isColor ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetHex: function ( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t},\n\n\tsetRGB: function ( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t},\n\n\tsetHSL: function ( h, s, l ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\th = _Math.euclideanModulo( h, 1 );\n\t\ts = _Math.clamp( s, 0, 1 );\n\t\tl = _Math.clamp( l, 0, 1 );\n\n\t\tif ( s === 0 ) {\n\n\t\t\tthis.r = this.g = this.b = l;\n\n\t\t} else {\n\n\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\tvar q = ( 2 * l ) - p;\n\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetStyle: function ( style ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tvar m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tvar color;\n\t\t\tvar name = m[ 1 ];\n\t\t\tvar components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\n\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tvar hex = m[ 1 ];\n\t\t\tvar size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\treturn this.setColorName( style );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetColorName: function ( style ) {\n\n\t\t// color keywords\n\t\tvar hex = _colorKeywords[ style ];\n\n\t\tif ( hex !== undefined ) {\n\n\t\t\t// red\n\t\t\tthis.setHex( hex );\n\n\t\t} else {\n\n\t\t\t// unknown color\n\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t},\n\n\tcopy: function ( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t},\n\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tthis.r = Math.pow( color.r, gammaFactor );\n\t\tthis.g = Math.pow( color.g, gammaFactor );\n\t\tthis.b = Math.pow( color.b, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tvar safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\n\n\t\tthis.r = Math.pow( color.r, safeInverse );\n\t\tthis.g = Math.pow( color.g, safeInverse );\n\t\tthis.b = Math.pow( color.b, safeInverse );\n\n\t\treturn this;\n\n\t},\n\n\tconvertGammaToLinear: function ( gammaFactor ) {\n\n\t\tthis.copyGammaToLinear( this, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToGamma: function ( gammaFactor ) {\n\n\t\tthis.copyLinearToGamma( this, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tcopySRGBToLinear: function ( color ) {\n\n\t\tthis.r = SRGBToLinear( color.r );\n\t\tthis.g = SRGBToLinear( color.g );\n\t\tthis.b = SRGBToLinear( color.b );\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToSRGB: function ( color ) {\n\n\t\tthis.r = LinearToSRGB( color.r );\n\t\tthis.g = LinearToSRGB( color.g );\n\t\tthis.b = LinearToSRGB( color.b );\n\n\t\treturn this;\n\n\t},\n\n\tconvertSRGBToLinear: function () {\n\n\t\tthis.copySRGBToLinear( this );\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToSRGB: function () {\n\n\t\tthis.copyLinearToSRGB( this );\n\n\t\treturn this;\n\n\t},\n\n\tgetHex: function () {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t},\n\n\tgetHexString: function () {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t},\n\n\tgetHSL: function ( target ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Color: .getHSL() target is now required' );\n\t\t\ttarget = { h: 0, s: 0, l: 0 };\n\n\t\t}\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tvar max = Math.max( r, g, b );\n\t\tvar min = Math.min( r, g, b );\n\n\t\tvar hue, saturation;\n\t\tvar lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tvar delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\ttarget.h = hue;\n\t\ttarget.s = saturation;\n\t\ttarget.l = lightness;\n\n\t\treturn target;\n\n\t},\n\n\tgetStyle: function () {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t},\n\n\toffsetHSL: function ( h, s, l ) {\n\n\t\tthis.getHSL( _hslA );\n\n\t\t_hslA.h += h; _hslA.s += s; _hslA.l += l;\n\n\t\tthis.setHSL( _hslA.h, _hslA.s, _hslA.l );\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t},\n\n\taddColors: function ( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpHSL: function ( color, alpha ) {\n\n\t\tthis.getHSL( _hslA );\n\t\tcolor.getHSL( _hslB );\n\n\t\tvar h = _Math.lerp( _hslA.h, _hslB.h, alpha );\n\t\tvar s = _Math.lerp( _hslA.s, _hslB.s, alpha );\n\t\tvar l = _Math.lerp( _hslA.l, _hslB.l, alpha );\n\n\t\tthis.setHSL( h, s, l );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn this.getHex();\n\n\t}\n\n} );\n\nColor.NAMES = _colorKeywords;\n\nexport { Color };\n","/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nimport { _Math } from './Math.js';\n\nfunction Quaternion( x, y, z, w ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._w = ( w !== undefined ) ? w : 1;\n\n}\n\nObject.assign( Quaternion, {\n\n\tslerp: function ( qa, qb, qm, t ) {\n\n\t\treturn qm.copy( qa ).slerp( qb, t );\n\n\t},\n\n\tslerpFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tvar x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ],\n\n\t\t\tx1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tvar s = 1 - t,\n\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tvar sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tvar tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tvar f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n} );\n\nObject.defineProperties( Quaternion.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tw: {\n\n\t\tget: function () {\n\n\t\t\treturn this._w;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._w = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Quaternion.prototype, {\n\n\tisQuaternion: true,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t},\n\n\tcopy: function ( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromEuler: function ( euler, update ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar x = euler._x, y = euler._y, z = euler._z, order = euler.order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tvar cos = Math.cos;\n\t\tvar sin = Math.sin;\n\n\t\tvar c1 = cos( x / 2 );\n\t\tvar c2 = cos( y / 2 );\n\t\tvar c3 = cos( z / 2 );\n\n\t\tvar s1 = sin( x / 2 );\n\t\tvar s2 = sin( y / 2 );\n\t\tvar s3 = sin( z / 2 );\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t}\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromAxisAngle: function ( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33,\n\t\t\ts;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromUnitVectors: function ( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tvar EPS = 0.000001;\n\n\t\tvar r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < EPS ) {\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t},\n\n\tangleTo: function ( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( _Math.clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t},\n\n\trotateTowards: function ( q, step ) {\n\n\t\tvar angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tvar t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t},\n\n\tinverse: function () {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t},\n\n\tconjugate: function () {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\tvar l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t},\n\n\tpremultiply: function ( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t},\n\n\tmultiplyQuaternions: function ( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tslerp: function ( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tvar s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize();\n\t\t\tthis._onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tvar halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t},\n\n\t_onChange: function ( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\t_onChangeCallback: function () {}\n\n} );\n\n\nexport { Quaternion };\n","import { _Math } from './Math.js';\nimport { Quaternion } from './Quaternion.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nvar _vector = new Vector3();\nvar _quaternion = new Quaternion();\n\nfunction Vector3( x, y, z ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\n}\n\nObject.assign( Vector3.prototype, {\n\n\tisVector3: true,\n\n\tset: function ( x, y, z ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVectors: function ( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyEuler: function ( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\treturn this.applyQuaternion( _quaternion.setFromEuler( euler ) );\n\n\t},\n\n\tapplyAxisAngle: function ( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion.setFromAxisAngle( axis, angle ) );\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyNormalMatrix: function ( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tvar w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tvar ix = qw * x + qy * z - qz * y;\n\t\tvar iy = qw * y + qz * x - qx * z;\n\t\tvar iz = qw * z + qx * y - qy * x;\n\t\tvar iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t},\n\n\tproject: function ( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t},\n\n\tunproject: function ( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t},\n\n\ttransformDirection: function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function ( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t},\n\n\t// TODO lengthSquared?\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tcross: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\treturn this.crossVectors( this, v );\n\n\t},\n\n\tcrossVectors: function ( a, b ) {\n\n\t\tvar ax = a.x, ay = a.y, az = a.z;\n\t\tvar bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t},\n\n\tprojectOnVector: function ( v ) {\n\n\t\t// v cannot be the zero v\n\n\t\tvar scalar = v.dot( this ) / v.lengthSq();\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t},\n\n\tprojectOnPlane: function ( planeNormal ) {\n\n\t\t_vector.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector );\n\n\t},\n\n\treflect: function ( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t},\n\n\tangleTo: function ( v ) {\n\n\t\tvar denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) console.error( 'THREE.Vector3: angleTo() can\\'t handle zero length vectors.' );\n\n\t\tvar theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( _Math.clamp( theta, - 1, 1 ) );\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t},\n\n\tmanhattanDistanceTo: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t},\n\n\tsetFromSpherical: function ( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t},\n\n\tsetFromSphericalCoords: function ( radius, phi, theta ) {\n\n\t\tvar sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCylindrical: function ( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t},\n\n\tsetFromCylindricalCoords: function ( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixPosition: function ( m ) {\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixScale: function ( m ) {\n\n\t\tvar sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tvar sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tvar sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixColumn: function ( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector3 };\n","import { Color } from '../math/Color.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Face3( a, b, c, normal, color, materialIndex ) {\n\n\tthis.a = a;\n\tthis.b = b;\n\tthis.c = c;\n\n\tthis.normal = ( normal && normal.isVector3 ) ? normal : new Vector3();\n\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\n\n\tthis.color = ( color && color.isColor ) ? color : new Color();\n\tthis.vertexColors = Array.isArray( color ) ? color : [];\n\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\n\n}\n\nObject.assign( Face3.prototype, {\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.a = source.a;\n\t\tthis.b = source.b;\n\t\tthis.c = source.c;\n\n\t\tthis.normal.copy( source.normal );\n\t\tthis.color.copy( source.color );\n\n\t\tthis.materialIndex = source.materialIndex;\n\n\t\tfor ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\n\n\t\t}\n\n\t\tfor ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Face3 };\n","import { Vector3 } from './Vector3.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n * @author tschw\n */\n\nvar _vector = new Vector3();\n\nfunction Matrix3() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0,\n\t\t0, 1, 0,\n\t\t0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix3.prototype, {\n\n\tisMatrix3: true,\n\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix4: function ( m ) {\n\n\t\tvar me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tapplyToBufferAttribute: function ( attribute ) {\n\n\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = attribute.getX( i );\n\t\t\t_vector.y = attribute.getY( i );\n\t\t\t_vector.z = attribute.getZ( i );\n\n\t\t\t_vector.applyMatrix3( this );\n\n\t\t\tattribute.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn attribute;\n\n\t},\n\n\tmultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t},\n\n\tgetInverse: function ( matrix, throwOnDegenerate ) {\n\n\t\tif ( matrix && matrix.isMatrix4 ) {\n\n\t\t\tconsole.error( \"THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.\" );\n\n\t\t}\n\n\t\tvar me = matrix.elements,\n\t\t\tte = this.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\n\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\n\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnDegenerate === true ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\treturn this.identity();\n\n\t\t}\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar tmp, m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tgetNormalMatrix: function ( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\n\n\t},\n\n\ttransposeIntoArray: function ( r ) {\n\n\t\tvar m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetUvTransform: function ( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tvar c = Math.cos( rotation );\n\t\tvar s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t},\n\n\tscale: function ( sx, sy ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\n\n\t\treturn this;\n\n\t},\n\n\trotate: function ( theta ) {\n\n\t\tvar c = Math.cos( theta );\n\t\tvar s = Math.sin( theta );\n\n\t\tvar te = this.elements;\n\n\t\tvar a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\n\t\tvar a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\n\n\t\tte[ 0 ] = c * a11 + s * a21;\n\t\tte[ 3 ] = c * a12 + s * a22;\n\t\tte[ 6 ] = c * a13 + s * a23;\n\n\t\tte[ 1 ] = - s * a11 + c * a21;\n\t\tte[ 4 ] = - s * a12 + c * a22;\n\t\tte[ 7 ] = - s * a13 + c * a23;\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( tx, ty ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n\nexport { Matrix3 };\n","import { Vector3 } from './Vector3.js';\n\nvar _points = [\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3()\n];\n\nvar _vector = new Vector3();\n\nvar _box = new Box3();\n\n// triangle centered vertices\n\nvar _v0 = new Vector3();\nvar _v1 = new Vector3();\nvar _v2 = new Vector3();\n\n// triangle edge vectors\n\nvar _f0 = new Vector3();\nvar _f1 = new Vector3();\nvar _f2 = new Vector3();\n\nvar _center = new Vector3();\nvar _extents = new Vector3();\nvar _triangleNormal = new Vector3();\nvar _testAxis = new Vector3();\n\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Box3( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new Vector3( + Infinity, + Infinity, + Infinity );\n\tthis.max = ( max !== undefined ) ? max : new Vector3( - Infinity, - Infinity, - Infinity );\n\n}\n\n\nObject.assign( Box3.prototype, {\n\n\tisBox3: true,\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromArray: function ( array ) {\n\n\t\tvar minX = + Infinity;\n\t\tvar minY = + Infinity;\n\t\tvar minZ = + Infinity;\n\n\t\tvar maxX = - Infinity;\n\t\tvar maxY = - Infinity;\n\t\tvar maxZ = - Infinity;\n\n\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\tvar x = array[ i ];\n\t\t\tvar y = array[ i + 1 ];\n\t\t\tvar z = array[ i + 2 ];\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromBufferAttribute: function ( attribute ) {\n\n\t\tvar minX = + Infinity;\n\t\tvar minY = + Infinity;\n\t\tvar minZ = + Infinity;\n\n\t\tvar maxX = - Infinity;\n\t\tvar maxY = - Infinity;\n\t\tvar maxZ = - Infinity;\n\n\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\tvar x = attribute.getX( i );\n\t\t\tvar y = attribute.getY( i );\n\t\t\tvar z = attribute.getZ( i );\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function ( center, size ) {\n\n\t\tvar halfSize = _vector.copy( size ).multiplyScalar( 0.5 );\n\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromObject: function ( object ) {\n\n\t\tthis.makeEmpty();\n\n\t\treturn this.expandByObject( object );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tisEmpty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t},\n\n\tgetCenter: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getCenter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tgetSize: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getSize() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t},\n\n\texpandByObject: function ( object ) {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( geometry !== undefined ) {\n\n\t\t\tif ( geometry.boundingBox === null ) {\n\n\t\t\t\tgeometry.computeBoundingBox();\n\n\t\t\t}\n\n\t\t\t_box.copy( geometry.boundingBox );\n\t\t\t_box.applyMatrix4( object.matrixWorld );\n\n\t\t\tthis.expandByPoint( _box.min );\n\t\t\tthis.expandByPoint( _box.max );\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tthis.expandByObject( children[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t},\n\n\tgetParameter: function ( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getParameter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\t// Find the point on the AABB closest to the sphere center.\n\t\tthis.clampPoint( sphere.center, _vector );\n\n\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\treturn _vector.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tvar min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= - plane.constant && max >= - plane.constant );\n\n\t},\n\n\tintersectsTriangle: function ( triangle ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// compute box center and extents\n\t\tthis.getCenter( _center );\n\t\t_extents.subVectors( this.max, _center );\n\n\t\t// translate triangle to aabb origin\n\t\t_v0.subVectors( triangle.a, _center );\n\t\t_v1.subVectors( triangle.b, _center );\n\t\t_v2.subVectors( triangle.c, _center );\n\n\t\t// compute edge vectors for triangle\n\t\t_f0.subVectors( _v1, _v0 );\n\t\t_f1.subVectors( _v2, _v1 );\n\t\t_f2.subVectors( _v0, _v2 );\n\n\t\t// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\n\t\t// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\n\t\t// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\n\t\tvar axes = [\n\t\t\t0, - _f0.z, _f0.y, 0, - _f1.z, _f1.y, 0, - _f2.z, _f2.y,\n\t\t\t_f0.z, 0, - _f0.x, _f1.z, 0, - _f1.x, _f2.z, 0, - _f2.x,\n\t\t\t- _f0.y, _f0.x, 0, - _f1.y, _f1.x, 0, - _f2.y, _f2.x, 0\n\t\t];\n\t\tif ( ! satForAxes( axes, _v0, _v1, _v2, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// test 3 face normals from the aabb\n\t\taxes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\n\t\tif ( ! satForAxes( axes, _v0, _v1, _v2, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// finally testing the face normal of the triangle\n\t\t// use already existing triangle edge vectors here\n\t\t_triangleNormal.crossVectors( _f0, _f1 );\n\t\taxes = [ _triangleNormal.x, _triangleNormal.y, _triangleNormal.z ];\n\n\t\treturn satForAxes( axes, _v0, _v1, _v2, _extents );\n\n\t},\n\n\tclampPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\tvar clampedPoint = _vector.copy( point ).clamp( this.min, this.max );\n\n\t\treturn clampedPoint.sub( point ).length();\n\n\t},\n\n\tgetBoundingSphere: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Box3: .getBoundingSphere() target is now required' );\n\t\t\t//target = new Sphere(); // removed to avoid cyclic dependency\n\n\t\t}\n\n\t\tthis.getCenter( target.center );\n\n\t\ttarget.radius = this.getSize( _vector ).length() * 0.5;\n\n\t\treturn target;\n\n\t},\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif ( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\t// transform of empty box is an empty box.\n\t\tif ( this.isEmpty() ) return this;\n\n\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t_points[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t_points[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t_points[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t_points[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t_points[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t_points[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t_points[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t_points[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 111\n\n\t\tthis.setFromPoints( _points );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n} );\n\nfunction satForAxes( axes, v0, v1, v2, extents ) {\n\n\tvar i, j;\n\n\tfor ( i = 0, j = axes.length - 3; i <= j; i += 3 ) {\n\n\t\t_testAxis.fromArray( axes, i );\n\t\t// project the aabb onto the seperating axis\n\t\tvar r = extents.x * Math.abs( _testAxis.x ) + extents.y * Math.abs( _testAxis.y ) + extents.z * Math.abs( _testAxis.z );\n\t\t// project all 3 vertices of the triangle onto the seperating axis\n\t\tvar p0 = v0.dot( _testAxis );\n\t\tvar p1 = v1.dot( _testAxis );\n\t\tvar p2 = v2.dot( _testAxis );\n\t\t// actual test, basically see if either of the most extreme of the triangle points intersects r\n\t\tif ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n\t\t\t// points of the projected triangle are outside the projected half-length of the aabb\n\t\t\t// the axis is seperating and we can exit\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nexport { Box3 };\n","import { Box3 } from './Box3.js';\nimport { Vector3 } from './Vector3.js';\n\nvar _box = new Box3();\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Sphere( center, radius ) {\n\n\tthis.center = ( center !== undefined ) ? center : new Vector3();\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\n\n}\n\nObject.assign( Sphere.prototype, {\n\n\tset: function ( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points, optionalCenter ) {\n\n\t\tvar center = this.center;\n\n\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\tcenter.copy( optionalCenter );\n\n\t\t} else {\n\n\t\t\t_box.setFromPoints( points ).getCenter( center );\n\n\t\t}\n\n\t\tvar maxRadiusSq = 0;\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t}\n\n\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t},\n\n\tempty: function () {\n\n\t\treturn ( this.radius <= 0 );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\n\n\t},\n\n\tclampPoint: function ( point, target ) {\n\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\ttarget.sub( this.center ).normalize();\n\t\t\ttarget.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn target;\n\n\t},\n\n\tgetBoundingBox: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .getBoundingBox() target is now required' );\n\t\t\ttarget = new Box3();\n\n\t\t}\n\n\t\ttarget.set( this.center, this.center );\n\t\ttarget.expandByScalar( this.radius );\n\n\t\treturn target;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n} );\n\n\nexport { Sphere };\n","import { Vector3 } from './Vector3.js';\n\nvar _v1 = new Vector3();\nvar _m1 = new Matrix4();\nvar _zero = new Vector3( 0, 0, 0 );\nvar _one = new Vector3( 1, 1, 1 );\nvar _x = new Vector3();\nvar _y = new Vector3();\nvar _z = new Vector3();\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author jordi_ros / http://plattsoft.com\n * @author D1plo1d / http://github.com/D1plo1d\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author timknip / http://www.floorplanner.com/\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Matrix4() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0, 0,\n\t\t0, 1, 0, 0,\n\t\t0, 0, 1, 0,\n\t\t0, 0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix4.prototype, {\n\n\tisMatrix4: true,\n\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t},\n\n\tcopyPosition: function ( m ) {\n\n\t\tvar te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\textractRotation: function ( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tvar scaleX = 1 / _v1.setFromMatrixColumn( m, 0 ).length();\n\t\tvar scaleY = 1 / _v1.setFromMatrixColumn( m, 1 ).length();\n\t\tvar scaleZ = 1 / _v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromEuler: function ( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromQuaternion: function ( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t},\n\n\tlookAt: function ( eye, target, up ) {\n\n\t\tvar te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tapplyToBufferAttribute: function ( attribute ) {\n\n\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t_v1.x = attribute.getX( i );\n\t\t\t_v1.y = attribute.getY( i );\n\t\t\t_v1.z = attribute.getZ( i );\n\n\t\t\t_v1.applyMatrix4( this );\n\n\t\t\tattribute.setXYZ( i, _v1.x, _v1.y, _v1.z );\n\n\t\t}\n\n\t\treturn attribute;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar te = this.elements;\n\t\tvar tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tsetPosition: function ( x, y, z ) {\n\n\t\tvar te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetInverse: function ( m, throwOnDegenerate ) {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tvar te = this.elements,\n\t\t\tme = m.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tvar det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnDegenerate === true ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\treturn this.identity();\n\n\t\t}\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( v ) {\n\n\t\tvar te = this.elements;\n\t\tvar x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t},\n\n\tgetMaxScaleOnAxis: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t},\n\n\tmakeTranslation: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationX: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationY: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationZ: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationAxis: function ( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tvar c = Math.cos( angle );\n\t\tvar s = Math.sin( angle );\n\t\tvar t = 1 - c;\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\n\t\tvar tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\t return this;\n\n\t},\n\n\tmakeScale: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeShear: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, y, z, 0,\n\t\t\tx, 1, z, 0,\n\t\t\tx, y, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcompose: function ( position, quaternion, scale ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tvar x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tvar sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tdecompose: function ( position, quaternion, scale ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar sx = _v1.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tvar sy = _v1.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tvar sz = _v1.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tvar det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1.copy( this );\n\n\t\tvar invSX = 1 / sx;\n\t\tvar invSY = 1 / sy;\n\t\tvar invSZ = 1 / sz;\n\n\t\t_m1.elements[ 0 ] *= invSX;\n\t\t_m1.elements[ 1 ] *= invSX;\n\t\t_m1.elements[ 2 ] *= invSX;\n\n\t\t_m1.elements[ 4 ] *= invSY;\n\t\t_m1.elements[ 5 ] *= invSY;\n\t\t_m1.elements[ 6 ] *= invSY;\n\n\t\t_m1.elements[ 8 ] *= invSZ;\n\t\t_m1.elements[ 9 ] *= invSZ;\n\t\t_m1.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t},\n\n\tmakePerspective: function ( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\t\tvar x = 2 * near / ( right - left );\n\t\tvar y = 2 * near / ( top - bottom );\n\n\t\tvar a = ( right + left ) / ( right - left );\n\t\tvar b = ( top + bottom ) / ( top - bottom );\n\t\tvar c = - ( far + near ) / ( far - near );\n\t\tvar d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t},\n\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\n\n\t\tvar te = this.elements;\n\t\tvar w = 1.0 / ( right - left );\n\t\tvar h = 1.0 / ( top - bottom );\n\t\tvar p = 1.0 / ( far - near );\n\n\t\tvar x = ( right + left ) * w;\n\t\tvar y = ( top + bottom ) * h;\n\t\tvar z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n\nexport { Matrix4 };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author philogb / http://blog.thejit.org/\n * @author egraether / http://egraether.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nfunction Vector2( x, y ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\n}\n\nObject.defineProperties( Vector2.prototype, {\n\n\t\"width\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.x = value;\n\n\t\t}\n\n\t},\n\n\t\"height\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.y = value;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Vector2.prototype, {\n\n\tisVector2: true,\n\n\tset: function ( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x, y = this.y;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function ( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t},\n\n\tcross: function ( v ) {\n\n\t\treturn this.x * v.y - this.y * v.x;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tangle: function () {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tvar angle = Math.atan2( this.y, this.x );\n\n\t\tif ( angle < 0 ) angle += 2 * Math.PI;\n\n\t\treturn angle;\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t},\n\n\tmanhattanDistanceTo: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t},\n\n\trotateAround: function ( center, angle ) {\n\n\t\tvar c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tvar x = this.x - center.x;\n\t\tvar y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector2 };\n","import { Quaternion } from './Quaternion.js';\nimport { Vector3 } from './Vector3.js';\nimport { Matrix4 } from './Matrix4.js';\nimport { _Math } from './Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nvar _matrix = new Matrix4();\nvar _quaternion = new Quaternion();\n\nfunction Euler( x, y, z, order ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._order = order || Euler.DefaultOrder;\n\n}\n\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nEuler.DefaultOrder = 'XYZ';\n\nObject.defineProperties( Euler.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\torder: {\n\n\t\tget: function () {\n\n\t\t\treturn this._order;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._order = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Euler.prototype, {\n\n\tisEuler: true,\n\n\tset: function ( x, y, z, order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order || this._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t},\n\n\tcopy: function ( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m, order, update ) {\n\n\t\tvar clamp = _Math.clamp;\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements;\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\torder = order || this._order;\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\n\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = 0;\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._y = 0;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromQuaternion: function ( q, order, update ) {\n\n\t\t_matrix.makeRotationFromQuaternion( q );\n\n\t\treturn this.setFromRotationMatrix( _matrix, order, update );\n\n\t},\n\n\tsetFromVector3: function ( v, order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\n\n\t},\n\n\treorder: function ( newOrder ) {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\t_quaternion.setFromEuler( this );\n\n\t\treturn this.setFromQuaternion( _quaternion, newOrder );\n\n\t},\n\n\tequals: function ( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t},\n\n\ttoVector3: function ( optionalResult ) {\n\n\t\tif ( optionalResult ) {\n\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t} else {\n\n\t\t\treturn new Vector3( this._x, this._y, this._z );\n\n\t\t}\n\n\t},\n\n\t_onChange: function ( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\t_onChangeCallback: function () {}\n\n} );\n\n\nexport { Euler };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Layers() {\n\n\tthis.mask = 1 | 0;\n\n}\n\nObject.assign( Layers.prototype, {\n\n\tset: function ( channel ) {\n\n\t\tthis.mask = 1 << channel | 0;\n\n\t},\n\n\tenable: function ( channel ) {\n\n\t\tthis.mask |= 1 << channel | 0;\n\n\t},\n\n\tenableAll: function () {\n\n\t\tthis.mask = 0xffffffff | 0;\n\n\t},\n\n\ttoggle: function ( channel ) {\n\n\t\tthis.mask ^= 1 << channel | 0;\n\n\t},\n\n\tdisable: function ( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t},\n\n\tdisableAll: function () {\n\n\t\tthis.mask = 0;\n\n\t},\n\n\ttest: function ( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n} );\n\n\nexport { Layers };\n","export var REVISION = '111';\nexport var MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };\nexport var TOUCH = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };\nexport var CullFaceNone = 0;\nexport var CullFaceBack = 1;\nexport var CullFaceFront = 2;\nexport var CullFaceFrontBack = 3;\nexport var FrontFaceDirectionCW = 0;\nexport var FrontFaceDirectionCCW = 1;\nexport var BasicShadowMap = 0;\nexport var PCFShadowMap = 1;\nexport var PCFSoftShadowMap = 2;\nexport var VSMShadowMap = 3;\nexport var FrontSide = 0;\nexport var BackSide = 1;\nexport var DoubleSide = 2;\nexport var FlatShading = 1;\nexport var SmoothShading = 2;\nexport var NoColors = 0;\nexport var FaceColors = 1;\nexport var VertexColors = 2;\nexport var NoBlending = 0;\nexport var NormalBlending = 1;\nexport var AdditiveBlending = 2;\nexport var SubtractiveBlending = 3;\nexport var MultiplyBlending = 4;\nexport var CustomBlending = 5;\nexport var AddEquation = 100;\nexport var SubtractEquation = 101;\nexport var ReverseSubtractEquation = 102;\nexport var MinEquation = 103;\nexport var MaxEquation = 104;\nexport var ZeroFactor = 200;\nexport var OneFactor = 201;\nexport var SrcColorFactor = 202;\nexport var OneMinusSrcColorFactor = 203;\nexport var SrcAlphaFactor = 204;\nexport var OneMinusSrcAlphaFactor = 205;\nexport var DstAlphaFactor = 206;\nexport var OneMinusDstAlphaFactor = 207;\nexport var DstColorFactor = 208;\nexport var OneMinusDstColorFactor = 209;\nexport var SrcAlphaSaturateFactor = 210;\nexport var NeverDepth = 0;\nexport var AlwaysDepth = 1;\nexport var LessDepth = 2;\nexport var LessEqualDepth = 3;\nexport var EqualDepth = 4;\nexport var GreaterEqualDepth = 5;\nexport var GreaterDepth = 6;\nexport var NotEqualDepth = 7;\nexport var MultiplyOperation = 0;\nexport var MixOperation = 1;\nexport var AddOperation = 2;\nexport var NoToneMapping = 0;\nexport var LinearToneMapping = 1;\nexport var ReinhardToneMapping = 2;\nexport var Uncharted2ToneMapping = 3;\nexport var CineonToneMapping = 4;\nexport var ACESFilmicToneMapping = 5;\n\nexport var UVMapping = 300;\nexport var CubeReflectionMapping = 301;\nexport var CubeRefractionMapping = 302;\nexport var EquirectangularReflectionMapping = 303;\nexport var EquirectangularRefractionMapping = 304;\nexport var SphericalReflectionMapping = 305;\nexport var CubeUVReflectionMapping = 306;\nexport var CubeUVRefractionMapping = 307;\nexport var RepeatWrapping = 1000;\nexport var ClampToEdgeWrapping = 1001;\nexport var MirroredRepeatWrapping = 1002;\nexport var NearestFilter = 1003;\nexport var NearestMipmapNearestFilter = 1004;\nexport var NearestMipMapNearestFilter = 1004;\nexport var NearestMipmapLinearFilter = 1005;\nexport var NearestMipMapLinearFilter = 1005;\nexport var LinearFilter = 1006;\nexport var LinearMipmapNearestFilter = 1007;\nexport var LinearMipMapNearestFilter = 1007;\nexport var LinearMipmapLinearFilter = 1008;\nexport var LinearMipMapLinearFilter = 1008;\nexport var UnsignedByteType = 1009;\nexport var ByteType = 1010;\nexport var ShortType = 1011;\nexport var UnsignedShortType = 1012;\nexport var IntType = 1013;\nexport var UnsignedIntType = 1014;\nexport var FloatType = 1015;\nexport var HalfFloatType = 1016;\nexport var UnsignedShort4444Type = 1017;\nexport var UnsignedShort5551Type = 1018;\nexport var UnsignedShort565Type = 1019;\nexport var UnsignedInt248Type = 1020;\nexport var AlphaFormat = 1021;\nexport var RGBFormat = 1022;\nexport var RGBAFormat = 1023;\nexport var LuminanceFormat = 1024;\nexport var LuminanceAlphaFormat = 1025;\nexport var RGBEFormat = RGBAFormat;\nexport var DepthFormat = 1026;\nexport var DepthStencilFormat = 1027;\nexport var RedFormat = 1028;\nexport var RGB_S3TC_DXT1_Format = 33776;\nexport var RGBA_S3TC_DXT1_Format = 33777;\nexport var RGBA_S3TC_DXT3_Format = 33778;\nexport var RGBA_S3TC_DXT5_Format = 33779;\nexport var RGB_PVRTC_4BPPV1_Format = 35840;\nexport var RGB_PVRTC_2BPPV1_Format = 35841;\nexport var RGBA_PVRTC_4BPPV1_Format = 35842;\nexport var RGBA_PVRTC_2BPPV1_Format = 35843;\nexport var RGB_ETC1_Format = 36196;\nexport var RGBA_ASTC_4x4_Format = 37808;\nexport var RGBA_ASTC_5x4_Format = 37809;\nexport var RGBA_ASTC_5x5_Format = 37810;\nexport var RGBA_ASTC_6x5_Format = 37811;\nexport var RGBA_ASTC_6x6_Format = 37812;\nexport var RGBA_ASTC_8x5_Format = 37813;\nexport var RGBA_ASTC_8x6_Format = 37814;\nexport var RGBA_ASTC_8x8_Format = 37815;\nexport var RGBA_ASTC_10x5_Format = 37816;\nexport var RGBA_ASTC_10x6_Format = 37817;\nexport var RGBA_ASTC_10x8_Format = 37818;\nexport var RGBA_ASTC_10x10_Format = 37819;\nexport var RGBA_ASTC_12x10_Format = 37820;\nexport var RGBA_ASTC_12x12_Format = 37821;\nexport var LoopOnce = 2200;\nexport var LoopRepeat = 2201;\nexport var LoopPingPong = 2202;\nexport var InterpolateDiscrete = 2300;\nexport var InterpolateLinear = 2301;\nexport var InterpolateSmooth = 2302;\nexport var ZeroCurvatureEnding = 2400;\nexport var ZeroSlopeEnding = 2401;\nexport var WrapAroundEnding = 2402;\nexport var TrianglesDrawMode = 0;\nexport var TriangleStripDrawMode = 1;\nexport var TriangleFanDrawMode = 2;\nexport var LinearEncoding = 3000;\nexport var sRGBEncoding = 3001;\nexport var GammaEncoding = 3007;\nexport var RGBEEncoding = 3002;\nexport var LogLuvEncoding = 3003;\nexport var RGBM7Encoding = 3004;\nexport var RGBM16Encoding = 3005;\nexport var RGBDEncoding = 3006;\nexport var BasicDepthPacking = 3200;\nexport var RGBADepthPacking = 3201;\nexport var TangentSpaceNormalMap = 0;\nexport var ObjectSpaceNormalMap = 1;\n\nexport var ZeroStencilOp = 0;\nexport var KeepStencilOp = 7680;\nexport var ReplaceStencilOp = 7681;\nexport var IncrementStencilOp = 7682;\nexport var DecrementStencilOp = 7683;\nexport var IncrementWrapStencilOp = 34055;\nexport var DecrementWrapStencilOp = 34056;\nexport var InvertStencilOp = 5386;\n\nexport var NeverStencilFunc = 512;\nexport var LessStencilFunc = 513;\nexport var EqualStencilFunc = 514;\nexport var LessEqualStencilFunc = 515;\nexport var GreaterStencilFunc = 516;\nexport var NotEqualStencilFunc = 517;\nexport var GreaterEqualStencilFunc = 518;\nexport var AlwaysStencilFunc = 519;\n\nexport var StaticDrawUsage = 35044;\nexport var DynamicDrawUsage = 35048;\nexport var StreamDrawUsage = 35040;\nexport var StaticReadUsage = 35045;\nexport var DynamicReadUsage = 35049;\nexport var StreamReadUsage = 35041;\nexport var StaticCopyUsage = 35046;\nexport var DynamicCopyUsage = 35050;\nexport var StreamCopyUsage = 35042;\n","import { Quaternion } from '../math/Quaternion.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { EventDispatcher } from './EventDispatcher.js';\nimport { Euler } from '../math/Euler.js';\nimport { Layers } from './Layers.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { _Math } from '../math/Math.js';\nimport { TrianglesDrawMode } from '../constants.js';\n\nvar _object3DId = 0;\n\nvar _v1 = new Vector3();\nvar _q1 = new Quaternion();\nvar _m1 = new Matrix4();\nvar _target = new Vector3();\n\nvar _position = new Vector3();\nvar _scale = new Vector3();\nvar _quaternion = new Quaternion();\n\nvar _xAxis = new Vector3( 1, 0, 0 );\nvar _yAxis = new Vector3( 0, 1, 0 );\nvar _zAxis = new Vector3( 0, 0, 1 );\n\nvar _addedEvent = { type: 'added' };\nvar _removedEvent = { type: 'removed' };\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author elephantatwork / www.elephantatwork.ch\n */\n\nfunction Object3D() {\n\n\tObject.defineProperty( this, 'id', { value: _object3DId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Object3D';\n\n\tthis.parent = null;\n\tthis.children = [];\n\n\tthis.up = Object3D.DefaultUp.clone();\n\n\tvar position = new Vector3();\n\tvar rotation = new Euler();\n\tvar quaternion = new Quaternion();\n\tvar scale = new Vector3( 1, 1, 1 );\n\n\tfunction onRotationChange() {\n\n\t\tquaternion.setFromEuler( rotation, false );\n\n\t}\n\n\tfunction onQuaternionChange() {\n\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t}\n\n\trotation._onChange( onRotationChange );\n\tquaternion._onChange( onQuaternionChange );\n\n\tObject.defineProperties( this, {\n\t\tposition: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: position\n\t\t},\n\t\trotation: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: rotation\n\t\t},\n\t\tquaternion: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: quaternion\n\t\t},\n\t\tscale: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: scale\n\t\t},\n\t\tmodelViewMatrix: {\n\t\t\tvalue: new Matrix4()\n\t\t},\n\t\tnormalMatrix: {\n\t\t\tvalue: new Matrix3()\n\t\t}\n\t} );\n\n\tthis.matrix = new Matrix4();\n\tthis.matrixWorld = new Matrix4();\n\n\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n\tthis.matrixWorldNeedsUpdate = false;\n\n\tthis.layers = new Layers();\n\tthis.visible = true;\n\n\tthis.castShadow = false;\n\tthis.receiveShadow = false;\n\n\tthis.frustumCulled = true;\n\tthis.renderOrder = 0;\n\n\tthis.userData = {};\n\n}\n\nObject3D.DefaultUp = new Vector3( 0, 1, 0 );\nObject3D.DefaultMatrixAutoUpdate = true;\n\nObject3D.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Object3D,\n\n\tisObject3D: true,\n\n\tonBeforeRender: function () {},\n\tonAfterRender: function () {},\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tthis.matrix.premultiply( matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tthis.quaternion.premultiply( q );\n\n\t\treturn this;\n\n\t},\n\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t},\n\n\tsetRotationFromEuler: function ( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t},\n\n\tsetRotationFromMatrix: function ( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t},\n\n\trotateOnAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.multiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateOnWorldAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in world space\n\t\t// axis is assumed to be normalized\n\t\t// method assumes no rotated parent\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.premultiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _xAxis, angle );\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _yAxis, angle );\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _zAxis, angle );\n\n\t},\n\n\ttranslateOnAxis: function ( axis, distance ) {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_v1.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\tthis.position.add( _v1.multiplyScalar( distance ) );\n\n\t\treturn this;\n\n\t},\n\n\ttranslateX: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _xAxis, distance );\n\n\t},\n\n\ttranslateY: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _yAxis, distance );\n\n\t},\n\n\ttranslateZ: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _zAxis, distance );\n\n\t},\n\n\tlocalToWorld: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t},\n\n\tworldToLocal: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( _m1.getInverse( this.matrixWorld ) );\n\n\t},\n\n\tlookAt: function ( x, y, z ) {\n\n\t\t// This method does not support objects having non-uniformly-scaled parent(s)\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\t_target.copy( x );\n\n\t\t} else {\n\n\t\t\t_target.set( x, y, z );\n\n\t\t}\n\n\t\tvar parent = this.parent;\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_position.setFromMatrixPosition( this.matrixWorld );\n\n\t\tif ( this.isCamera || this.isLight ) {\n\n\t\t\t_m1.lookAt( _position, _target, this.up );\n\n\t\t} else {\n\n\t\t\t_m1.lookAt( _target, _position, this.up );\n\n\t\t}\n\n\t\tthis.quaternion.setFromRotationMatrix( _m1 );\n\n\t\tif ( parent ) {\n\n\t\t\t_m1.extractRotation( parent.matrixWorld );\n\t\t\t_q1.setFromRotationMatrix( _m1 );\n\t\t\tthis.quaternion.premultiply( _q1.inverse() );\n\n\t\t}\n\n\t},\n\n\tadd: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( ( object && object.isObject3D ) ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tthis.children.push( object );\n\n\t\t\tobject.dispatchEvent( _addedEvent );\n\n\t\t} else {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tremove: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tattach: function ( object ) {\n\n\t\t// adds object as a child of this, while maintaining the object's world transform\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_m1.getInverse( this.matrixWorld );\n\n\t\tif ( object.parent !== null ) {\n\n\t\t\tobject.parent.updateWorldMatrix( true, false );\n\n\t\t\t_m1.multiply( object.parent.matrixWorld );\n\n\t\t}\n\n\t\tobject.applyMatrix( _m1 );\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t},\n\n\tgetObjectById: function ( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t},\n\n\tgetObjectByName: function ( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t},\n\n\tgetObjectByProperty: function ( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tvar child = this.children[ i ];\n\t\t\tvar object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetWorldPosition: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldPosition() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\n\n\t},\n\n\tgetWorldQuaternion: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldQuaternion() target is now required' );\n\t\t\ttarget = new Quaternion();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tthis.matrixWorld.decompose( _position, target, _scale );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldScale: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldScale() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tthis.matrixWorld.decompose( _position, _quaternion, target );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tvar e = this.matrixWorld.elements;\n\n\t\treturn target.set( e[ 8 ], e[ 9 ], e[ 10 ] ).normalize();\n\n\t},\n\n\traycast: function () {},\n\n\ttraverse: function ( callback ) {\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseVisible: function ( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseAncestors: function ( callback ) {\n\n\t\tvar parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t},\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t},\n\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\n\n\t\tvar parent = this.parent;\n\n\t\tif ( updateParents === true && parent !== null ) {\n\n\t\t\tparent.updateWorldMatrix( true, false );\n\n\t\t}\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.parent === null ) {\n\n\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t} else {\n\n\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t}\n\n\t\t// update children\n\n\t\tif ( updateChildren === true ) {\n\n\t\t\tvar children = this.children;\n\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tchildren[ i ].updateWorldMatrix( false, true );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\t// meta is a string when called from JSON.stringify\n\t\tvar isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tvar output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {},\n\t\t\t\tshapes: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tvar object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\n\n\t\tobject.layers = this.layers.mask;\n\t\tobject.matrix = this.matrix.toArray();\n\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\n\n\t\t// object specific properties\n\n\t\tif ( this.isMesh && this.drawMode !== TrianglesDrawMode ) object.drawMode = this.drawMode;\n\n\t\tif ( this.isInstancedMesh ) {\n\n\t\t\tobject.type = 'InstancedMesh';\n\t\t\tobject.count = this.count;\n\t\t\tobject.instanceMatrix = this.instanceMatrix.toJSON();\n\n\t\t}\n\n\t\t//\n\n\t\tfunction serialize( library, element ) {\n\n\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t}\n\n\t\t\treturn element.uuid;\n\n\t\t}\n\n\t\tif ( this.isMesh || this.isLine || this.isPoints ) {\n\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t\tvar parameters = this.geometry.parameters;\n\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\n\n\t\t\t\tvar shapes = parameters.shapes;\n\n\t\t\t\tif ( Array.isArray( shapes ) ) {\n\n\t\t\t\t\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tvar shape = shapes[ i ];\n\n\t\t\t\t\t\tserialize( meta.shapes, shape );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tserialize( meta.shapes, shapes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\tvar uuids = [];\n\n\t\t\t\tfor ( var i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tobject.material = uuids;\n\n\t\t\t} else {\n\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tvar geometries = extractFromCache( meta.geometries );\n\t\t\tvar materials = extractFromCache( meta.materials );\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\t\t\tvar shapes = extractFromCache( meta.shapes );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tvar values = [];\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\t\t\treturn values;\n\n\t\t}\n\n\t},\n\n\tclone: function ( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t},\n\n\tcopy: function ( source, recursive ) {\n\n\t\tif ( recursive === undefined ) recursive = true;\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( var i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tvar child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Object3D };\n","import { EventDispatcher } from './EventDispatcher.js';\nimport { Face3 } from './Face3.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { Sphere } from '../math/Sphere.js';\nimport { Box3 } from '../math/Box3.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\nimport { Object3D } from './Object3D.js';\nimport { _Math } from '../math/Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author bhouston / http://clara.io\n */\n\nvar _geometryId = 0; // Geometry uses even numbers as Id\nvar _m1 = new Matrix4();\nvar _obj = new Object3D();\nvar _offset = new Vector3();\n\nfunction Geometry() {\n\n\tObject.defineProperty( this, 'id', { value: _geometryId += 2 } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Geometry';\n\n\tthis.vertices = [];\n\tthis.colors = [];\n\tthis.faces = [];\n\tthis.faceVertexUvs = [[]];\n\n\tthis.morphTargets = [];\n\tthis.morphNormals = [];\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\tthis.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.elementsNeedUpdate = false;\n\tthis.verticesNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.lineDistancesNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Geometry,\n\n\tisGeometry: true,\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertex.applyMatrix4( matrix );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\tthis.verticesNeedUpdate = true;\n\t\tthis.normalsNeedUpdate = true;\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1.makeRotationX( angle );\n\n\t\tthis.applyMatrix( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1.makeRotationY( angle );\n\n\t\tthis.applyMatrix( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1.makeRotationZ( angle );\n\n\t\tthis.applyMatrix( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1.makeScale( x, y, z );\n\n\t\tthis.applyMatrix( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function ( vector ) {\n\n\t\t_obj.lookAt( vector );\n\n\t\t_obj.updateMatrix();\n\n\t\tthis.applyMatrix( _obj.matrix );\n\n\t\treturn this;\n\n\t},\n\n\tfromBufferGeometry: function ( geometry ) {\n\n\t\tvar scope = this;\n\n\t\tvar indices = geometry.index !== null ? geometry.index.array : undefined;\n\t\tvar attributes = geometry.attributes;\n\n\t\tif ( attributes.position === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar positions = attributes.position.array;\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\n\t\tvar uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\n\n\t\tif ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\n\n\t\tfor ( var i = 0; i < positions.length; i += 3 ) {\n\n\t\t\tscope.vertices.push( new Vector3().fromArray( positions, i ) );\n\n\t\t\tif ( colors !== undefined ) {\n\n\t\t\t\tscope.colors.push( new Color().fromArray( colors, i ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction addFace( a, b, c, materialIndex ) {\n\n\t\t\tvar vertexColors = ( colors === undefined ) ? [] : [\n\t\t\t\tscope.colors[ a ].clone(),\n\t\t\t\tscope.colors[ b ].clone(),\n\t\t\t\tscope.colors[ c ].clone() ];\n\n\t\t\tvar vertexNormals = ( normals === undefined ) ? [] : [\n\t\t\t\tnew Vector3().fromArray( normals, a * 3 ),\n\t\t\t\tnew Vector3().fromArray( normals, b * 3 ),\n\t\t\t\tnew Vector3().fromArray( normals, c * 3 )\n\t\t\t];\n\n\t\t\tvar face = new Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\n\n\t\t\tscope.faces.push( face );\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [\n\t\t\t\t\tnew Vector2().fromArray( uvs, a * 2 ),\n\t\t\t\t\tnew Vector2().fromArray( uvs, b * 2 ),\n\t\t\t\t\tnew Vector2().fromArray( uvs, c * 2 )\n\t\t\t\t] );\n\n\t\t\t}\n\n\t\t\tif ( uvs2 !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [\n\t\t\t\t\tnew Vector2().fromArray( uvs2, a * 2 ),\n\t\t\t\t\tnew Vector2().fromArray( uvs2, b * 2 ),\n\t\t\t\t\tnew Vector2().fromArray( uvs2, c * 2 )\n\t\t\t\t] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar groups = geometry.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tfor ( var i = 0; i < groups.length; i ++ ) {\n\n\t\t\t\tvar group = groups[ i ];\n\n\t\t\t\tvar start = group.start;\n\t\t\t\tvar count = group.count;\n\n\t\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\t\tif ( indices !== undefined ) {\n\n\t\t\t\t\t\taddFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ], group.materialIndex );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\taddFace( j, j + 1, j + 2, group.materialIndex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( indices !== undefined ) {\n\n\t\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( var i = 0; i < positions.length / 3; i += 3 ) {\n\n\t\t\t\t\taddFace( i, i + 1, i + 2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeFaceNormals();\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset ).negate();\n\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\tthis.computeBoundingSphere();\n\n\t\tvar center = this.boundingSphere.center;\n\t\tvar radius = this.boundingSphere.radius;\n\n\t\tvar s = radius === 0 ? 1 : 1.0 / radius;\n\n\t\tvar matrix = new Matrix4();\n\t\tmatrix.set(\n\t\t\ts, 0, 0, - s * center.x,\n\t\t\t0, s, 0, - s * center.y,\n\t\t\t0, 0, s, - s * center.z,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\tthis.applyMatrix( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tvar face = this.faces[ f ];\n\n\t\t\tvar vA = this.vertices[ face.a ];\n\t\t\tvar vB = this.vertices[ face.b ];\n\t\t\tvar vC = this.vertices[ face.c ];\n\n\t\t\tcb.subVectors( vC, vB );\n\t\t\tab.subVectors( vA, vB );\n\t\t\tcb.cross( ab );\n\n\t\t\tcb.normalize();\n\n\t\t\tface.normal.copy( cb );\n\n\t\t}\n\n\t},\n\n\tcomputeVertexNormals: function ( areaWeighted ) {\n\n\t\tif ( areaWeighted === undefined ) areaWeighted = true;\n\n\t\tvar v, vl, f, fl, face, vertices;\n\n\t\tvertices = new Array( this.vertices.length );\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ] = new Vector3();\n\n\t\t}\n\n\t\tif ( areaWeighted ) {\n\n\t\t\t// vertex normals weighted by triangle areas\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\n\n\t\t\tvar vA, vB, vC;\n\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvA = this.vertices[ face.a ];\n\t\t\t\tvB = this.vertices[ face.b ];\n\t\t\t\tvC = this.vertices[ face.c ];\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tvertices[ face.a ].add( cb );\n\t\t\t\tvertices[ face.b ].add( cb );\n\t\t\t\tvertices[ face.c ].add( cb );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.computeFaceNormals();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvertices[ face.a ].add( face.normal );\n\t\t\t\tvertices[ face.b ].add( face.normal );\n\t\t\t\tvertices[ face.c ].add( face.normal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ].normalize();\n\n\t\t}\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeFlatVertexNormals: function () {\n\n\t\tvar f, fl, face;\n\n\t\tthis.computeFaceNormals();\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 1 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 2 ].copy( face.normal );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 1 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 2 ] = face.normal.clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeMorphNormals: function () {\n\n\t\tvar i, il, f, fl, face;\n\n\t\t// save original normals\n\t\t// - create temp variables on first access\n\t\t//   otherwise just copy (for faster repeated calls)\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tif ( ! face.__originalFaceNormal ) {\n\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\n\n\t\t\t} else {\n\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\n\n\t\t\t}\n\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\n\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use temp geometry to compute face and vertex normals for each morph\n\n\t\tvar tmpGeo = new Geometry();\n\t\ttmpGeo.faces = this.faces;\n\n\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\n\n\t\t\t// create on first access\n\n\t\t\tif ( ! this.morphNormals[ i ] ) {\n\n\t\t\t\tthis.morphNormals[ i ] = {};\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\n\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\n\n\t\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tfaceNormal = new Vector3();\n\t\t\t\t\tvertexNormals = { a: new Vector3(), b: new Vector3(), c: new Vector3() };\n\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar morphNormals = this.morphNormals[ i ];\n\n\t\t\t// set vertices to morph target\n\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\n\n\t\t\t// compute morph normals\n\n\t\t\ttmpGeo.computeFaceNormals();\n\t\t\ttmpGeo.computeVertexNormals();\n\n\t\t\t// store morph normals\n\n\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\n\n\t\t\t\tfaceNormal.copy( face.normal );\n\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore original normals\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tface.normal = face.__originalFaceNormal;\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tthis.boundingBox.setFromPoints( this.vertices );\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\n\n\t},\n\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\n\n\t\tif ( ! ( geometry && geometry.isGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar normalMatrix,\n\t\t\tvertexOffset = this.vertices.length,\n\t\t\tvertices1 = this.vertices,\n\t\t\tvertices2 = geometry.vertices,\n\t\t\tfaces1 = this.faces,\n\t\t\tfaces2 = geometry.faces,\n\t\t\tcolors1 = this.colors,\n\t\t\tcolors2 = geometry.colors;\n\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\n\n\t\tif ( matrix !== undefined ) {\n\n\t\t\tnormalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t}\n\n\t\t// vertices\n\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = vertices2[ i ];\n\n\t\t\tvar vertexCopy = vertex.clone();\n\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\n\n\t\t\tvertices1.push( vertexCopy );\n\n\t\t}\n\n\t\t// colors\n\n\t\tfor ( var i = 0, il = colors2.length; i < il; i ++ ) {\n\n\t\t\tcolors1.push( colors2[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\n\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\n\t\t\t\tfaceVertexNormals = face.vertexNormals,\n\t\t\t\tfaceVertexColors = face.vertexColors;\n\n\t\t\tfaceCopy = new Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\n\t\t\tfaceCopy.normal.copy( face.normal );\n\n\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\n\n\t\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t}\n\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\n\n\t\t\t}\n\n\t\t\tfaceCopy.color.copy( face.color );\n\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\n\n\t\t\t\tcolor = faceVertexColors[ j ];\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\n\n\t\t\t}\n\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n\n\t\t\tfaces1.push( faceCopy );\n\n\t\t}\n\n\t\t// uvs\n\n\t\tfor ( var i = 0, il = geometry.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tvar faceVertexUvs2 = geometry.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) this.faceVertexUvs[ i ] = [];\n\n\t\t\tfor ( var j = 0, jl = faceVertexUvs2.length; j < jl; j ++ ) {\n\n\t\t\t\tvar uvs2 = faceVertexUvs2[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( var k = 0, kl = uvs2.length; k < kl; k ++ ) {\n\n\t\t\t\t\tuvsCopy.push( uvs2[ k ].clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tmergeMesh: function ( mesh ) {\n\n\t\tif ( ! ( mesh && mesh.isMesh ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( mesh.matrixAutoUpdate ) mesh.updateMatrix();\n\n\t\tthis.merge( mesh.geometry, mesh.matrix );\n\n\t},\n\n\t/*\n\t * Checks for duplicate vertices with hashmap.\n\t * Duplicated vertices are removed\n\t * and faces' vertices are updated.\n\t */\n\n\tmergeVertices: function () {\n\n\t\tvar verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n\t\tvar unique = [], changes = [];\n\n\t\tvar v, key;\n\t\tvar precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\n\t\tvar precision = Math.pow( 10, precisionPoints );\n\t\tvar i, il, face;\n\t\tvar indices, j, jl;\n\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tv = this.vertices[ i ];\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\n\n\t\t\tif ( verticesMap[ key ] === undefined ) {\n\n\t\t\t\tverticesMap[ key ] = i;\n\t\t\t\tunique.push( this.vertices[ i ] );\n\t\t\t\tchanges[ i ] = unique.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// if faces are completely degenerate after merging vertices, we\n\t\t// have to remove them from the geometry.\n\t\tvar faceIndicesToRemove = [];\n\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tface = this.faces[ i ];\n\n\t\t\tface.a = changes[ face.a ];\n\t\t\tface.b = changes[ face.b ];\n\t\t\tface.c = changes[ face.c ];\n\n\t\t\tindices = [ face.a, face.b, face.c ];\n\n\t\t\t// if any duplicate vertices are found in a Face3\n\t\t\t// we have to remove the face as nothing can be saved\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\n\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\n\n\t\t\t\t\tfaceIndicesToRemove.push( i );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\n\n\t\t\tvar idx = faceIndicesToRemove[ i ];\n\n\t\t\tthis.faces.splice( idx, 1 );\n\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Use unique set of vertices\n\n\t\tvar diff = this.vertices.length - unique.length;\n\t\tthis.vertices = unique;\n\t\treturn diff;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.vertices = [];\n\n\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tvar point = points[ i ];\n\t\t\tthis.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsortFacesByMaterialIndex: function () {\n\n\t\tvar faces = this.faces;\n\t\tvar length = faces.length;\n\n\t\t// tag faces\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tfaces[ i ]._id = i;\n\n\t\t}\n\n\t\t// sort faces\n\n\t\tfunction materialIndexSort( a, b ) {\n\n\t\t\treturn a.materialIndex - b.materialIndex;\n\n\t\t}\n\n\t\tfaces.sort( materialIndexSort );\n\n\t\t// sort uvs\n\n\t\tvar uvs1 = this.faceVertexUvs[ 0 ];\n\t\tvar uvs2 = this.faceVertexUvs[ 1 ];\n\n\t\tvar newUvs1, newUvs2;\n\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar id = faces[ i ]._id;\n\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\n\n\t\t}\n\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Geometry',\n\t\t\t\tgenerator: 'Geometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Geometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tvar vertices = [];\n\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tvar faces = [];\n\t\tvar normals = [];\n\t\tvar normalsHash = {};\n\t\tvar colors = [];\n\t\tvar colorsHash = {};\n\t\tvar uvs = [];\n\t\tvar uvsHash = {};\n\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\n\t\t\tvar hasMaterial = true;\n\t\t\tvar hasFaceUv = false; // deprecated\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\n\n\t\t\tvar faceType = 0;\n\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\n\n\t\t\tfaces.push( faceType );\n\t\t\tfaces.push( face.a, face.b, face.c );\n\t\t\tfaces.push( face.materialIndex );\n\n\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setBit( value, position, enabled ) {\n\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\n\n\t\t}\n\n\t\tfunction getNormalIndex( normal ) {\n\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\n\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn normalsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\treturn normalsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getColorIndex( color ) {\n\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\n\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn colorsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tcolorsHash[ hash ] = colors.length;\n\t\t\tcolors.push( color.getHex() );\n\n\t\t\treturn colorsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getUvIndex( uv ) {\n\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\n\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn uvsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\treturn uvsHash[ hash ];\n\n\t\t}\n\n\t\tdata.data = {};\n\n\t\tdata.data.vertices = vertices;\n\t\tdata.data.normals = normals;\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\n\t\tdata.data.faces = faces;\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t var parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t var values = [];\n\n\t\t for ( var key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t var geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new Geometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tvar i, il, j, jl, k, kl;\n\n\t\t// reset\n\n\t\tthis.vertices = [];\n\t\tthis.colors = [];\n\t\tthis.faces = [];\n\t\tthis.faceVertexUvs = [[]];\n\t\tthis.morphTargets = [];\n\t\tthis.morphNormals = [];\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\t\tthis.lineDistances = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// vertices\n\n\t\tvar vertices = source.vertices;\n\n\t\tfor ( i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\n\n\t\t}\n\n\t\t// colors\n\n\t\tvar colors = source.colors;\n\n\t\tfor ( i = 0, il = colors.length; i < il; i ++ ) {\n\n\t\t\tthis.colors.push( colors[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tvar faces = source.faces;\n\n\t\tfor ( i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\tthis.faces.push( faces[ i ].clone() );\n\n\t\t}\n\n\t\t// face vertex uvs\n\n\t\tfor ( i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tvar faceVertexUvs = source.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\n\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( k = 0, kl = uvs.length; k < kl; k ++ ) {\n\n\t\t\t\t\tvar uv = uvs[ k ];\n\n\t\t\t\t\tuvsCopy.push( uv.clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphTargets = source.morphTargets;\n\n\t\tfor ( i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tvar morphTarget = {};\n\t\t\tmorphTarget.name = morphTargets[ i ].name;\n\n\t\t\t// vertices\n\n\t\t\tif ( morphTargets[ i ].vertices !== undefined ) {\n\n\t\t\t\tmorphTarget.vertices = [];\n\n\t\t\t\tfor ( j = 0, jl = morphTargets[ i ].vertices.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.vertices.push( morphTargets[ i ].vertices[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normals\n\n\t\t\tif ( morphTargets[ i ].normals !== undefined ) {\n\n\t\t\t\tmorphTarget.normals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphTargets[ i ].normals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.normals.push( morphTargets[ i ].normals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.push( morphTarget );\n\n\t\t}\n\n\t\t// morph normals\n\n\t\tvar morphNormals = source.morphNormals;\n\n\t\tfor ( i = 0, il = morphNormals.length; i < il; i ++ ) {\n\n\t\t\tvar morphNormal = {};\n\n\t\t\t// vertex normals\n\n\t\t\tif ( morphNormals[ i ].vertexNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.vertexNormals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphNormals[ i ].vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar srcVertexNormal = morphNormals[ i ].vertexNormals[ j ];\n\t\t\t\t\tvar destVertexNormal = {};\n\n\t\t\t\t\tdestVertexNormal.a = srcVertexNormal.a.clone();\n\t\t\t\t\tdestVertexNormal.b = srcVertexNormal.b.clone();\n\t\t\t\t\tdestVertexNormal.c = srcVertexNormal.c.clone();\n\n\t\t\t\t\tmorphNormal.vertexNormals.push( destVertexNormal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// face normals\n\n\t\t\tif ( morphNormals[ i ].faceNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.faceNormals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphNormals[ i ].faceNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphNormal.faceNormals.push( morphNormals[ i ].faceNormals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphNormals.push( morphNormal );\n\n\t\t}\n\n\t\t// skin weights\n\n\t\tvar skinWeights = source.skinWeights;\n\n\t\tfor ( i = 0, il = skinWeights.length; i < il; i ++ ) {\n\n\t\t\tthis.skinWeights.push( skinWeights[ i ].clone() );\n\n\t\t}\n\n\t\t// skin indices\n\n\t\tvar skinIndices = source.skinIndices;\n\n\t\tfor ( i = 0, il = skinIndices.length; i < il; i ++ ) {\n\n\t\t\tthis.skinIndices.push( skinIndices[ i ].clone() );\n\n\t\t}\n\n\t\t// line distances\n\n\t\tvar lineDistances = source.lineDistances;\n\n\t\tfor ( i = 0, il = lineDistances.length; i < il; i ++ ) {\n\n\t\t\tthis.lineDistances.push( lineDistances[ i ] );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tvar boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tvar boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// update flags\n\n\t\tthis.elementsNeedUpdate = source.elementsNeedUpdate;\n\t\tthis.verticesNeedUpdate = source.verticesNeedUpdate;\n\t\tthis.uvsNeedUpdate = source.uvsNeedUpdate;\n\t\tthis.normalsNeedUpdate = source.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = source.colorsNeedUpdate;\n\t\tthis.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\n\t\tthis.groupsNeedUpdate = source.groupsNeedUpdate;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { Geometry };\n","/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Vector4( x, y, z, w ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\tthis.w = ( w !== undefined ) ? w : 1;\n\n}\n\nObject.defineProperties( Vector4.prototype, {\n\n\t\"width\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.z = value;\n\n\t\t}\n\n\t},\n\n\t\"height\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.w;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.w = value;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Vector4.prototype, {\n\n\tisVector4: true,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tsetAxisAngleFromQuaternion: function ( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar angle, x, y, z,\t\t// variables for result\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tvar xx = ( m11 + 1 ) / 2;\n\t\t\tvar yy = ( m22 + 1 ) / 2;\n\t\t\tvar zz = ( m33 + 1 ) / 2;\n\t\t\tvar xy = ( m12 + m21 ) / 4;\n\t\t\tvar xz = ( m13 + m31 ) / 4;\n\t\t\tvar yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t                   ( m13 - m31 ) * ( m13 - m31 ) +\n\t\t                   ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function ( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector4 };\n","import { Vector4 } from '../math/Vector4.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\nimport { StaticDrawUsage } from '../constants.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction BufferAttribute( array, itemSize, normalized ) {\n\n\tif ( Array.isArray( array ) ) {\n\n\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t}\n\n\tthis.name = '';\n\n\tthis.array = array;\n\tthis.itemSize = itemSize;\n\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\tthis.normalized = normalized === true;\n\n\tthis.usage = StaticDrawUsage;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( BufferAttribute.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( BufferAttribute.prototype, {\n\n\tisBufferAttribute: true,\n\n\tonUploadCallback: function () {},\n\n\tsetUsage: function ( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyArray: function ( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t},\n\n\tcopyColorsArray: function ( colors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = colors.length; i < l; i ++ ) {\n\n\t\t\tvar color = colors[ i ];\n\n\t\t\tif ( color === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\n\t\t\t\tcolor = new Color();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = color.r;\n\t\t\tarray[ offset ++ ] = color.g;\n\t\t\tarray[ offset ++ ] = color.b;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector2sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector2();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector3sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector3();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector4sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector4();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\t\t\tarray[ offset ++ ] = vector.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize ];\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 1 ];\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 2 ];\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 3 ];\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn {\n\t\t\titemSize: this.itemSize,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tarray: Array.prototype.slice.call( this.array ),\n\t\t\tnormalized: this.normalized\n\t\t};\n\n\t}\n\n} );\n\n//\n\nfunction Int8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int8Array( array ), itemSize, normalized );\n\n}\n\nInt8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt8BufferAttribute.prototype.constructor = Int8BufferAttribute;\n\n\nfunction Uint8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8Array( array ), itemSize, normalized );\n\n}\n\nUint8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\n\n\nfunction Uint8ClampedBufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8ClampedArray( array ), itemSize, normalized );\n\n}\n\nUint8ClampedBufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\n\n\nfunction Int16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int16Array( array ), itemSize, normalized );\n\n}\n\nInt16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt16BufferAttribute.prototype.constructor = Int16BufferAttribute;\n\n\nfunction Uint16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\n\n}\n\nUint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\n\n\nfunction Int32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int32Array( array ), itemSize, normalized );\n\n}\n\nInt32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt32BufferAttribute.prototype.constructor = Int32BufferAttribute;\n\n\nfunction Uint32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint32Array( array ), itemSize, normalized );\n\n}\n\nUint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\n\n\nfunction Float32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float32Array( array ), itemSize, normalized );\n\n}\n\nFloat32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat32BufferAttribute.prototype.constructor = Float32BufferAttribute;\n\n\nfunction Float64BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float64Array( array ), itemSize, normalized );\n\n}\n\nFloat64BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat64BufferAttribute.prototype.constructor = Float64BufferAttribute;\n\n//\n\nexport {\n\tFloat64BufferAttribute,\n\tFloat32BufferAttribute,\n\tUint32BufferAttribute,\n\tInt32BufferAttribute,\n\tUint16BufferAttribute,\n\tInt16BufferAttribute,\n\tUint8ClampedBufferAttribute,\n\tUint8BufferAttribute,\n\tInt8BufferAttribute,\n\tBufferAttribute\n};\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Vector2 } from '../math/Vector2.js';\n\nfunction DirectGeometry() {\n\n\tthis.vertices = [];\n\tthis.normals = [];\n\tthis.colors = [];\n\tthis.uvs = [];\n\tthis.uvs2 = [];\n\n\tthis.groups = [];\n\n\tthis.morphTargets = {};\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\t// this.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.verticesNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nObject.assign( DirectGeometry.prototype, {\n\n\tcomputeGroups: function ( geometry ) {\n\n\t\tvar group;\n\t\tvar groups = [];\n\t\tvar materialIndex = undefined;\n\n\t\tvar faces = geometry.faces;\n\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\t// materials\n\n\t\t\tif ( face.materialIndex !== materialIndex ) {\n\n\t\t\t\tmaterialIndex = face.materialIndex;\n\n\t\t\t\tif ( group !== undefined ) {\n\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\t\t\tgroups.push( group );\n\n\t\t\t\t}\n\n\t\t\t\tgroup = {\n\t\t\t\t\tstart: i * 3,\n\t\t\t\t\tmaterialIndex: materialIndex\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( group !== undefined ) {\n\n\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\tgroups.push( group );\n\n\t\t}\n\n\t\tthis.groups = groups;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tvar faces = geometry.faces;\n\t\tvar vertices = geometry.vertices;\n\t\tvar faceVertexUvs = geometry.faceVertexUvs;\n\n\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\n\t\tvar hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\n\n\t\t// morphs\n\n\t\tvar morphTargets = geometry.morphTargets;\n\t\tvar morphTargetsLength = morphTargets.length;\n\n\t\tvar morphTargetsPosition;\n\n\t\tif ( morphTargetsLength > 0 ) {\n\n\t\t\tmorphTargetsPosition = [];\n\n\t\t\tfor ( var i = 0; i < morphTargetsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsPosition[ i ] = {\n\t\t\t\t\tname: morphTargets[ i ].name,\n\t\t\t\t \tdata: []\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\n\n\t\t}\n\n\t\tvar morphNormals = geometry.morphNormals;\n\t\tvar morphNormalsLength = morphNormals.length;\n\n\t\tvar morphTargetsNormal;\n\n\t\tif ( morphNormalsLength > 0 ) {\n\n\t\t\tmorphTargetsNormal = [];\n\n\t\t\tfor ( var i = 0; i < morphNormalsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsNormal[ i ] = {\n\t\t\t\t\tname: morphNormals[ i ].name,\n\t\t\t\t \tdata: []\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\n\n\t\t}\n\n\t\t// skins\n\n\t\tvar skinIndices = geometry.skinIndices;\n\t\tvar skinWeights = geometry.skinWeights;\n\n\t\tvar hasSkinIndices = skinIndices.length === vertices.length;\n\t\tvar hasSkinWeights = skinWeights.length === vertices.length;\n\n\t\t//\n\n\t\tif ( vertices.length > 0 && faces.length === 0 ) {\n\n\t\t\tconsole.error( 'THREE.DirectGeometry: Faceless geometries are not supported.' );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tvar normal = face.normal;\n\n\t\t\t\tthis.normals.push( normal, normal, normal );\n\n\t\t\t}\n\n\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\tif ( vertexColors.length === 3 ) {\n\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tvar color = face.color;\n\n\t\t\t\tthis.colors.push( color, color, color );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\n\n\t\t\t\t\tthis.uvs.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv2 === true ) {\n\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 1 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\n\n\t\t\t\t\tthis.uvs2.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// morphs\n\n\t\t\tfor ( var j = 0; j < morphTargetsLength; j ++ ) {\n\n\t\t\t\tvar morphTarget = morphTargets[ j ].vertices;\n\n\t\t\t\tmorphTargetsPosition[ j ].data.push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0; j < morphNormalsLength; j ++ ) {\n\n\t\t\t\tvar morphNormal = morphNormals[ j ].vertexNormals[ i ];\n\n\t\t\t\tmorphTargetsNormal[ j ].data.push( morphNormal.a, morphNormal.b, morphNormal.c );\n\n\t\t\t}\n\n\t\t\t// skins\n\n\t\t\tif ( hasSkinIndices ) {\n\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\n\n\t\t\t}\n\n\t\t\tif ( hasSkinWeights ) {\n\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeGroups( geometry );\n\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { DirectGeometry };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction arrayMin( array ) {\n\n\tif ( array.length === 0 ) return Infinity;\n\n\tvar min = array[ 0 ];\n\n\tfor ( var i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] < min ) min = array[ i ];\n\n\t}\n\n\treturn min;\n\n}\n\nfunction arrayMax( array ) {\n\n\tif ( array.length === 0 ) return - Infinity;\n\n\tvar max = array[ 0 ];\n\n\tfor ( var i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] > max ) max = array[ i ];\n\n\t}\n\n\treturn max;\n\n}\n\nexport { arrayMin, arrayMax };\n","import { Vector3 } from '../math/Vector3.js';\nimport { Box3 } from '../math/Box3.js';\nimport { EventDispatcher } from './EventDispatcher.js';\nimport { BufferAttribute, Float32BufferAttribute, Uint16BufferAttribute, Uint32BufferAttribute } from './BufferAttribute.js';\nimport { Sphere } from '../math/Sphere.js';\nimport { DirectGeometry } from './DirectGeometry.js';\nimport { Object3D } from './Object3D.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { _Math } from '../math/Math.js';\nimport { arrayMax } from '../utils.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _bufferGeometryId = 1; // BufferGeometry uses odd numbers as Id\n\nvar _m1 = new Matrix4();\nvar _obj = new Object3D();\nvar _offset = new Vector3();\nvar _box = new Box3();\nvar _boxMorphTargets = new Box3();\nvar _vector = new Vector3();\n\nfunction BufferGeometry() {\n\n\tObject.defineProperty( this, 'id', { value: _bufferGeometryId += 2 } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'BufferGeometry';\n\n\tthis.index = null;\n\tthis.attributes = {};\n\n\tthis.morphAttributes = {};\n\tthis.morphTargetsRelative = false;\n\n\tthis.groups = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\tthis.drawRange = { start: 0, count: Infinity };\n\n\tthis.userData = {};\n\n}\n\nBufferGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: BufferGeometry,\n\n\tisBufferGeometry: true,\n\n\tgetIndex: function () {\n\n\t\treturn this.index;\n\n\t},\n\n\tsetIndex: function ( index ) {\n\n\t\tif ( Array.isArray( index ) ) {\n\n\t\t\tthis.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t} else {\n\n\t\t\tthis.index = index;\n\n\t\t}\n\n\t},\n\n\tgetAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t},\n\n\tsetAttribute: function ( name, attribute ) {\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t},\n\n\tdeleteAttribute: function ( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t},\n\n\taddGroup: function ( start, count, materialIndex ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\n\n\t\t} );\n\n\t},\n\n\tclearGroups: function () {\n\n\t\tthis.groups = [];\n\n\t},\n\n\tsetDrawRange: function ( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t},\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tmatrix.applyToBufferAttribute( position );\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tvar normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormalMatrix.applyToBufferAttribute( normal );\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tvar tangent = this.attributes.tangent;\n\n\t\tif ( tangent !== undefined ) {\n\n\t\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\t// Tangent is vec4, but the '.w' component is a sign value (+1/-1).\n\t\t\tnormalMatrix.applyToBufferAttribute( tangent );\n\t\t\ttangent.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1.makeRotationX( angle );\n\n\t\tthis.applyMatrix( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1.makeRotationY( angle );\n\n\t\tthis.applyMatrix( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1.makeRotationZ( angle );\n\n\t\tthis.applyMatrix( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1.makeScale( x, y, z );\n\n\t\tthis.applyMatrix( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function ( vector ) {\n\n\t\t_obj.lookAt( vector );\n\n\t\t_obj.updateMatrix();\n\n\t\tthis.applyMatrix( _obj.matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset ).negate();\n\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromObject: function ( object ) {\n\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( object.isPoints || object.isLine ) {\n\n\t\t\tvar positions = new Float32BufferAttribute( geometry.vertices.length * 3, 3 );\n\t\t\tvar colors = new Float32BufferAttribute( geometry.colors.length * 3, 3 );\n\n\t\t\tthis.setAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\n\t\t\tthis.setAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\n\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\n\n\t\t\t\tvar lineDistances = new Float32BufferAttribute( geometry.lineDistances.length, 1 );\n\n\t\t\t\tthis.setAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t\t}\n\n\t\t} else if ( object.isMesh ) {\n\n\t\t\tif ( geometry && geometry.isGeometry ) {\n\n\t\t\t\tthis.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tvar position = [];\n\n\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tvar point = points[ i ];\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\n\n\t\t}\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\n\n\t\treturn this;\n\n\t},\n\n\tupdateFromObject: function ( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tvar direct = geometry.__directGeometry;\n\n\t\t\tif ( geometry.elementsNeedUpdate === true ) {\n\n\t\t\t\tdirect = undefined;\n\t\t\t\tgeometry.elementsNeedUpdate = false;\n\n\t\t\t}\n\n\t\t\tif ( direct === undefined ) {\n\n\t\t\t\treturn this.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.normalsNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\t\t\tgeometry.uvsNeedUpdate = false;\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t\tgeometry = direct;\n\n\t\t}\n\n\t\tvar attribute;\n\n\t\tif ( geometry.verticesNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.position;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.normalsNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.normal;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.normalsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.colorsNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.color;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.colorsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.uvsNeedUpdate ) {\n\n\t\t\tattribute = this.attributes.uv;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.uvsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\n\n\t\t\tattribute = this.attributes.lineDistance;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.groupsNeedUpdate ) {\n\n\t\t\tgeometry.computeGroups( object.geometry );\n\t\t\tthis.groups = geometry.groups;\n\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tgeometry.__directGeometry = new DirectGeometry().fromGeometry( geometry );\n\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\n\n\t},\n\n\tfromDirectGeometry: function ( geometry ) {\n\n\t\tvar positions = new Float32Array( geometry.vertices.length * 3 );\n\t\tthis.setAttribute( 'position', new BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\n\n\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\tvar normals = new Float32Array( geometry.normals.length * 3 );\n\t\t\tthis.setAttribute( 'normal', new BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\n\n\t\t}\n\n\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\tvar colors = new Float32Array( geometry.colors.length * 3 );\n\t\t\tthis.setAttribute( 'color', new BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs.length > 0 ) {\n\n\t\t\tvar uvs = new Float32Array( geometry.uvs.length * 2 );\n\t\t\tthis.setAttribute( 'uv', new BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs2.length > 0 ) {\n\n\t\t\tvar uvs2 = new Float32Array( geometry.uvs2.length * 2 );\n\t\t\tthis.setAttribute( 'uv2', new BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\n\n\t\t}\n\n\t\t// groups\n\n\t\tthis.groups = geometry.groups;\n\n\t\t// morphs\n\n\t\tfor ( var name in geometry.morphTargets ) {\n\n\t\t\tvar array = [];\n\t\t\tvar morphTargets = geometry.morphTargets[ name ];\n\n\t\t\tfor ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\tvar morphTarget = morphTargets[ i ];\n\n\t\t\t\tvar attribute = new Float32BufferAttribute( morphTarget.data.length * 3, 3 );\n\t\t\t\tattribute.name = morphTarget.name;\n\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget.data ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\t// skinning\n\n\t\tif ( geometry.skinIndices.length > 0 ) {\n\n\t\t\tvar skinIndices = new Float32BufferAttribute( geometry.skinIndices.length * 4, 4 );\n\t\t\tthis.setAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\n\n\t\t}\n\n\t\tif ( geometry.skinWeights.length > 0 ) {\n\n\t\t\tvar skinWeights = new Float32BufferAttribute( geometry.skinWeights.length * 4, 4 );\n\t\t\tthis.setAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tvar position = this.attributes.position;\n\t\tvar morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( var i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_box.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector.addVectors( this.boundingBox.min, _box.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector );\n\n\t\t\t\t\t\t_vector.addVectors( this.boundingBox.max, _box.max );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tvar position = this.attributes.position;\n\t\tvar morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position ) {\n\n\t\t\t// first, find the center of the bounding sphere\n\n\t\t\tvar center = this.boundingSphere.center;\n\n\t\t\t_box.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( var i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_boxMorphTargets.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector.addVectors( _box.min, _boxMorphTargets.min );\n\t\t\t\t\t\t_box.expandByPoint( _vector );\n\n\t\t\t\t\t\t_vector.addVectors( _box.max, _boxMorphTargets.max );\n\t\t\t\t\t\t_box.expandByPoint( _vector );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_box.expandByPoint( _boxMorphTargets.min );\n\t\t\t\t\t\t_box.expandByPoint( _boxMorphTargets.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_box.getCenter( center );\n\n\t\t\t// second, try to find a boundingSphere with a radius smaller than the\n\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\tvar maxRadiusSq = 0;\n\n\t\t\tfor ( var i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t_vector.fromBufferAttribute( position, i );\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector ) );\n\n\t\t\t}\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( var i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\tvar morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t\t\t\tfor ( var j = 0, jl = morphAttribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t_vector.fromBufferAttribute( morphAttribute, j );\n\n\t\t\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t\t\t_offset.fromBufferAttribute( position, j );\n\t\t\t\t\t\t\t_vector.add( _offset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\t// backwards compatibility\n\n\t},\n\n\tcomputeVertexNormals: function () {\n\n\t\tvar index = this.index;\n\t\tvar attributes = this.attributes;\n\n\t\tif ( attributes.position ) {\n\n\t\t\tvar positions = attributes.position.array;\n\n\t\t\tif ( attributes.normal === undefined ) {\n\n\t\t\t\tthis.setAttribute( 'normal', new BufferAttribute( new Float32Array( positions.length ), 3 ) );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tvar array = attributes.normal.array;\n\n\t\t\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t\t\tarray[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar normals = attributes.normal.array;\n\n\t\t\tvar vA, vB, vC;\n\t\t\tvar pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tvar indices = index.array;\n\n\t\t\t\tfor ( var i = 0, il = index.count; i < il; i += 3 ) {\n\n\t\t\t\t\tvA = indices[ i + 0 ] * 3;\n\t\t\t\t\tvB = indices[ i + 1 ] * 3;\n\t\t\t\t\tvC = indices[ i + 2 ] * 3;\n\n\t\t\t\t\tpA.fromArray( positions, vA );\n\t\t\t\t\tpB.fromArray( positions, vB );\n\t\t\t\t\tpC.fromArray( positions, vC );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormals[ vA ] += cb.x;\n\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\n\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\n\n\t\t\t\t\tnormals[ vB ] += cb.x;\n\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\n\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\n\n\t\t\t\t\tnormals[ vC ] += cb.x;\n\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\n\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\n\n\t\t\t\t\tpA.fromArray( positions, i );\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormals[ i ] = cb.x;\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tattributes.normal.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tmerge: function ( geometry, offset ) {\n\n\t\tif ( ! ( geometry && geometry.isBufferGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( offset === undefined ) {\n\n\t\t\toffset = 0;\n\n\t\t\tconsole.warn(\n\t\t\t\t'THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. '\n\t\t\t\t+ 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.'\n\t\t\t);\n\n\t\t}\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\n\n\t\t\tvar attribute1 = attributes[ key ];\n\t\t\tvar attributeArray1 = attribute1.array;\n\n\t\t\tvar attribute2 = geometry.attributes[ key ];\n\t\t\tvar attributeArray2 = attribute2.array;\n\n\t\t\tvar attributeOffset = attribute2.itemSize * offset;\n\t\t\tvar length = Math.min( attributeArray2.length, attributeArray1.length - attributeOffset );\n\n\t\t\tfor ( var i = 0, j = attributeOffset; i < length; i ++, j ++ ) {\n\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tnormalizeNormals: function () {\n\n\t\tvar normals = this.attributes.normal;\n\n\t\tfor ( var i = 0, il = normals.count; i < il; i ++ ) {\n\n\t\t\t_vector.x = normals.getX( i );\n\t\t\t_vector.y = normals.getY( i );\n\t\t\t_vector.z = normals.getZ( i );\n\n\t\t\t_vector.normalize();\n\n\t\t\tnormals.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t},\n\n\ttoNonIndexed: function () {\n\n\t\tfunction convertBufferAttribute( attribute, indices ) {\n\n\t\t\tvar array = attribute.array;\n\t\t\tvar itemSize = attribute.itemSize;\n\n\t\t\tvar array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tvar index = 0, index2 = 0;\n\n\t\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\tfor ( var j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( array2, itemSize );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar geometry2 = new BufferGeometry();\n\n\t\tvar indices = this.index.array;\n\t\tvar attributes = this.attributes;\n\n\t\t// attributes\n\n\t\tfor ( var name in attributes ) {\n\n\t\t\tvar attribute = attributes[ name ];\n\n\t\t\tvar newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\tgeometry2.setAttribute( name, newAttribute );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tvar morphAttributes = this.morphAttributes;\n\n\t\tfor ( name in morphAttributes ) {\n\n\t\t\tvar morphArray = [];\n\t\t\tvar morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( var i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tvar attribute = morphAttribute[ i ];\n\n\t\t\t\tvar newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\t\tmorphArray.push( newAttribute );\n\n\t\t\t}\n\n\t\t\tgeometry2.morphAttributes[ name ] = morphArray;\n\n\t\t}\n\n\t\tgeometry2.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tvar groups = this.groups;\n\n\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tvar group = groups[ i ];\n\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tdata.data = { attributes: {} };\n\n\t\tvar index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: Array.prototype.slice.call( index.array )\n\t\t\t};\n\n\t\t}\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tvar attribute = attributes[ key ];\n\n\t\t\tvar attributeData = attribute.toJSON();\n\n\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\n\n\t\t\tdata.data.attributes[ key ] = attributeData;\n\n\t\t}\n\n\t\tvar morphAttributes = {};\n\t\tvar hasMorphAttributes = false;\n\n\t\tfor ( var key in this.morphAttributes ) {\n\n\t\t\tvar attributeArray = this.morphAttributes[ key ];\n\n\t\t\tvar array = [];\n\n\t\t\tfor ( var i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\tvar attribute = attributeArray[ i ];\n\n\t\t\t\tvar attributeData = attribute.toJSON();\n\n\t\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\n\n\t\t\t\tarray.push( attributeData );\n\n\t\t\t}\n\n\t\t\tif ( array.length > 0 ) {\n\n\t\t\t\tmorphAttributes[ key ] = array;\n\n\t\t\t\thasMorphAttributes = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hasMorphAttributes ) {\n\n\t\t\tdata.data.morphAttributes = morphAttributes;\n\t\t\tdata.data.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t}\n\n\t\tvar groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tvar boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t var parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t var values = [];\n\n\t\t for ( var key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t var geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new BufferGeometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tvar name, i, l;\n\n\t\t// reset\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\t\tthis.morphAttributes = {};\n\t\tthis.groups = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// index\n\n\t\tvar index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone() );\n\n\t\t}\n\n\t\t// attributes\n\n\t\tvar attributes = source.attributes;\n\n\t\tfor ( name in attributes ) {\n\n\t\t\tvar attribute = attributes[ name ];\n\t\t\tthis.setAttribute( name, attribute.clone() );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tvar morphAttributes = source.morphAttributes;\n\n\t\tfor ( name in morphAttributes ) {\n\n\t\t\tvar array = [];\n\t\t\tvar morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\tarray.push( morphAttribute[ i ].clone() );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\tthis.morphTargetsRelative = source.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tvar groups = source.groups;\n\n\t\tfor ( i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tvar group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tvar boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tvar boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// draw range\n\n\t\tthis.drawRange.start = source.drawRange.start;\n\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\t// user data\n\n\t\tthis.userData = source.userData;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { BufferGeometry };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n// BoxGeometry\n\nclass BoxGeometry extends Geometry {\n\n\tconstructor( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tthis.fromBufferGeometry( new BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n// BoxBufferGeometry\n\nclass BoxBufferGeometry extends BufferGeometry {\n\n\tconstructor( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tvar scope = this;\n\n\t\twidth = width || 1;\n\t\theight = height || 1;\n\t\tdepth = depth || 1;\n\n\t\t// segments\n\n\t\twidthSegments = Math.floor( widthSegments ) || 1;\n\t\theightSegments = Math.floor( heightSegments ) || 1;\n\t\tdepthSegments = Math.floor( depthSegments ) || 1;\n\n\t\t// buffers\n\n\t\tvar indices = [];\n\t\tvar vertices = [];\n\t\tvar normals = [];\n\t\tvar uvs = [];\n\n\t\t// helper variables\n\n\t\tvar numberOfVertices = 0;\n\t\tvar groupStart = 0;\n\n\t\t// build each side of the box geometry\n\n\t\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\n\t\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\n\t\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\n\t\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\n\t\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\n\t\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\t\tvar segmentWidth = width / gridX;\n\t\t\tvar segmentHeight = height / gridY;\n\n\t\t\tvar widthHalf = width / 2;\n\t\t\tvar heightHalf = height / 2;\n\t\t\tvar depthHalf = depth / 2;\n\n\t\t\tvar gridX1 = gridX + 1;\n\t\t\tvar gridY1 = gridY + 1;\n\n\t\t\tvar vertexCounter = 0;\n\t\t\tvar groupCount = 0;\n\n\t\t\tvar ix, iy;\n\n\t\t\tvar vector = new Vector3();\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\t\tvar y = iy * segmentHeight - heightHalf;\n\n\t\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\t\tvar x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = 0;\n\t\t\t\t\tvector[ v ] = 0;\n\t\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// uvs\n\n\t\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t\t// counters\n\n\t\t\t\t\tvertexCounter += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// indices\n\n\t\t\t// 1. you need three indices to draw a single face\n\t\t\t// 2. a single segment consists of two faces\n\t\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\t\tvar a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\t\tvar b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\t\tvar c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\t\tvar d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// increase counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t\t// update total number of vertices\n\n\t\t\tnumberOfVertices += vertexCounter;\n\n\t\t}\n\n\t}\n\n}\n\nexport { BoxGeometry, BoxBufferGeometry };\n","import { Object3D } from '../core/Object3D.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Light( color, intensity ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Light';\n\n\tthis.color = new Color( color );\n\tthis.intensity = intensity !== undefined ? intensity : 1;\n\n\tthis.receiveShadow = undefined;\n\n}\n\nLight.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Light,\n\n\tisLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.intensity = source.intensity;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.color = this.color.getHex();\n\t\tdata.object.intensity = this.intensity;\n\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\n\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\n\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { Light };\n","import { Matrix3 } from './Matrix3.js';\nimport { Vector3 } from './Vector3.js';\n\n/**\n * @author bhouston / http://clara.io\n */\n\nvar _vector1 = new Vector3();\nvar _vector2 = new Vector3();\nvar _normalMatrix = new Matrix3();\n\nfunction Plane( normal, constant ) {\n\n\t// normal is assumed to be normalized\n\n\tthis.normal = ( normal !== undefined ) ? normal : new Vector3( 1, 0, 0 );\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\n\n}\n\nObject.assign( Plane.prototype, {\n\n\tisPlane: true,\n\n\tset: function ( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponents: function ( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCoplanarPoints: function ( a, b, c ) {\n\n\t\tvar normal = _vector1.subVectors( c, b ).cross( _vector2.subVectors( a, b ) ).normalize();\n\n\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t},\n\n\tdistanceToSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t},\n\n\tprojectPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .projectPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\n\n\t},\n\n\tintersectLine: function ( line, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .intersectLine() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tvar direction = line.delta( _vector1 );\n\n\t\tvar denominator = this.normal.dot( direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\treturn target.copy( line.start );\n\n\t\t\t}\n\n\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\treturn target.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t},\n\n\tintersectsLine: function ( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tvar startSign = this.distanceToPoint( line.start );\n\t\tvar endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t},\n\n\tcoplanarPoint: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .coplanarPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t},\n\n\tapplyMatrix4: function ( matrix, optionalNormalMatrix ) {\n\n\t\tvar normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix( matrix );\n\n\t\tvar referencePoint = this.coplanarPoint( _vector1 ).applyMatrix4( matrix );\n\n\t\tvar normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.constant -= offset.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n} );\n\n\nexport { Plane };\n","import { Vector3 } from './Vector3.js';\nimport { Sphere } from './Sphere.js';\nimport { Plane } from './Plane.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / http://clara.io\n */\n\nvar _sphere = new Sphere();\nvar _vector = new Vector3();\n\nfunction Frustum( p0, p1, p2, p3, p4, p5 ) {\n\n\tthis.planes = [\n\n\t\t( p0 !== undefined ) ? p0 : new Plane(),\n\t\t( p1 !== undefined ) ? p1 : new Plane(),\n\t\t( p2 !== undefined ) ? p2 : new Plane(),\n\t\t( p3 !== undefined ) ? p3 : new Plane(),\n\t\t( p4 !== undefined ) ? p4 : new Plane(),\n\t\t( p5 !== undefined ) ? p5 : new Plane()\n\n\t];\n\n}\n\nObject.assign( Frustum.prototype, {\n\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tvar planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( frustum ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix: function ( m ) {\n\n\t\tvar planes = this.planes;\n\t\tvar me = m.elements;\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\tintersectsObject: function ( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere ).applyMatrix4( object.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere );\n\n\t},\n\n\tintersectsSprite: function ( sprite ) {\n\n\t\t_sphere.center.set( 0, 0, 0 );\n\t\t_sphere.radius = 0.7071067811865476;\n\t\t_sphere.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar planes = this.planes;\n\t\tvar center = sphere.center;\n\t\tvar negRadius = - sphere.radius;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tvar plane = planes[ i ];\n\n\t\t\t// corner at max distance\n\n\t\t\t_vector.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t_vector.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t_vector.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\tif ( plane.distanceToPoint( _vector ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n} );\n\n\nexport { Frustum };\n","import { Matrix4 } from '../math/Matrix4.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector4 } from '../math/Vector4.js';\nimport { Frustum } from '../math/Frustum.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LightShadow( camera ) {\n\n\tthis.camera = camera;\n\n\tthis.bias = 0;\n\tthis.radius = 1;\n\n\tthis.mapSize = new Vector2( 512, 512 );\n\n\tthis.map = null;\n\tthis.mapPass = null;\n\tthis.matrix = new Matrix4();\n\n\tthis._frustum = new Frustum();\n\tthis._frameExtents = new Vector2( 1, 1 );\n\n\tthis._viewportCount = 1;\n\n\tthis._viewports = [\n\n\t\tnew Vector4( 0, 0, 1, 1 )\n\n\t];\n\n}\n\nObject.assign( LightShadow.prototype, {\n\n\t_projScreenMatrix: new Matrix4(),\n\n\t_lightPositionWorld: new Vector3(),\n\n\t_lookTarget: new Vector3(),\n\n\tgetViewportCount: function () {\n\n\t\treturn this._viewportCount;\n\n\t},\n\n\tgetFrustum: function () {\n\n\t\treturn this._frustum;\n\n\t},\n\n\tupdateMatrices: function ( light ) {\n\n\t\tvar shadowCamera = this.camera,\n\t\t\tshadowMatrix = this.matrix,\n\t\t\tprojScreenMatrix = this._projScreenMatrix,\n\t\t\tlookTarget = this._lookTarget,\n\t\t\tlightPositionWorld = this._lightPositionWorld;\n\n\t\tlightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tshadowCamera.position.copy( lightPositionWorld );\n\n\t\tlookTarget.setFromMatrixPosition( light.target.matrixWorld );\n\t\tshadowCamera.lookAt( lookTarget );\n\t\tshadowCamera.updateMatrixWorld();\n\n\t\tprojScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\tthis._frustum.setFromMatrix( projScreenMatrix );\n\n\t\tshadowMatrix.set(\n\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t);\n\n\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\n\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\n\n\t},\n\n\tgetViewport: function ( viewportIndex ) {\n\n\t\treturn this._viewports[ viewportIndex ];\n\n\t},\n\n\tgetFrameExtents: function () {\n\n\t\treturn this._frameExtents;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.camera = source.camera.clone();\n\n\t\tthis.bias = source.bias;\n\t\tthis.radius = source.radius;\n\n\t\tthis.mapSize.copy( source.mapSize );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar object = {};\n\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\n\n\t\tobject.camera = this.camera.toJSON( false ).object;\n\t\tdelete object.camera.matrix;\n\n\t\treturn object;\n\n\t}\n\n} );\n\n\nexport { LightShadow };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Vector3 } from '../math/Vector3.js';\n\nfunction Camera() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Camera';\n\n\tthis.matrixWorldInverse = new Matrix4();\n\n\tthis.projectionMatrix = new Matrix4();\n\tthis.projectionMatrixInverse = new Matrix4();\n\n}\n\nCamera.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Camera,\n\n\tisCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\n\t\tthis.projectionMatrixInverse.copy( source.projectionMatrixInverse );\n\n\t\treturn this;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Camera: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tvar e = this.matrixWorld.elements;\n\n\t\treturn target.set( - e[ 8 ], - e[ 9 ], - e[ 10 ] ).normalize();\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n} );\n\nexport { Camera };\n","import { Camera } from './Camera.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author arose / http://github.com/arose\n */\n\nfunction OrthographicCamera( left, right, top, bottom, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'OrthographicCamera';\n\n\tthis.zoom = 1;\n\tthis.view = null;\n\n\tthis.left = ( left !== undefined ) ? left : - 1;\n\tthis.right = ( right !== undefined ) ? right : 1;\n\tthis.top = ( top !== undefined ) ? top : 1;\n\tthis.bottom = ( bottom !== undefined ) ? bottom : - 1;\n\n\tthis.near = ( near !== undefined ) ? near : 0.1;\n\tthis.far = ( far !== undefined ) ? far : 2000;\n\n\tthis.updateProjectionMatrix();\n\n}\n\nOrthographicCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: OrthographicCamera,\n\n\tisOrthographicCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t},\n\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tvar cx = ( this.right + this.left ) / 2;\n\t\tvar cy = ( this.top + this.bottom ) / 2;\n\n\t\tvar left = cx - dx;\n\t\tvar right = cx + dx;\n\t\tvar top = cy + dy;\n\t\tvar bottom = cy - dy;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tvar zoomW = this.zoom / ( this.view.width / this.view.fullWidth );\n\t\t\tvar zoomH = this.zoom / ( this.view.height / this.view.fullHeight );\n\t\t\tvar scaleW = ( this.right - this.left ) / this.view.width;\n\t\t\tvar scaleH = ( this.top - this.bottom ) / this.view.height;\n\n\t\t\tleft += scaleW * ( this.view.offsetX / zoomW );\n\t\t\tright = left + scaleW * ( this.view.width / zoomW );\n\t\t\ttop -= scaleH * ( this.view.offsetY / zoomH );\n\t\t\tbottom = top - scaleH * ( this.view.height / zoomH );\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\n\n\t\tthis.projectionMatrixInverse.getInverse( this.projectionMatrix );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { OrthographicCamera };\n","import { LightShadow } from './LightShadow.js';\nimport { OrthographicCamera } from '../cameras/OrthographicCamera.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction DirectionalLightShadow() {\n\n\tLightShadow.call( this, new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\n\n}\n\nDirectionalLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: DirectionalLightShadow,\n\n\tisDirectionalLightShadow: true,\n\n\tupdateMatrices: function ( light ) {\n\n\t\tLightShadow.prototype.updateMatrices.call( this, light );\n\n\t}\n\n} );\n\n\nexport { DirectionalLightShadow };\n","import { Light } from './Light.js';\nimport { DirectionalLightShadow } from './DirectionalLightShadow.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction DirectionalLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'DirectionalLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tthis.shadow = new DirectionalLightShadow();\n\n}\n\nDirectionalLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: DirectionalLight,\n\n\tisDirectionalLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { DirectionalLight };\n","import { Vector3 } from './Vector3.js';\n\nvar _vector = new Vector3();\nvar _segCenter = new Vector3();\nvar _segDir = new Vector3();\nvar _diff = new Vector3();\n\nvar _edge1 = new Vector3();\nvar _edge2 = new Vector3();\nvar _normal = new Vector3();\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Ray( origin, direction ) {\n\n\tthis.origin = ( origin !== undefined ) ? origin : new Vector3();\n\tthis.direction = ( direction !== undefined ) ? direction : new Vector3( 0, 0, - 1 );\n\n}\n\nObject.assign( Ray.prototype, {\n\n\tset: function ( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t},\n\n\tat: function ( t, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .at() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t},\n\n\tlookAt: function ( v ) {\n\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\trecast: function ( t ) {\n\n\t\tthis.origin.copy( this.at( t, _vector ) );\n\n\t\treturn this;\n\n\t},\n\n\tclosestPointToPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( point, this.origin );\n\n\t\tvar directionDistance = target.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn target.copy( this.origin );\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t},\n\n\tdistanceSqToPoint: function ( point ) {\n\n\t\tvar directionDistance = _vector.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t// point behind the ray\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t}\n\n\t\t_vector.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\treturn _vector.distanceToSquared( point );\n\n\t},\n\n\tdistanceSqToSegment: function ( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t// It returns the min distance between the ray and the segment\n\t\t// defined by v0 and v1\n\t\t// It can also set two optional targets :\n\t\t// - The closest point on the ray\n\t\t// - The closest point on the segment\n\n\t\t_segCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t_segDir.copy( v1 ).sub( v0 ).normalize();\n\t\t_diff.copy( this.origin ).sub( _segCenter );\n\n\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\tvar a01 = - this.direction.dot( _segDir );\n\t\tvar b0 = _diff.dot( this.direction );\n\t\tvar b1 = - _diff.dot( _segDir );\n\t\tvar c = _diff.lengthSq();\n\t\tvar det = Math.abs( 1 - a01 * a01 );\n\t\tvar s0, s1, sqrDist, extDet;\n\n\t\tif ( det > 0 ) {\n\n\t\t\t// The ray and segment are not parallel.\n\n\t\t\ts0 = a01 * b1 - b0;\n\t\t\ts1 = a01 * b0 - b1;\n\t\t\textDet = segExtent * det;\n\n\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\tvar invDet = 1 / det;\n\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 5\n\n\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t// region 4\n\n\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t// region 3\n\n\t\t\t\t\ts0 = 0;\n\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 2\n\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Ray and segment are parallel.\n\n\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t}\n\n\t\tif ( optionalPointOnRay ) {\n\n\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t}\n\n\t\tif ( optionalPointOnSegment ) {\n\n\t\t\toptionalPointOnSegment.copy( _segDir ).multiplyScalar( s1 ).add( _segCenter );\n\n\t\t}\n\n\t\treturn sqrDist;\n\n\t},\n\n\tintersectSphere: function ( sphere, target ) {\n\n\t\t_vector.subVectors( sphere.center, this.origin );\n\t\tvar tca = _vector.dot( this.direction );\n\t\tvar d2 = _vector.dot( _vector ) - tca * tca;\n\t\tvar radius2 = sphere.radius * sphere.radius;\n\n\t\tif ( d2 > radius2 ) return null;\n\n\t\tvar thc = Math.sqrt( radius2 - d2 );\n\n\t\t// t0 = first intersect point - entrance on front of sphere\n\t\tvar t0 = tca - thc;\n\n\t\t// t1 = second intersect point - exit point on back of sphere\n\t\tvar t1 = tca + thc;\n\n\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t// test to see if t0 is behind the ray:\n\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t// in order to always return an intersect point that is in front of the ray.\n\t\tif ( t0 < 0 ) return this.at( t1, target );\n\n\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\treturn this.at( t0, target );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn this.distanceSqToPoint( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t},\n\n\tdistanceToPlane: function ( plane ) {\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t : null;\n\n\t},\n\n\tintersectPlane: function ( plane, target ) {\n\n\t\tvar t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn this.at( t, target );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tvar distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t},\n\n\tintersectBox: function ( box, target ) {\n\n\t\tvar tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\tvar invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tvar origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, target );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn this.intersectBox( box, _vector ) !== null;\n\n\t},\n\n\tintersectTriangle: function ( a, b, c, backfaceCulling, target ) {\n\n\t\t// Compute the offset origin, edges, and normal.\n\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t_edge1.subVectors( b, a );\n\t\t_edge2.subVectors( c, a );\n\t\t_normal.crossVectors( _edge1, _edge2 );\n\n\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\tvar DdN = this.direction.dot( _normal );\n\t\tvar sign;\n\n\t\tif ( DdN > 0 ) {\n\n\t\t\tif ( backfaceCulling ) return null;\n\t\t\tsign = 1;\n\n\t\t} else if ( DdN < 0 ) {\n\n\t\t\tsign = - 1;\n\t\t\tDdN = - DdN;\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t_diff.subVectors( this.origin, a );\n\t\tvar DdQxE2 = sign * this.direction.dot( _edge2.crossVectors( _diff, _edge2 ) );\n\n\t\t// b1 < 0, no intersection\n\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar DdE1xQ = sign * this.direction.dot( _edge1.cross( _diff ) );\n\n\t\t// b2 < 0, no intersection\n\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// b1+b2 > 1, no intersection\n\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Line intersects triangle, check if ray does.\n\t\tvar QdN = - sign * _diff.dot( _normal );\n\n\t\t// t < 0, no intersection\n\t\tif ( QdN < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Ray intersects triangle.\n\t\treturn this.at( QdN / DdN, target );\n\n\t},\n\n\tapplyMatrix4: function ( matrix4 ) {\n\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.transformDirection( matrix4 );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t}\n\n} );\n\n\nexport { Ray };\n","import { Vector3 } from './Vector3.js';\nimport { Plane } from './Plane.js';\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _v0 = new Vector3();\nvar _v1 = new Vector3();\nvar _v2 = new Vector3();\nvar _v3 = new Vector3();\n\nvar _vab = new Vector3();\nvar _vac = new Vector3();\nvar _vbc = new Vector3();\nvar _vap = new Vector3();\nvar _vbp = new Vector3();\nvar _vcp = new Vector3();\n\nfunction Triangle( a, b, c ) {\n\n\tthis.a = ( a !== undefined ) ? a : new Vector3();\n\tthis.b = ( b !== undefined ) ? b : new Vector3();\n\tthis.c = ( c !== undefined ) ? c : new Vector3();\n\n}\n\nObject.assign( Triangle, {\n\n\tgetNormal: function ( a, b, c, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getNormal() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( c, b );\n\t\t_v0.subVectors( a, b );\n\t\ttarget.cross( _v0 );\n\n\t\tvar targetLengthSq = target.lengthSq();\n\t\tif ( targetLengthSq > 0 ) {\n\n\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\n\n\t\t}\n\n\t\treturn target.set( 0, 0, 0 );\n\n\t},\n\n\t// static/instance method to calculate barycentric coordinates\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\tgetBarycoord: function ( point, a, b, c, target ) {\n\n\t\t_v0.subVectors( c, a );\n\t\t_v1.subVectors( b, a );\n\t\t_v2.subVectors( point, a );\n\n\t\tvar dot00 = _v0.dot( _v0 );\n\t\tvar dot01 = _v0.dot( _v1 );\n\t\tvar dot02 = _v0.dot( _v2 );\n\t\tvar dot11 = _v1.dot( _v1 );\n\t\tvar dot12 = _v1.dot( _v2 );\n\n\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getBarycoord() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\t// collinear or singular triangle\n\t\tif ( denom === 0 ) {\n\n\t\t\t// arbitrary location outside of triangle?\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\treturn target.set( - 2, - 1, - 1 );\n\n\t\t}\n\n\t\tvar invDenom = 1 / denom;\n\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycentric coordinates must always sum to 1\n\t\treturn target.set( 1 - u - v, v, u );\n\n\t},\n\n\tcontainsPoint: function ( point, a, b, c ) {\n\n\t\tTriangle.getBarycoord( point, a, b, c, _v3 );\n\n\t\treturn ( _v3.x >= 0 ) && ( _v3.y >= 0 ) && ( ( _v3.x + _v3.y ) <= 1 );\n\n\t},\n\n\tgetUV: function ( point, p1, p2, p3, uv1, uv2, uv3, target ) {\n\n\t\tthis.getBarycoord( point, p1, p2, p3, _v3 );\n\n\t\ttarget.set( 0, 0 );\n\t\ttarget.addScaledVector( uv1, _v3.x );\n\t\ttarget.addScaledVector( uv2, _v3.y );\n\t\ttarget.addScaledVector( uv3, _v3.z );\n\n\t\treturn target;\n\n\t},\n\n\tisFrontFacing: function ( a, b, c, direction ) {\n\n\t\t_v0.subVectors( c, b );\n\t\t_v1.subVectors( a, b );\n\n\t\t// strictly front facing\n\t\treturn ( _v0.cross( _v1 ).dot( direction ) < 0 ) ? true : false;\n\n\t}\n\n} );\n\nObject.assign( Triangle.prototype, {\n\n\tset: function ( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t},\n\n\tgetArea: function () {\n\n\t\t_v0.subVectors( this.c, this.b );\n\t\t_v1.subVectors( this.a, this.b );\n\n\t\treturn _v0.cross( _v1 ).length() * 0.5;\n\n\t},\n\n\tgetMidpoint: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getMidpoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t},\n\n\tgetNormal: function ( target ) {\n\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\n\n\t},\n\n\tgetPlane: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getPlane() target is now required' );\n\t\t\ttarget = new Plane();\n\n\t\t}\n\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t},\n\n\tgetBarycoord: function ( point, target ) {\n\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\n\n\t},\n\n\tgetUV: function ( point, uv1, uv2, uv3, target ) {\n\n\t\treturn Triangle.getUV( point, this.a, this.b, this.c, uv1, uv2, uv3, target );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t},\n\n\tisFrontFacing: function ( direction ) {\n\n\t\treturn Triangle.isFrontFacing( this.a, this.b, this.c, direction );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsTriangle( this );\n\n\t},\n\n\tclosestPointToPoint: function ( p, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tvar a = this.a, b = this.b, c = this.c;\n\t\tvar v, w;\n\n\t\t// algorithm thanks to Real-Time Collision Detection by Christer Ericson,\n\t\t// published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\n\t\t// under the accompanying license; see chapter 5.1.5 for detailed explanation.\n\t\t// basically, we're distinguishing which of the voronoi regions of the triangle\n\t\t// the point lies in with the minimum amount of redundant computation.\n\n\t\t_vab.subVectors( b, a );\n\t\t_vac.subVectors( c, a );\n\t\t_vap.subVectors( p, a );\n\t\tvar d1 = _vab.dot( _vap );\n\t\tvar d2 = _vac.dot( _vap );\n\t\tif ( d1 <= 0 && d2 <= 0 ) {\n\n\t\t\t// vertex region of A; barycentric coords (1, 0, 0)\n\t\t\treturn target.copy( a );\n\n\t\t}\n\n\t\t_vbp.subVectors( p, b );\n\t\tvar d3 = _vab.dot( _vbp );\n\t\tvar d4 = _vac.dot( _vbp );\n\t\tif ( d3 >= 0 && d4 <= d3 ) {\n\n\t\t\t// vertex region of B; barycentric coords (0, 1, 0)\n\t\t\treturn target.copy( b );\n\n\t\t}\n\n\t\tvar vc = d1 * d4 - d3 * d2;\n\t\tif ( vc <= 0 && d1 >= 0 && d3 <= 0 ) {\n\n\t\t\tv = d1 / ( d1 - d3 );\n\t\t\t// edge region of AB; barycentric coords (1-v, v, 0)\n\t\t\treturn target.copy( a ).addScaledVector( _vab, v );\n\n\t\t}\n\n\t\t_vcp.subVectors( p, c );\n\t\tvar d5 = _vab.dot( _vcp );\n\t\tvar d6 = _vac.dot( _vcp );\n\t\tif ( d6 >= 0 && d5 <= d6 ) {\n\n\t\t\t// vertex region of C; barycentric coords (0, 0, 1)\n\t\t\treturn target.copy( c );\n\n\t\t}\n\n\t\tvar vb = d5 * d2 - d1 * d6;\n\t\tif ( vb <= 0 && d2 >= 0 && d6 <= 0 ) {\n\n\t\t\tw = d2 / ( d2 - d6 );\n\t\t\t// edge region of AC; barycentric coords (1-w, 0, w)\n\t\t\treturn target.copy( a ).addScaledVector( _vac, w );\n\n\t\t}\n\n\t\tvar va = d3 * d6 - d5 * d4;\n\t\tif ( va <= 0 && ( d4 - d3 ) >= 0 && ( d5 - d6 ) >= 0 ) {\n\n\t\t\t_vbc.subVectors( c, b );\n\t\t\tw = ( d4 - d3 ) / ( ( d4 - d3 ) + ( d5 - d6 ) );\n\t\t\t// edge region of BC; barycentric coords (0, 1-w, w)\n\t\t\treturn target.copy( b ).addScaledVector( _vbc, w ); // edge region of BC\n\n\t\t}\n\n\t\t// face region\n\t\tvar denom = 1 / ( va + vb + vc );\n\t\t// u = va * denom\n\t\tv = vb * denom;\n\t\tw = vc * denom;\n\n\t\treturn target.copy( a ).addScaledVector( _vab, v ).addScaledVector( _vac, w );\n\n\t},\n\n\tequals: function ( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n} );\n\n\nexport { Triangle };\n","import { EventDispatcher } from '../core/EventDispatcher.js';\nimport { NoColors, FrontSide, FlatShading, NormalBlending, LessEqualDepth, AddEquation, OneMinusSrcAlphaFactor, SrcAlphaFactor, AlwaysStencilFunc, KeepStencilOp } from '../constants.js';\nimport { _Math } from '../math/Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nvar materialId = 0;\n\nfunction Material() {\n\n\tObject.defineProperty( this, 'id', { value: materialId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Material';\n\n\tthis.fog = true;\n\n\tthis.blending = NormalBlending;\n\tthis.side = FrontSide;\n\tthis.flatShading = false;\n\tthis.vertexTangents = false;\n\tthis.vertexColors = NoColors; // THREE.NoColors, THREE.VertexColors, THREE.FaceColors\n\n\tthis.opacity = 1;\n\tthis.transparent = false;\n\n\tthis.blendSrc = SrcAlphaFactor;\n\tthis.blendDst = OneMinusSrcAlphaFactor;\n\tthis.blendEquation = AddEquation;\n\tthis.blendSrcAlpha = null;\n\tthis.blendDstAlpha = null;\n\tthis.blendEquationAlpha = null;\n\n\tthis.depthFunc = LessEqualDepth;\n\tthis.depthTest = true;\n\tthis.depthWrite = true;\n\n\tthis.stencilWriteMask = 0xff;\n\tthis.stencilFunc = AlwaysStencilFunc;\n\tthis.stencilRef = 0;\n\tthis.stencilFuncMask = 0xff;\n\tthis.stencilFail = KeepStencilOp;\n\tthis.stencilZFail = KeepStencilOp;\n\tthis.stencilZPass = KeepStencilOp;\n\tthis.stencilWrite = false;\n\n\tthis.clippingPlanes = null;\n\tthis.clipIntersection = false;\n\tthis.clipShadows = false;\n\n\tthis.shadowSide = null;\n\n\tthis.colorWrite = true;\n\n\tthis.precision = null; // override the renderer's default precision for this material\n\n\tthis.polygonOffset = false;\n\tthis.polygonOffsetFactor = 0;\n\tthis.polygonOffsetUnits = 0;\n\n\tthis.dithering = false;\n\n\tthis.alphaTest = 0;\n\tthis.premultipliedAlpha = false;\n\n\tthis.visible = true;\n\n\tthis.toneMapped = true;\n\n\tthis.userData = {};\n\n\tthis.version = 0;\n\n}\n\nMaterial.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Material,\n\n\tisMaterial: true,\n\n\tonBeforeCompile: function () {},\n\n\tsetValues: function ( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( var key in values ) {\n\n\t\t\tvar newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// for backward compatability if shading is set in the constructor\n\t\t\tif ( key === 'shading' ) {\n\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\t\t\t\tthis.flatShading = ( newValue === FlatShading ) ? true : false;\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar isRoot = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( isRoot ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.sheen && this.sheen.isColor ) data.sheen = this.sheen.getHex();\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\tif ( this.emissiveIntensity && this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\n\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\tif ( this.clearcoat !== undefined ) data.clearcoat = this.clearcoat;\n\t\tif ( this.clearcoatRoughness !== undefined ) data.clearcoatRoughness = this.clearcoatRoughness;\n\n\t\tif ( this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture ) {\n\n\t\t\tdata.clearcoatNormalMap = this.clearcoatNormalMap.toJSON( meta ).uuid;\n\t\t\tdata.clearcoatNormalScale = this.clearcoatNormalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.matcap && this.matcap.isTexture ) data.matcap = this.matcap.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\t\tif ( this.lightMap && this.lightMap.isTexture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\n\n\t\tif ( this.aoMap && this.aoMap.isTexture ) {\n\n\t\t\tdata.aoMap = this.aoMap.toJSON( meta ).uuid;\n\t\t\tdata.aoMapIntensity = this.aoMapIntensity;\n\n\t\t}\n\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalMapType = this.normalMapType;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\n\t\tif ( this.envMap && this.envMap.isTexture ) {\n\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\n\t\t\tdata.refractionRatio = this.refractionRatio;\n\n\t\t\tif ( this.combine !== undefined ) data.combine = this.combine;\n\t\t\tif ( this.envMapIntensity !== undefined ) data.envMapIntensity = this.envMapIntensity;\n\n\t\t}\n\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.flatShading === true ) data.flatShading = this.flatShading;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors !== NoColors ) data.vertexColors = this.vertexColors;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\n\n\t\tdata.depthFunc = this.depthFunc;\n\t\tdata.depthTest = this.depthTest;\n\t\tdata.depthWrite = this.depthWrite;\n\n\t\tdata.stencilWrite = this.stencilWrite;\n\t\tdata.stencilWriteMask = this.stencilWriteMask;\n\t\tdata.stencilFunc = this.stencilFunc;\n\t\tdata.stencilRef = this.stencilRef;\n\t\tdata.stencilFuncMask = this.stencilFuncMask;\n\t\tdata.stencilFail = this.stencilFail;\n\t\tdata.stencilZFail = this.stencilZFail;\n\t\tdata.stencilZPass = this.stencilZPass;\n\n\t\t// rotation (SpriteMaterial)\n\t\tif ( this.rotation && this.rotation !== 0 ) data.rotation = this.rotation;\n\n\t\tif ( this.polygonOffset === true ) data.polygonOffset = true;\n\t\tif ( this.polygonOffsetFactor !== 0 ) data.polygonOffsetFactor = this.polygonOffsetFactor;\n\t\tif ( this.polygonOffsetUnits !== 0 ) data.polygonOffsetUnits = this.polygonOffsetUnits;\n\n\t\tif ( this.linewidth && this.linewidth !== 1 ) data.linewidth = this.linewidth;\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\n\n\t\tif ( this.dithering === true ) data.dithering = true;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\tif ( this.morphTargets === true ) data.morphTargets = true;\n\t\tif ( this.morphNormals === true ) data.morphNormals = true;\n\t\tif ( this.skinning === true ) data.skinning = true;\n\n\t\tif ( this.visible === false ) data.visible = false;\n\n\t\tif ( this.toneMapped === false ) data.toneMapped = false;\n\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tvar values = [];\n\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRoot ) {\n\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.fog = source.fog;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.flatShading = source.flatShading;\n\t\tthis.vertexTangents = source.vertexTangents;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.stencilWriteMask = source.stencilWriteMask;\n\t\tthis.stencilFunc = source.stencilFunc;\n\t\tthis.stencilRef = source.stencilRef;\n\t\tthis.stencilFuncMask = source.stencilFuncMask;\n\t\tthis.stencilFail = source.stencilFail;\n\t\tthis.stencilZFail = source.stencilZFail;\n\t\tthis.stencilZPass = source.stencilZPass;\n\t\tthis.stencilWrite = source.stencilWrite;\n\n\t\tvar srcPlanes = source.clippingPlanes,\n\t\t\tdstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tvar n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( var i = 0; i !== n; ++ i )\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\t\tthis.clipIntersection = source.clipIntersection;\n\t\tthis.clipShadows = source.clipShadows;\n\n\t\tthis.shadowSide = source.shadowSide;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.dithering = source.dithering;\n\n\t\tthis.alphaTest = source.alphaTest;\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\n\t\tthis.visible = source.visible;\n\n\t\tthis.toneMapped = source.toneMapped;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nObject.defineProperty( Material.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nexport { Material };\n","import { Material } from './Material.js';\nimport { MultiplyOperation } from '../constants.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>\n * }\n */\n\nfunction MeshBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshBasicMaterial';\n\n\tthis.color = new Color( 0xffffff ); // emissive\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshBasicMaterial.prototype = Object.create( Material.prototype );\nMeshBasicMaterial.prototype.constructor = MeshBasicMaterial;\n\nMeshBasicMaterial.prototype.isMeshBasicMaterial = true;\n\nMeshBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\n\nexport { MeshBasicMaterial };\n","import { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Sphere } from '../math/Sphere.js';\nimport { Ray } from '../math/Ray.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Triangle } from '../math/Triangle.js';\nimport { Face3 } from '../core/Face3.js';\nimport { DoubleSide, BackSide, TrianglesDrawMode } from '../constants.js';\nimport { MeshBasicMaterial } from '../materials/MeshBasicMaterial.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author jonobr1 / http://jonobr1.com/\n */\n\nvar _inverseMatrix = new Matrix4();\nvar _ray = new Ray();\nvar _sphere = new Sphere();\n\nvar _vA = new Vector3();\nvar _vB = new Vector3();\nvar _vC = new Vector3();\n\nvar _tempA = new Vector3();\nvar _tempB = new Vector3();\nvar _tempC = new Vector3();\n\nvar _morphA = new Vector3();\nvar _morphB = new Vector3();\nvar _morphC = new Vector3();\n\nvar _uvA = new Vector2();\nvar _uvB = new Vector2();\nvar _uvC = new Vector2();\n\nvar _intersectionPoint = new Vector3();\nvar _intersectionPointWorld = new Vector3();\n\nfunction Mesh( geometry, material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Mesh';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new MeshBasicMaterial( { color: Math.random() * 0xffffff } );\n\n\tthis.drawMode = TrianglesDrawMode;\n\n\tthis.updateMorphTargets();\n\n}\n\nMesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Mesh,\n\n\tisMesh: true,\n\n\tsetDrawMode: function ( value ) {\n\n\t\tthis.drawMode = value;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.drawMode = source.drawMode;\n\n\t\tif ( source.morphTargetInfluences !== undefined ) {\n\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\n\n\t\t}\n\n\t\tif ( source.morphTargetDictionary !== undefined ) {\n\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tvar geometry = this.geometry;\n\t\tvar m, ml, name;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tvar morphAttributes = geometry.morphAttributes;\n\t\t\tvar keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tvar morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tname = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tvar geometry = this.geometry;\n\t\tvar material = this.material;\n\t\tvar matrixWorld = this.matrixWorld;\n\n\t\tif ( material === undefined ) return;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.getInverse( matrixWorld );\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\t// Check boundingBox before continuing\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( _ray.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t}\n\n\t\t// check unsupported draw modes\n\n\t\tif ( this.drawMode !== TrianglesDrawMode ) {\n\n\t\t\tconsole.warn( 'THREE.Mesh: TriangleStripDrawMode and TriangleFanDrawMode are not supported by .raycast().' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar intersection;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tvar a, b, c;\n\t\t\tvar index = geometry.index;\n\t\t\tvar position = geometry.attributes.position;\n\t\t\tvar morphPosition = geometry.morphAttributes.position;\n\t\t\tvar morphTargetsRelative = geometry.morphTargetsRelative;\n\t\t\tvar uv = geometry.attributes.uv;\n\t\t\tvar uv2 = geometry.attributes.uv2;\n\t\t\tvar groups = geometry.groups;\n\t\t\tvar drawRange = geometry.drawRange;\n\t\t\tvar i, j, il, jl;\n\t\t\tvar group, groupMaterial;\n\t\t\tvar start, end;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\t// indexed buffer geometry\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tgroup = groups[ i ];\n\t\t\t\t\t\tgroupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tstart = Math.max( group.start, drawRange.start );\n\t\t\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\ta = index.getX( j );\n\t\t\t\t\t\t\tb = index.getX( j + 1 );\n\t\t\t\t\t\t\tc = index.getX( j + 2 );\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstart = Math.max( 0, drawRange.start );\n\t\t\t\t\tend = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\t\ta = index.getX( i );\n\t\t\t\t\t\tb = index.getX( i + 1 );\n\t\t\t\t\t\tc = index.getX( i + 2 );\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( position !== undefined ) {\n\n\t\t\t\t// non-indexed buffer geometry\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tgroup = groups[ i ];\n\t\t\t\t\t\tgroupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tstart = Math.max( group.start, drawRange.start );\n\t\t\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\ta = j;\n\t\t\t\t\t\t\tb = j + 1;\n\t\t\t\t\t\t\tc = j + 2;\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstart = Math.max( 0, drawRange.start );\n\t\t\t\t\tend = Math.min( position.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\t\ta = i;\n\t\t\t\t\t\tb = i + 1;\n\t\t\t\t\t\tc = i + 2;\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tvar fvA, fvB, fvC;\n\t\t\tvar isMultiMaterial = Array.isArray( material );\n\n\t\t\tvar vertices = geometry.vertices;\n\t\t\tvar faces = geometry.faces;\n\t\t\tvar uvs;\n\n\t\t\tvar faceVertexUvs = geometry.faceVertexUvs[ 0 ];\n\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\n\n\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\n\n\t\t\t\tvar face = faces[ f ];\n\t\t\t\tvar faceMaterial = isMultiMaterial ? material[ face.materialIndex ] : material;\n\n\t\t\t\tif ( faceMaterial === undefined ) continue;\n\n\t\t\t\tfvA = vertices[ face.a ];\n\t\t\t\tfvB = vertices[ face.b ];\n\t\t\t\tfvC = vertices[ face.c ];\n\n\t\t\t\tintersection = checkIntersection( this, faceMaterial, raycaster, _ray, fvA, fvB, fvC, _intersectionPoint );\n\n\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\tif ( uvs && uvs[ f ] ) {\n\n\t\t\t\t\t\tvar uvs_f = uvs[ f ];\n\t\t\t\t\t\t_uvA.copy( uvs_f[ 0 ] );\n\t\t\t\t\t\t_uvB.copy( uvs_f[ 1 ] );\n\t\t\t\t\t\t_uvC.copy( uvs_f[ 2 ] );\n\n\t\t\t\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, fvA, fvB, fvC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tintersection.face = face;\n\t\t\t\t\tintersection.faceIndex = f;\n\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\n\n\tvar intersect;\n\n\tif ( material.side === BackSide ) {\n\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t} else {\n\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\n\n\t}\n\n\tif ( intersect === null ) return null;\n\n\t_intersectionPointWorld.copy( point );\n\t_intersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\tvar distance = raycaster.ray.origin.distanceTo( _intersectionPointWorld );\n\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\treturn {\n\t\tdistance: distance,\n\t\tpoint: _intersectionPointWorld.clone(),\n\t\tobject: object\n\t};\n\n}\n\nfunction checkBufferGeometryIntersection( object, material, raycaster, ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c ) {\n\n\t_vA.fromBufferAttribute( position, a );\n\t_vB.fromBufferAttribute( position, b );\n\t_vC.fromBufferAttribute( position, c );\n\n\tvar morphInfluences = object.morphTargetInfluences;\n\n\tif ( material.morphTargets && morphPosition && morphInfluences ) {\n\n\t\t_morphA.set( 0, 0, 0 );\n\t\t_morphB.set( 0, 0, 0 );\n\t\t_morphC.set( 0, 0, 0 );\n\n\t\tfor ( var i = 0, il = morphPosition.length; i < il; i ++ ) {\n\n\t\t\tvar influence = morphInfluences[ i ];\n\t\t\tvar morphAttribute = morphPosition[ i ];\n\n\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t_tempA.fromBufferAttribute( morphAttribute, a );\n\t\t\t_tempB.fromBufferAttribute( morphAttribute, b );\n\t\t\t_tempC.fromBufferAttribute( morphAttribute, c );\n\n\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t_morphA.addScaledVector( _tempA, influence );\n\t\t\t\t_morphB.addScaledVector( _tempB, influence );\n\t\t\t\t_morphC.addScaledVector( _tempC, influence );\n\n\t\t\t} else {\n\n\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA ), influence );\n\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB ), influence );\n\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC ), influence );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_vA.add( _morphA );\n\t\t_vB.add( _morphB );\n\t\t_vC.add( _morphC );\n\n\t}\n\n\tvar intersection = checkIntersection( object, material, raycaster, ray, _vA, _vB, _vC, _intersectionPoint );\n\n\tif ( intersection ) {\n\n\t\tif ( uv ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv, a );\n\t\t\t_uvB.fromBufferAttribute( uv, b );\n\t\t\t_uvC.fromBufferAttribute( uv, c );\n\n\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tif ( uv2 ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv2, a );\n\t\t\t_uvB.fromBufferAttribute( uv2, b );\n\t\t\t_uvC.fromBufferAttribute( uv2, c );\n\n\t\t\tintersection.uv2 = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tvar face = new Face3( a, b, c );\n\t\tTriangle.getNormal( _vA, _vB, _vC, face.normal );\n\n\t\tintersection.face = face;\n\n\t}\n\n\treturn intersection;\n\n}\n\nexport { Mesh };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nvar _canvas;\n\nvar ImageUtils = {\n\n\tgetDataURL: function ( image ) {\n\n\t\tvar canvas;\n\n\t\tif ( typeof HTMLCanvasElement == 'undefined' ) {\n\n\t\t\treturn image.src;\n\n\t\t} else if ( image instanceof HTMLCanvasElement ) {\n\n\t\t\tcanvas = image;\n\n\t\t} else {\n\n\t\t\tif ( _canvas === undefined ) _canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t\t\t_canvas.width = image.width;\n\t\t\t_canvas.height = image.height;\n\n\t\t\tvar context = _canvas.getContext( '2d' );\n\n\t\t\tif ( image instanceof ImageData ) {\n\n\t\t\t\tcontext.putImageData( image, 0, 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t}\n\n\t\t\tcanvas = _canvas;\n\n\t\t}\n\n\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t} else {\n\n\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t}\n\n\t}\n\n};\n\nexport { ImageUtils };\n","import { TangentSpaceNormalMap } from '../constants.js';\nimport { Material } from './Material.js';\nimport { Vector2 } from '../math/Vector2.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  opacity: <float>,\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshNormalMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshNormalMaterial';\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshNormalMaterial.prototype = Object.create( Material.prototype );\nMeshNormalMaterial.prototype.constructor = MeshNormalMaterial;\n\nMeshNormalMaterial.prototype.isMeshNormalMaterial = true;\n\nMeshNormalMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshNormalMaterial };\n","import { Camera } from './Camera.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { _Math } from '../math/Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author greggman / http://games.greggman.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author tschw\n */\n\nfunction PerspectiveCamera( fov, aspect, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'PerspectiveCamera';\n\n\tthis.fov = fov !== undefined ? fov : 50;\n\tthis.zoom = 1;\n\n\tthis.near = near !== undefined ? near : 0.1;\n\tthis.far = far !== undefined ? far : 2000;\n\tthis.focus = 10;\n\n\tthis.aspect = aspect !== undefined ? aspect : 1;\n\tthis.view = null;\n\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\tthis.updateProjectionMatrix();\n\n}\n\nPerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: PerspectiveCamera,\n\n\tisPerspectiveCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength: function ( focalLength ) {\n\n\t\t// see http://www.bobatkins.com/photography/technical/field_of_view.html\n\t\tvar vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = _Math.RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength: function () {\n\n\t\tvar vExtentSlope = Math.tan( _Math.DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t},\n\n\tgetEffectiveFOV: function () {\n\n\t\treturn _Math.RAD2DEG * 2 * Math.atan(\n\t\t\tMath.tan( _Math.DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t},\n\n\tgetFilmWidth: function () {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t},\n\n\tgetFilmHeight: function () {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t},\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   var w = 1920;\n\t *   var h = 1080;\n\t *   var fullWidth = w * 3;\n\t *   var fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tvar near = this.near,\n\t\t\ttop = near * Math.tan( _Math.DEG2RAD * 0.5 * this.fov ) / this.zoom,\n\t\t\theight = 2 * top,\n\t\t\twidth = this.aspect * height,\n\t\t\tleft = - 0.5 * width,\n\t\t\tview = this.view;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tvar fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tvar skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\n\n\t\tthis.projectionMatrixInverse.getInverse( this.projectionMatrix );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { PerspectiveCamera };\n","import { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Scene() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Scene';\n\n\tthis.background = null;\n\tthis.fog = null;\n\tthis.overrideMaterial = null;\n\n\tthis.autoUpdate = true; // checked by the renderer\n\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t}\n\n}\n\nScene.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Scene,\n\n\tisScene: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tif ( this.background !== null ) data.object.background = this.background.toJSON( meta );\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\n\t\treturn data;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\n\nexport { Scene };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nimport { EventDispatcher } from '../core/EventDispatcher.js';\nimport {\n\tMirroredRepeatWrapping,\n\tClampToEdgeWrapping,\n\tRepeatWrapping,\n\tLinearEncoding,\n\tUnsignedByteType,\n\tRGBAFormat,\n\tLinearMipmapLinearFilter,\n\tLinearFilter,\n\tUVMapping\n} from '../constants.js';\nimport { _Math } from '../math/Math.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { ImageUtils } from '../extras/ImageUtils.js';\n\nvar textureId = 0;\n\nfunction Texture( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\tObject.defineProperty( this, 'id', { value: textureId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\n\tthis.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\n\tthis.mipmaps = [];\n\n\tthis.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\n\n\tthis.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\n\tthis.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearMipmapLinearFilter;\n\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\n\n\tthis.format = format !== undefined ? format : RGBAFormat;\n\tthis.type = type !== undefined ? type : UnsignedByteType;\n\n\tthis.offset = new Vector2( 0, 0 );\n\tthis.repeat = new Vector2( 1, 1 );\n\tthis.center = new Vector2( 0, 0 );\n\tthis.rotation = 0;\n\n\tthis.matrixAutoUpdate = true;\n\tthis.matrix = new Matrix3();\n\n\tthis.generateMipmaps = true;\n\tthis.premultiplyAlpha = false;\n\tthis.flipY = true;\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t//\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t// update. You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\tthis.encoding = encoding !== undefined ? encoding : LinearEncoding;\n\n\tthis.version = 0;\n\tthis.onUpdate = null;\n\n}\n\nTexture.DEFAULT_IMAGE = undefined;\nTexture.DEFAULT_MAPPING = UVMapping;\n\nTexture.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Texture,\n\n\tisTexture: true,\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.image = source.image;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\t\tthis.center.copy( source.center );\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrix.copy( source.matrix );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.encoding = source.encoding;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tvar output = {\n\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\tmapping: this.mapping,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\tcenter: [ this.center.x, this.center.y ],\n\t\t\trotation: this.rotation,\n\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tformat: this.format,\n\t\t\ttype: this.type,\n\t\t\tencoding: this.encoding,\n\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY,\n\n\t\t\tpremultiplyAlpha: this.premultiplyAlpha,\n\t\t\tunpackAlignment: this.unpackAlignment\n\n\t\t};\n\n\t\tif ( this.image !== undefined ) {\n\n\t\t\t// TODO: Move to THREE.Image\n\n\t\t\tvar image = this.image;\n\n\t\t\tif ( image.uuid === undefined ) {\n\n\t\t\t\timage.uuid = _Math.generateUUID(); // UGH\n\n\t\t\t}\n\n\t\t\tif ( ! isRootObject && meta.images[ image.uuid ] === undefined ) {\n\n\t\t\t\tvar url;\n\n\t\t\t\tif ( Array.isArray( image ) ) {\n\n\t\t\t\t\t// process array of images e.g. CubeTexture\n\n\t\t\t\t\turl = [];\n\n\t\t\t\t\tfor ( var i = 0, l = image.length; i < l; i ++ ) {\n\n\t\t\t\t\t\turl.push( ImageUtils.getDataURL( image[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// process single image\n\n\t\t\t\t\turl = ImageUtils.getDataURL( image );\n\n\t\t\t\t}\n\n\t\t\t\tmeta.images[ image.uuid ] = {\n\t\t\t\t\tuuid: image.uuid,\n\t\t\t\t\turl: url\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\toutput.image = image.uuid;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.textures[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t},\n\n\ttransformUv: function ( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return uv;\n\n\t\tuv.applyMatrix3( this.matrix );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t\treturn uv;\n\n\t}\n\n} );\n\nObject.defineProperty( Texture.prototype, \"needsUpdate\", {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\n\nexport { Texture };\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport { Texture } from './Texture.js';\nimport { NearestFilter } from '../constants.js';\n\nfunction DataTexture( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1 };\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\tthis.unpackAlignment = 1;\n\n\tthis.needsUpdate = true;\n\n}\n\nDataTexture.prototype = Object.create( Texture.prototype );\nDataTexture.prototype.constructor = DataTexture;\n\nDataTexture.prototype.isDataTexture = true;\n\n\nexport { DataTexture };\n","import alphamap_fragment from './ShaderChunk/alphamap_fragment.glsl.js';\nimport alphamap_pars_fragment from './ShaderChunk/alphamap_pars_fragment.glsl.js';\nimport alphatest_fragment from './ShaderChunk/alphatest_fragment.glsl.js';\nimport aomap_fragment from './ShaderChunk/aomap_fragment.glsl.js';\nimport aomap_pars_fragment from './ShaderChunk/aomap_pars_fragment.glsl.js';\nimport begin_vertex from './ShaderChunk/begin_vertex.glsl.js';\nimport beginnormal_vertex from './ShaderChunk/beginnormal_vertex.glsl.js';\nimport bsdfs from './ShaderChunk/bsdfs.glsl.js';\nimport bumpmap_pars_fragment from './ShaderChunk/bumpmap_pars_fragment.glsl.js';\nimport clipping_planes_fragment from './ShaderChunk/clipping_planes_fragment.glsl.js';\nimport clipping_planes_pars_fragment from './ShaderChunk/clipping_planes_pars_fragment.glsl.js';\nimport clipping_planes_pars_vertex from './ShaderChunk/clipping_planes_pars_vertex.glsl.js';\nimport clipping_planes_vertex from './ShaderChunk/clipping_planes_vertex.glsl.js';\nimport color_fragment from './ShaderChunk/color_fragment.glsl.js';\nimport color_pars_fragment from './ShaderChunk/color_pars_fragment.glsl.js';\nimport color_pars_vertex from './ShaderChunk/color_pars_vertex.glsl.js';\nimport color_vertex from './ShaderChunk/color_vertex.glsl.js';\nimport common from './ShaderChunk/common.glsl.js';\nimport cube_uv_reflection_fragment from './ShaderChunk/cube_uv_reflection_fragment.glsl.js';\nimport defaultnormal_vertex from './ShaderChunk/defaultnormal_vertex.glsl.js';\nimport displacementmap_pars_vertex from './ShaderChunk/displacementmap_pars_vertex.glsl.js';\nimport displacementmap_vertex from './ShaderChunk/displacementmap_vertex.glsl.js';\nimport emissivemap_fragment from './ShaderChunk/emissivemap_fragment.glsl.js';\nimport emissivemap_pars_fragment from './ShaderChunk/emissivemap_pars_fragment.glsl.js';\nimport encodings_fragment from './ShaderChunk/encodings_fragment.glsl.js';\nimport encodings_pars_fragment from './ShaderChunk/encodings_pars_fragment.glsl.js';\nimport envmap_fragment from './ShaderChunk/envmap_fragment.glsl.js';\nimport envmap_common_pars_fragment from './ShaderChunk/envmap_common_pars_fragment.glsl.js';\nimport envmap_pars_fragment from './ShaderChunk/envmap_pars_fragment.glsl.js';\nimport envmap_pars_vertex from './ShaderChunk/envmap_pars_vertex.glsl.js';\nimport envmap_vertex from './ShaderChunk/envmap_vertex.glsl.js';\nimport fog_vertex from './ShaderChunk/fog_vertex.glsl.js';\nimport fog_pars_vertex from './ShaderChunk/fog_pars_vertex.glsl.js';\nimport fog_fragment from './ShaderChunk/fog_fragment.glsl.js';\nimport fog_pars_fragment from './ShaderChunk/fog_pars_fragment.glsl.js';\nimport gradientmap_pars_fragment from './ShaderChunk/gradientmap_pars_fragment.glsl.js';\nimport lightmap_fragment from './ShaderChunk/lightmap_fragment.glsl.js';\nimport lightmap_pars_fragment from './ShaderChunk/lightmap_pars_fragment.glsl.js';\nimport lights_lambert_vertex from './ShaderChunk/lights_lambert_vertex.glsl.js';\nimport lights_pars_begin from './ShaderChunk/lights_pars_begin.glsl.js';\nimport envmap_physical_pars_fragment from './ShaderChunk/envmap_physical_pars_fragment.glsl.js';\nimport lights_phong_fragment from './ShaderChunk/lights_phong_fragment.glsl.js';\nimport lights_phong_pars_fragment from './ShaderChunk/lights_phong_pars_fragment.glsl.js';\nimport lights_physical_fragment from './ShaderChunk/lights_physical_fragment.glsl.js';\nimport lights_physical_pars_fragment from './ShaderChunk/lights_physical_pars_fragment.glsl.js';\nimport lights_fragment_begin from './ShaderChunk/lights_fragment_begin.glsl.js';\nimport lights_fragment_maps from './ShaderChunk/lights_fragment_maps.glsl.js';\nimport lights_fragment_end from './ShaderChunk/lights_fragment_end.glsl.js';\nimport logdepthbuf_fragment from './ShaderChunk/logdepthbuf_fragment.glsl.js';\nimport logdepthbuf_pars_fragment from './ShaderChunk/logdepthbuf_pars_fragment.glsl.js';\nimport logdepthbuf_pars_vertex from './ShaderChunk/logdepthbuf_pars_vertex.glsl.js';\nimport logdepthbuf_vertex from './ShaderChunk/logdepthbuf_vertex.glsl.js';\nimport map_fragment from './ShaderChunk/map_fragment.glsl.js';\nimport map_pars_fragment from './ShaderChunk/map_pars_fragment.glsl.js';\nimport map_particle_fragment from './ShaderChunk/map_particle_fragment.glsl.js';\nimport map_particle_pars_fragment from './ShaderChunk/map_particle_pars_fragment.glsl.js';\nimport metalnessmap_fragment from './ShaderChunk/metalnessmap_fragment.glsl.js';\nimport metalnessmap_pars_fragment from './ShaderChunk/metalnessmap_pars_fragment.glsl.js';\nimport morphnormal_vertex from './ShaderChunk/morphnormal_vertex.glsl.js';\nimport morphtarget_pars_vertex from './ShaderChunk/morphtarget_pars_vertex.glsl.js';\nimport morphtarget_vertex from './ShaderChunk/morphtarget_vertex.glsl.js';\nimport normal_fragment_begin from './ShaderChunk/normal_fragment_begin.glsl.js';\nimport normal_fragment_maps from './ShaderChunk/normal_fragment_maps.glsl.js';\nimport normalmap_pars_fragment from './ShaderChunk/normalmap_pars_fragment.glsl.js';\nimport clearcoat_normal_fragment_begin from './ShaderChunk/clearcoat_normal_fragment_begin.glsl.js';\nimport clearcoat_normal_fragment_maps from './ShaderChunk/clearcoat_normal_fragment_maps.glsl.js';\nimport clearcoat_normalmap_pars_fragment from './ShaderChunk/clearcoat_normalmap_pars_fragment.glsl.js';\nimport packing from './ShaderChunk/packing.glsl.js';\nimport premultiplied_alpha_fragment from './ShaderChunk/premultiplied_alpha_fragment.glsl.js';\nimport project_vertex from './ShaderChunk/project_vertex.glsl.js';\nimport dithering_fragment from './ShaderChunk/dithering_fragment.glsl.js';\nimport dithering_pars_fragment from './ShaderChunk/dithering_pars_fragment.glsl.js';\nimport roughnessmap_fragment from './ShaderChunk/roughnessmap_fragment.glsl.js';\nimport roughnessmap_pars_fragment from './ShaderChunk/roughnessmap_pars_fragment.glsl.js';\nimport shadowmap_pars_fragment from './ShaderChunk/shadowmap_pars_fragment.glsl.js';\nimport shadowmap_pars_vertex from './ShaderChunk/shadowmap_pars_vertex.glsl.js';\nimport shadowmap_vertex from './ShaderChunk/shadowmap_vertex.glsl.js';\nimport shadowmask_pars_fragment from './ShaderChunk/shadowmask_pars_fragment.glsl.js';\nimport skinbase_vertex from './ShaderChunk/skinbase_vertex.glsl.js';\nimport skinning_pars_vertex from './ShaderChunk/skinning_pars_vertex.glsl.js';\nimport skinning_vertex from './ShaderChunk/skinning_vertex.glsl.js';\nimport skinnormal_vertex from './ShaderChunk/skinnormal_vertex.glsl.js';\nimport specularmap_fragment from './ShaderChunk/specularmap_fragment.glsl.js';\nimport specularmap_pars_fragment from './ShaderChunk/specularmap_pars_fragment.glsl.js';\nimport tonemapping_fragment from './ShaderChunk/tonemapping_fragment.glsl.js';\nimport tonemapping_pars_fragment from './ShaderChunk/tonemapping_pars_fragment.glsl.js';\nimport uv_pars_fragment from './ShaderChunk/uv_pars_fragment.glsl.js';\nimport uv_pars_vertex from './ShaderChunk/uv_pars_vertex.glsl.js';\nimport uv_vertex from './ShaderChunk/uv_vertex.glsl.js';\nimport uv2_pars_fragment from './ShaderChunk/uv2_pars_fragment.glsl.js';\nimport uv2_pars_vertex from './ShaderChunk/uv2_pars_vertex.glsl.js';\nimport uv2_vertex from './ShaderChunk/uv2_vertex.glsl.js';\nimport worldpos_vertex from './ShaderChunk/worldpos_vertex.glsl.js';\n\nimport background_frag from './ShaderLib/background_frag.glsl.js';\nimport background_vert from './ShaderLib/background_vert.glsl.js';\nimport cube_frag from './ShaderLib/cube_frag.glsl.js';\nimport cube_vert from './ShaderLib/cube_vert.glsl.js';\nimport depth_frag from './ShaderLib/depth_frag.glsl.js';\nimport depth_vert from './ShaderLib/depth_vert.glsl.js';\nimport distanceRGBA_frag from './ShaderLib/distanceRGBA_frag.glsl.js';\nimport distanceRGBA_vert from './ShaderLib/distanceRGBA_vert.glsl.js';\nimport equirect_frag from './ShaderLib/equirect_frag.glsl.js';\nimport equirect_vert from './ShaderLib/equirect_vert.glsl.js';\nimport linedashed_frag from './ShaderLib/linedashed_frag.glsl.js';\nimport linedashed_vert from './ShaderLib/linedashed_vert.glsl.js';\nimport meshbasic_frag from './ShaderLib/meshbasic_frag.glsl.js';\nimport meshbasic_vert from './ShaderLib/meshbasic_vert.glsl.js';\nimport meshlambert_frag from './ShaderLib/meshlambert_frag.glsl.js';\nimport meshlambert_vert from './ShaderLib/meshlambert_vert.glsl.js';\nimport meshmatcap_frag from './ShaderLib/meshmatcap_frag.glsl.js';\nimport meshmatcap_vert from './ShaderLib/meshmatcap_vert.glsl.js';\nimport meshphong_frag from './ShaderLib/meshphong_frag.glsl.js';\nimport meshphong_vert from './ShaderLib/meshphong_vert.glsl.js';\nimport meshphysical_frag from './ShaderLib/meshphysical_frag.glsl.js';\nimport meshphysical_vert from './ShaderLib/meshphysical_vert.glsl.js';\nimport normal_frag from './ShaderLib/normal_frag.glsl.js';\nimport normal_vert from './ShaderLib/normal_vert.glsl.js';\nimport points_frag from './ShaderLib/points_frag.glsl.js';\nimport points_vert from './ShaderLib/points_vert.glsl.js';\nimport shadow_frag from './ShaderLib/shadow_frag.glsl.js';\nimport shadow_vert from './ShaderLib/shadow_vert.glsl.js';\nimport sprite_frag from './ShaderLib/sprite_frag.glsl.js';\nimport sprite_vert from './ShaderLib/sprite_vert.glsl.js';\n\nexport var ShaderChunk = {\n\talphamap_fragment: alphamap_fragment,\n\talphamap_pars_fragment: alphamap_pars_fragment,\n\talphatest_fragment: alphatest_fragment,\n\taomap_fragment: aomap_fragment,\n\taomap_pars_fragment: aomap_pars_fragment,\n\tbegin_vertex: begin_vertex,\n\tbeginnormal_vertex: beginnormal_vertex,\n\tbsdfs: bsdfs,\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\tclipping_planes_fragment: clipping_planes_fragment,\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\tclipping_planes_vertex: clipping_planes_vertex,\n\tcolor_fragment: color_fragment,\n\tcolor_pars_fragment: color_pars_fragment,\n\tcolor_pars_vertex: color_pars_vertex,\n\tcolor_vertex: color_vertex,\n\tcommon: common,\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\tdefaultnormal_vertex: defaultnormal_vertex,\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\tdisplacementmap_vertex: displacementmap_vertex,\n\temissivemap_fragment: emissivemap_fragment,\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\tencodings_fragment: encodings_fragment,\n\tencodings_pars_fragment: encodings_pars_fragment,\n\tenvmap_fragment: envmap_fragment,\n\tenvmap_common_pars_fragment: envmap_common_pars_fragment,\n\tenvmap_pars_fragment: envmap_pars_fragment,\n\tenvmap_pars_vertex: envmap_pars_vertex,\n\tenvmap_physical_pars_fragment: envmap_physical_pars_fragment,\n\tenvmap_vertex: envmap_vertex,\n\tfog_vertex: fog_vertex,\n\tfog_pars_vertex: fog_pars_vertex,\n\tfog_fragment: fog_fragment,\n\tfog_pars_fragment: fog_pars_fragment,\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\tlightmap_fragment: lightmap_fragment,\n\tlightmap_pars_fragment: lightmap_pars_fragment,\n\tlights_lambert_vertex: lights_lambert_vertex,\n\tlights_pars_begin: lights_pars_begin,\n\tlights_phong_fragment: lights_phong_fragment,\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\tlights_physical_fragment: lights_physical_fragment,\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\tlights_fragment_begin: lights_fragment_begin,\n\tlights_fragment_maps: lights_fragment_maps,\n\tlights_fragment_end: lights_fragment_end,\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\tmap_fragment: map_fragment,\n\tmap_pars_fragment: map_pars_fragment,\n\tmap_particle_fragment: map_particle_fragment,\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\tmetalnessmap_fragment: metalnessmap_fragment,\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\tmorphnormal_vertex: morphnormal_vertex,\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\tmorphtarget_vertex: morphtarget_vertex,\n\tnormal_fragment_begin: normal_fragment_begin,\n\tnormal_fragment_maps: normal_fragment_maps,\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\tclearcoat_normal_fragment_begin: clearcoat_normal_fragment_begin,\n\tclearcoat_normal_fragment_maps: clearcoat_normal_fragment_maps,\n\tclearcoat_normalmap_pars_fragment: clearcoat_normalmap_pars_fragment,\n\tpacking: packing,\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\tproject_vertex: project_vertex,\n\tdithering_fragment: dithering_fragment,\n\tdithering_pars_fragment: dithering_pars_fragment,\n\troughnessmap_fragment: roughnessmap_fragment,\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\tshadowmap_vertex: shadowmap_vertex,\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\tskinbase_vertex: skinbase_vertex,\n\tskinning_pars_vertex: skinning_pars_vertex,\n\tskinning_vertex: skinning_vertex,\n\tskinnormal_vertex: skinnormal_vertex,\n\tspecularmap_fragment: specularmap_fragment,\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\ttonemapping_fragment: tonemapping_fragment,\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\tuv_pars_fragment: uv_pars_fragment,\n\tuv_pars_vertex: uv_pars_vertex,\n\tuv_vertex: uv_vertex,\n\tuv2_pars_fragment: uv2_pars_fragment,\n\tuv2_pars_vertex: uv2_pars_vertex,\n\tuv2_vertex: uv2_vertex,\n\tworldpos_vertex: worldpos_vertex,\n\n\tbackground_frag: background_frag,\n\tbackground_vert: background_vert,\n\tcube_frag: cube_frag,\n\tcube_vert: cube_vert,\n\tdepth_frag: depth_frag,\n\tdepth_vert: depth_vert,\n\tdistanceRGBA_frag: distanceRGBA_frag,\n\tdistanceRGBA_vert: distanceRGBA_vert,\n\tequirect_frag: equirect_frag,\n\tequirect_vert: equirect_vert,\n\tlinedashed_frag: linedashed_frag,\n\tlinedashed_vert: linedashed_vert,\n\tmeshbasic_frag: meshbasic_frag,\n\tmeshbasic_vert: meshbasic_vert,\n\tmeshlambert_frag: meshlambert_frag,\n\tmeshlambert_vert: meshlambert_vert,\n\tmeshmatcap_frag: meshmatcap_frag,\n\tmeshmatcap_vert: meshmatcap_vert,\n\tmeshphong_frag: meshphong_frag,\n\tmeshphong_vert: meshphong_vert,\n\tmeshphysical_frag: meshphysical_frag,\n\tmeshphysical_vert: meshphysical_vert,\n\tnormal_frag: normal_frag,\n\tnormal_vert: normal_vert,\n\tpoints_frag: points_frag,\n\tpoints_vert: points_vert,\n\tshadow_frag: shadow_frag,\n\tshadow_vert: shadow_vert,\n\tsprite_frag: sprite_frag,\n\tsprite_vert: sprite_vert\n};\n","export default /* glsl */`\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_AOMAP\n\n\t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif\n`;\n","export default /* glsl */`\nvec3 transformed = vec3( position );\n`;\n","export default /* glsl */`\nvec3 objectNormal = vec3( normal );\n\n#ifdef USE_TANGENT\n\n\tvec3 objectTangent = vec3( tangent.xyz );\n\n#endif\n`;\n","export default /* glsl */`\n\n// Analytical approximation of the DFG LUT, one half of the\n// split-sum approximation used in indirect specular lighting.\n// via 'environmentBRDF' from \"Physically Based Shading on Mobile\"\n// https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n\tvec4 r = roughness * c0 + c1;\n\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n}\n\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\n\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t// page 32, equation 26: E[window1]\n\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t// this is intended to be used on spot and point lights who are represented as luminous intensity\n\t// but who must be converted to luminous irradiance for surface lighting calculation\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\n\tif( cutoffDistance > 0.0 ) {\n\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\n\t}\n\n\treturn distanceFalloff;\n\n#else\n\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n#endif\n\n}\n\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\n\t// Original approximation by Christophe Schlick '94\n\t// float fresnel = pow( 1.0 - dotLH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n} // validated\n\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\n\t// See F_Schlick\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\n\treturn Fr * fresnel + F0;\n\n}\n\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (34)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is \"roughness squared\" in Disneys reparameterization\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\t// geometry term (normalized) = G(l)G(v) / 4(nl)(nv)\n\t// also see #12151\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\n\treturn 1.0 / ( gl * gv );\n\n} // validated\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\t// dotNL and dotNV are explicitly swapped. This is not a mistake.\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is \"roughness squared\" in Disneys reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// GGX Distribution, Schlick Fresnel, GGX-Smith Visibility\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat alpha = pow2( roughness ); // UE4's roughness\n\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\tfloat D = D_GGX( alpha, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// Rect Area Light\n\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\n// by Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\n// code: https://github.com/selfshadow/ltc_code/\n\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\n\tfloat dotNV = saturate( dot( N, V ) );\n\n\t// texture parameterized by sqrt( GGX alpha ) and sqrt( 1 - cos( theta ) )\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\treturn uv;\n\n}\n\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\n\t// Real-Time Area Lighting: a Journey from Research to Production (p.102)\n\t// An approximation of the form factor of a horizon-clipped rectangle.\n\n\tfloat l = length( f );\n\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n\n}\n\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\n\tfloat x = dot( v1, v2 );\n\n\tfloat y = abs( x );\n\n\t// rational polynomial approximation to theta / sin( theta ) / 2PI\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\n\treturn cross( v1, v2 ) * theta_sintheta;\n\n}\n\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\n\t// bail if point is on back side of plane of light\n\t// assumes ccw winding order of light vertices\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\n\t// construct orthonormal basis around N\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 ); // negated from paper; possibly due to a different handedness of world coordinate system\n\n\t// compute transform\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\n\t// transform rect\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\n\t// project rect onto sphere\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\n\t// calculate vector form factor\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\n\t// adjust for horizon clipping\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\n/*\n\t// alternate method of adjusting for horizon clipping (see referece)\n\t// refactoring required\n\tfloat len = length( vectorFormFactor );\n\tfloat z = vectorFormFactor.z / len;\n\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\n\t// tabulated horizon-clipped sphere, apparently...\n\tvec2 uv = vec2( z * 0.5 + 0.5, len );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\tfloat scale = texture2D( ltc_2, uv ).w;\n\n\tfloat result = len * scale;\n*/\n\n\treturn vec3( result );\n\n}\n\n// End Rect Area Light\n\n// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\n\treturn specularColor * brdf.x + brdf.y;\n\n} // validated\n\n// Fdez-Agera's \"Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting\"\n// Approximates multiscattering in order to preserve energy.\n// http://www.jcgt.org/published/0008/01/03/\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619; // 1/21\n\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {\n\n\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\n\t//float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\t//float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// source: http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\n\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n\n#if defined( USE_SHEEN )\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L94\nfloat D_Charlie(float roughness, float NoH) {\n\t// Estevez and Kulla 2017, \"Production Friendly Microfacet Sheen BRDF\"\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125); // 2^(-14/2), so sin2h^2 > 0 in fp16\n\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L136\nfloat V_Neubelt(float NoV, float NoL) {\n\t// Neubelt and Pettineo 2013, \"Crafting a Next-gen Material Pipeline for The Order: 1886\"\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\n\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n\n}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Bump Mapping Unparametrized Surfaces on the GPU by Morten S. Mikkelsen\n\t// http://api.unrealengine.com/attachments/Engine/Rendering/LightingAndShadows/BumpMappingWithoutTangentSpace/mm_sfgrad_bump.pdf\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#if NUM_CLIPPING_PLANES > 0\n\n\tvec4 plane;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\n\t}\n\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\n\t\tbool clipped = true;\n\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\n\t\t}\n\n\t\tif ( clipped ) discard;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#if NUM_CLIPPING_PLANES > 0\n\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n\n#endif\n`;\n","export default /* glsl */`\n#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif\n`;\n","export default /* glsl */`\n#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_COLOR\n\n\tvColor.xyz = color.xyz;\n\n#endif\n`;\n","export default /* glsl */`\n#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#ifndef saturate\n// <tonemapping_pars_fragment> may have defined saturate() already\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\n\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n}\n\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nmat3 transposeMat3( const in mat3 m ) {\n\n\tmat3 tmp;\n\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\n\treturn tmp;\n\n}\n\n// https://en.wikipedia.org/wiki/Relative_luminance\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\n\treturn dot( weights, color.rgb );\n\n}\n\nbool isPerspectiveMatrix( mat4 m ) {\n\n  return m[ 2 ][ 3 ] == - 1.0;\n\n}\n`;\n","export default /* glsl */`\n#ifdef ENVMAP_TYPE_CUBE_UV\n\n#define cubeUV_textureSize (1024.0)\n\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\n\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\t// Clamp the value to the max mip level counts. hard coded to 6 mips\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\n\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\t// float powScale = exp2(roughnessLevel + mipLevel);\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\t// float scale =  1.0 / exp2(roughnessLevel + 2.0 + mipLevel);\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\t// float mipOffset = 0.75*(1.0 - 1.0/exp2(mipLevel))/exp2(roughnessLevel);\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\n\tfloat rcpPowScale = 1.0 / powScale;\n\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\n\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\n\t// round to nearest mipmap if we are not interpolating.\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\n\t// Tri linear interpolation.\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\n\tvec4 result = mix(color10, color20, t);\n\n\treturn vec4(result.rgb, 1.0);\n}\n\n#endif\n`;\n","export default /* glsl */`\nvec3 transformedNormal = objectNormal;\n\n#ifdef USE_INSTANCING\n\n\ttransformedNormal = mat3( instanceMatrix ) * transformedNormal;\n\n#endif\n\ntransformedNormal = normalMatrix * transformedNormal;\n\n#ifdef FLIP_SIDED\n\n\ttransformedNormal = - transformedNormal;\n\n#endif\n\n#ifdef USE_TANGENT\n\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\n\t#ifdef FLIP_SIDED\n\n\t\ttransformedTangent = - transformedTangent;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n`;\n","export default /* glsl */`\ngl_FragColor = linearToOutputTexel( gl_FragColor );\n`;\n","export default /* glsl */`\n// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\n\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\n\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\n\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\n\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\n\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\n\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\n\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n//  return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\n\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\n\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\n\n// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\n\n// M matrix, for encoding\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\n\n// Inverse M matrix, for decoding\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t}  else {\n\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\n\t\t}\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\tvec2 sampleUV;\n\n\t\treflectVec = normalize( reflectVec );\n\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\treflectVec = normalize( reflectVec );\n\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\n\t#else\n\n\t\tvec4 envColor = vec4( 0.0 );\n\n\t#endif\n\n\tenvColor = envMapTexelToLinear( envColor );\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_ENVMAP )\n\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\n\tvec3 getLightProbeIndirectIrradiance( /*const in SpecularLightProbe specularLightProbe,*/ const in GeometricContext geometry, const in int maxMIPLevel ) {\n\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\n\t\t\t// TODO: replace with properly filtered cubemaps and access the irradiance LOD level, be it the last LOD level\n\t\t\t// of a specular cubemap, or just the default level of a specially created irradiance cubemap.\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#else\n\n\t\t\t\t// force the bias high to get the last LOD level as it is the most blurred.\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\n\t\t#else\n\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\n\t\t#endif\n\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\n\t}\n\n\t// Trowbridge-Reitz distribution to Mip level, following the logic of http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\n\t\t// clamp to allowable LOD ranges.\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\n\t}\n\n\tvec3 getLightProbeIndirectRadiance( /*const in SpecularLightProbe specularLightProbe,*/ const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\n\t\t  // Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\n\t\t#else\n\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\n\t\t#endif\n\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );\n\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#endif\n\n\t\treturn envMapColor.rgb * envMapIntensity;\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvWorldPosition = worldPosition.xyz;\n\n\t#else\n\n\t\tvec3 cameraToVertex;\n\n\t\tif ( isOrthographic ) { \n\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t\t}\n\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_FOG\n\n\tfogDepth = -mvPosition.z;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_FOG\n\n\tvarying float fogDepth;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_FOG\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\n\t#endif\n\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef TOON\n\n\tuniform sampler2D gradientMap;\n\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\n\t\t// dotNL will be from -1.0 to 1.0\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\n\t\t#ifdef USE_GRADIENTMAP\n\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\n\t\t#else\n\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\n\t\t#endif\n\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_LIGHTMAP\n\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity; // factor of PI should not be present; included here to prevent breakage\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif\n`;\n","export default /* glsl */`\nvec3 diffuse = vec3( 1.0 );\n\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\n\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\n\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\n\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n\n#if NUM_POINT_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if NUM_SPOT_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\t}\n\n#endif\n\n/*\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\t// TODO (abelnation): implement\n\n\t}\n\n#endif\n*/\n\n#if NUM_DIR_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if NUM_HEMI_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\n\t\t#endif\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\nuniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\n\n// get the irradiance (radiance convolved with cosine lobe) at the point 'normal' on the unit sphere\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\n\t// normal is assumed to have unit length\n\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\n\t// band 0\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\n\t// band 1\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\n\t// band 2\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\n\treturn result;\n\n}\n\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\n\treturn irradiance;\n\n}\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\n\tvec3 irradiance = ambientLightColor;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI;\n\n\t#endif\n\n\treturn irradiance;\n\n}\n\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\n\t}\n\n#endif\n\n\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n\n#if NUM_SPOT_LIGHTS > 0\n\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\n\t\tif ( angleCos > spotLight.coneCos ) {\n\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\n\t\t} else {\n\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\n\t\t}\n\t}\n\n#endif\n\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\n\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\n\t// BRDF approximation Texture is 64x64\n\tuniform sampler2D ltc_1; // RGBA Float\n\tuniform sampler2D ltc_2; // RGBA Float\n\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n\n#endif\n\n\n#if NUM_HEMI_LIGHTS > 0\n\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tirradiance *= PI;\n\n\t\t#endif\n\n\t\treturn irradiance;\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\nBlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n`;\n","export default /* glsl */`\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n\nstruct BlinnPhongMaterial {\n\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n\n};\n\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t#ifdef TOON\n\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\t#else\n\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\n\t#endif\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n\n#define Material_LightProbeLOD( material )\t(0)\n`;\n","export default /* glsl */`\nPhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n\n#ifdef REFLECTIVITY\n\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\n#else\n\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n\n#endif\n\n#ifdef CLEARCOAT\n\n\tmaterial.clearcoat = saturate( clearcoat ); // Burley clearcoat model\n\tmaterial.clearcoatRoughness = clamp( clearcoatRoughness, 0.04, 1.0 );\n\n#endif\n#ifdef USE_SHEEN\n\n\tmaterial.sheenColor = sheen;\n\n#endif\n`;\n","export default /* glsl */`\nstruct PhysicalMaterial {\n\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n\n};\n\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\n\n// Clear coat directional hemishperical reflectance (this approximation should be improved)\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n\n}\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight; // counterclockwise; light shines in local neg z direction\n\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\n\t\t// LTC Fresnel Approximation by Stephen Hill\n\t\t// http://blog.selfshadow.com/publications/s2016-advances/s2016_ltc_fresnel.pdf\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\n\t}\n\n#endif\n\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tccIrradiance *= PI; // punctual light\n\n\t\t#endif\n\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\n\t// Both indirect specular and indirect diffuse light accumulate here\n\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n\n// ref: https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n\n}\n`;\n","export default /* glsl */`\n/**\n * This is a template that can be used to light a material, it uses pluggable\n * RenderEquations (RE)for specific lighting scenarios.\n *\n * Instructions for use:\n * - Ensure that both RE_Direct, RE_IndirectDiffuse and RE_IndirectSpecular are defined\n * - If you have defined an RE_IndirectSpecular, you need to also provide a Material_LightProbeLOD. <---- ???\n * - Create a material parameter that is to be passed as the third parameter to your lighting functions.\n *\n * TODO:\n * - Add area light support.\n * - Add sphere light support.\n * - Add diffuse light probe (irradiance cubemap) support.\n */\n\nGeometricContext geometry;\n\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\n#ifdef CLEARCOAT\n\n\tgeometry.clearcoatNormal = clearcoatNormal;\n\n#endif\n\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( pointLight.shadow, directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( spotLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tDirectionalLight directionalLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( directionalLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\n\tRectAreaLight rectAreaLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if defined( RE_IndirectDiffuse )\n\n\tvec3 iblIrradiance = vec3( 0.0 );\n\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t}\n\n\t#endif\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( RE_IndirectDiffuse )\n\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tlightMapIrradiance *= PI; // factor of PI should not be present; included here to prevent breakage\n\n\t\t#endif\n\n\t\tirradiance += lightMapIrradiance;\n\n\t#endif\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( /*lightProbe,*/ geometry, maxMipLevel );\n\n\t#endif\n\n#endif\n\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\n\tradiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\n\t#ifdef CLEARCOAT\n\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( RE_IndirectDiffuse )\n\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\t// Doing a strict comparison with == 1.0 can cause noise artifacts\n\t// on some platforms. See issue #17623.\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\n\t#else\n\n\t\tuniform float logDepthBufFC;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\n\t#else\n\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\n\t\t\tgl_Position.z *= gl_Position.w;\n\n\t\t}\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\n#endif\n\n#ifdef USE_MAP\n\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tuniform mat3 uvTransform;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n`;\n","export default /* glsl */`\nfloat metalnessFactor = metalness;\n\n#ifdef USE_METALNESSMAP\n\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\n\t// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tmetalnessFactor *= texelMetalness.b;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_METALNESSMAP\n\n\tuniform sampler2D metalnessMap;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MORPHNORMALS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in normal = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MORPHTARGETS\n\n\tuniform float morphTargetBaseInfluence;\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MORPHTARGETS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in position = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef FLAT_SHADED\n\n\t// Workaround for Adreno/Nexus5 not able able to do dFdx( vViewPosition ) ...\n\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#else\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\t#ifdef USE_TANGENT\n\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n\n// non perturbed normal for clearcoat among others\n\nvec3 geometryNormal = normal;\n\n`;\n","export default /* glsl */`\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals\n\n\t#ifdef FLIP_SIDED\n\n\t\tnormal = - normal;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\tnormal = normalize( normalMatrix * normal );\n\n#elif defined( TANGENTSPACE_NORMALMAP )\n\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tnormal = normalize( vTBN * mapN );\n\n\t#else\n\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\n\t#endif\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n#endif\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tuniform mat3 normalMatrix;\n\n#endif\n\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\n\t// Per-Pixel Tangent Space Normal Mapping\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tmat3 tsn = mat3( S, T, N );\n\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef CLEARCOAT\n\n\tvec3 clearcoatNormal = geometryNormal;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\n\t#else\n\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n\n#endif\n`;\n","export default /* glsl */`\nvec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\n\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\n\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\n\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\n\nconst float ShiftRight8 = 1. / 256.;\n\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\n\treturn r * PackUpscale;\n}\n\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\n\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpack2HalfToRGBA( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\n\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\n\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\n\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n`;\n","export default /* glsl */`\n#ifdef PREMULTIPLIED_ALPHA\n\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\n\tgl_FragColor.rgb *= gl_FragColor.a;\n\n#endif\n`;\n","export default /* glsl */`\nvec4 mvPosition = vec4( transformed, 1.0 );\n\n#ifdef USE_INSTANCING\n\n\tmvPosition = instanceMatrix * mvPosition;\n\n#endif\n\nmvPosition = modelViewMatrix * mvPosition;\n\ngl_Position = projectionMatrix * mvPosition;\n`;\n","export default /* glsl */`\n#ifdef DITHERING\n\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef DITHERING\n\n\t// based on https://www.shadertoy.com/view/MslGR8\n\tvec3 dithering( vec3 color ) {\n\t\t//Calculate grid position\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\n\t\t//Shift the individual colors differently, thus making it even harder to see the dithering pattern\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\n\t\t//modify shift acording to grid position.\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\n\t\t//shift the color by dither_shift\n\t\treturn color + dither_shift_RGB;\n\t}\n\n#endif\n`;\n","export default /* glsl */`\nfloat roughnessFactor = roughness;\n\n#ifdef USE_ROUGHNESSMAP\n\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\n\t// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\troughnessFactor *= texelRoughness.g;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ROUGHNESSMAP\n\n\tuniform sampler2D roughnessMap;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): create uniforms for area light shadows\n\n\t#endif\n\t*/\n\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n\t}\n\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n\t\treturn unpack2HalfToRGBA( texture2D( shadow, uv ) );\n\n\t}\n\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n\t\tfloat occlusion = 1.0;\n\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\n\t\tfloat hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n\t\tif (hard_shadow != 1.0 ) {\n\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n\t\t}\n\t\treturn occlusion;\n\n\t}\n\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;\n\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\n\t\tvec2 f = fract( uv * size + 0.5 );\n\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\n\t\treturn c;\n\n\t}\n\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n\t\tfloat shadow = 1.0;\n\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\n\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#else // no percentage-closer filtering:\n\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#endif\n\n\t\t}\n\n\t\treturn shadow;\n\n\t}\n\n\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n\t// vector suitable for 2D texture mapping. This code uses the following layout for the\n\t// 2D texture:\n\t//\n\t// xzXZ\n\t//  y Y\n\t//\n\t// Y - Positive y direction\n\t// y - Negative y direction\n\t// X - Positive x direction\n\t// x - Negative x direction\n\t// Z - Positive z direction\n\t// z - Negative z direction\n\t//\n\t// Source and test bed:\n\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\t\t// Number of texels to avoid at the edge of each square\n\n\t\tvec3 absV = abs( v );\n\n\t\t// Intersect unit cube\n\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\n\t\t// Apply scale to avoid seams\n\n\t\t// two texels less per square (one texel will do for NEAREST)\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\t\t// Unwrap\n\n\t\t// space: -1 ... 1 range for each square\n\t\t//\n\t\t// #X##\t\tdim    := ( 4 , 2 )\n\t\t//  # #\t\tcenter := ( 1 , 1 )\n\n\t\tvec2 planar = v.xy;\n\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\tif ( absV.z >= almostOne ) {\n\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t}\n\n\t\t// Transform to UV space\n\n\t\t// scale := 0.5 / dim\n\t\t// translate := ( center + 0.5 ) / dim\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t}\n\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n\t\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\n\t\t// the vector from the light to the world-space position of the fragment.\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\n\t\t// dp = normalized distance from light to fragment position\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n\t\tdp += shadowBias;\n\n\t\t// bd3D = base direction 3D\n\t\tvec3 bd3D = normalize( lightToPosition );\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering\n\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\n\t\t#endif\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): uniforms for area light shadows\n\n\t#endif\n\t*/\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update vAreaShadowCoord with area light info\n\n\t#endif\n\t*/\n\n#endif\n`;\n","export default /* glsl */`\nfloat getShadowMask() {\n\n\tfloat shadow = 1.0;\n\n\t#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\tDirectionalLight directionalLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= all( bvec2( directionalLight.shadow, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\n\t}\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\tSpotLight spotLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= all( bvec2( spotLight.shadow, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\n\t}\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\tPointLight pointLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= all( bvec2( pointLight.shadow, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\n\t}\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update shadow for Area light\n\n\t#endif\n\t*/\n\n\t#endif\n\n\treturn shadow;\n\n}\n`;\n","export default /* glsl */`\n#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n\t#ifdef USE_TANGENT\n\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\nfloat specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( TONE_MAPPING )\n\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n\n#endif\n`;\n","export default /* glsl */`\n#ifndef saturate\n// <common> may have defined saturate() already\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\n\n// exposure only\nvec3 LinearToneMapping( vec3 color ) {\n\n\treturn toneMappingExposure * color;\n\n}\n\n// source: https://www.cs.utah.edu/~reinhard/cdrom/\nvec3 ReinhardToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\n\t// John Hable's filmic operator from Uncharted 2 video game\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\n\t// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n\n}\n\n// source: https://knarkowicz.wordpress.com/2016/01/06/aces-filmic-tone-mapping-curve/\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n\n}\n`;\n","export default /* glsl */`\n#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\n\tvarying vec2 vUv;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_UV\n\n\t#ifdef UVS_VERTEX_ONLY\n\n\t\tvec2 vUv;\n\n\t#else\n\n\t\tvarying vec2 vUv;\n\n\t#endif\n\n\tuniform mat3 uvTransform;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_UV\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = uv2;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t#ifdef USE_INSTANCING\n\n\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t#endif\n\n\tworldPosition = modelMatrix * worldPosition;\n\n#endif\n`;\n","export default /* glsl */`\nuniform sampler2D t2D;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvec4 texColor = texture2D( t2D, vUv );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n`;\n","export default /* glsl */`\nvarying vec2 vUv;\nuniform mat3 uvTransform;\n\nvoid main() {\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n\n}\n`;\n","export default /* glsl */`\nuniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\n\nvarying vec3 vWorldDirection;\n\nvoid main() {\n\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n`;\n","export default /* glsl */`\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n}\n`;\n","export default /* glsl */`\n#if DEPTH_PACKING == 3200\n\n\tuniform float opacity;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tdiffuseColor.a = opacity;\n\n\t#endif\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\t#include <logdepthbuf_fragment>\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\n\t#elif DEPTH_PACKING == 3201\n\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\n\t#endif\n\n}\n`;\n","export default /* glsl */`\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n}\n`;\n","export default /* glsl */`\n#define DISTANCE\n\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main () {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist ); // clamp to [ 0, 1 ]\n\n\tgl_FragColor = packDepthToRGBA( dist );\n\n}\n`;\n","export default /* glsl */`\n#define DISTANCE\n\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvWorldPosition = worldPosition.xyz;\n\n}\n`;\n","export default /* glsl */`\nuniform sampler2D tEquirect;\n\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvec3 direction = normalize( vWorldDirection );\n\n\tvec2 sampleUV;\n\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n`;\n","export default /* glsl */`\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform float opacity;\n\nuniform float dashSize;\nuniform float totalSize;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\n\t\tdiscard;\n\n\t}\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\n\toutgoingLight = diffuseColor.rgb; // simple shader\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n`;\n","export default /* glsl */`\nuniform float scale;\nattribute float lineDistance;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\n\tvLineDistance = scale * lineDistance;\n\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n`;\n","export default /* glsl */`\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_ENVMAP\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\n\t#endif\n\n\t#include <lightmap_fragment>\n\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t#else\n\n\t\treflectedLight.directDiffuse = vLightFront;\n\n\t#endif\n\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n`;\n","export default /* glsl */`\n#define LAMBERT\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n`;\n","export default /* glsl */`\n#define MATCAP\n\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\n\t#ifdef USE_MATCAP\n\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\n\t#else\n\n\t\tvec4 matcapColor = vec4( 1.0 );\n\n\t#endif\n\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n`;\n","export default /* glsl */`\n#define MATCAP\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\t\tvNormal = normalize( transformedNormal );\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n}\n`;\n","export default /* glsl */`\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n`;\n","export default /* glsl */`\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\n#define STANDARD\n\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t// this is a stub for the transparency model\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n`;\n","export default /* glsl */`\n#define STANDARD\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\n#define NORMAL\n\nuniform float opacity;\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\n}\n`;\n","export default /* glsl */`\n#define NORMAL\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvViewPosition = - mvPosition.xyz;\n\n#endif\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n`;\n","export default /* glsl */`\nuniform float size;\nuniform float scale;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\n\tgl_PointSize = size;\n\n\t#ifdef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\n\t#endif\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 color;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n\nvoid main() {\n\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\n\t#include <fog_fragment>\n\n}\n`;\n","export default /* glsl */`\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n\nvoid main() {\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n`;\n","export default /* glsl */`\nuniform float rotation;\nuniform vec2 center;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\t#ifndef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\n\t#endif\n\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\n\tmvPosition.xy += rotatedPosition;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","/**\n * Uniform Utilities\n */\n\nexport function cloneUniforms( src ) {\n\n\tvar dst = {};\n\n\tfor ( var u in src ) {\n\n\t\tdst[ u ] = {};\n\n\t\tfor ( var p in src[ u ] ) {\n\n\t\t\tvar property = src[ u ][ p ];\n\n\t\t\tif ( property && ( property.isColor ||\n\t\t\t\tproperty.isMatrix3 || property.isMatrix4 ||\n\t\t\t\tproperty.isVector2 || property.isVector3 || property.isVector4 ||\n\t\t\t\tproperty.isTexture ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.clone();\n\n\t\t\t} else if ( Array.isArray( property ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.slice();\n\n\t\t\t} else {\n\n\t\t\t\tdst[ u ][ p ] = property;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn dst;\n\n}\n\nexport function mergeUniforms( uniforms ) {\n\n\tvar merged = {};\n\n\tfor ( var u = 0; u < uniforms.length; u ++ ) {\n\n\t\tvar tmp = cloneUniforms( uniforms[ u ] );\n\n\t\tfor ( var p in tmp ) {\n\n\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t}\n\n\t}\n\n\treturn merged;\n\n}\n\n// Legacy\n\nvar UniformsUtils = { clone: cloneUniforms, merge: mergeUniforms };\n\nexport { UniformsUtils };\n","import { Color } from '../../math/Color.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Matrix3 } from '../../math/Matrix3.js';\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nvar UniformsLib = {\n\n\tcommon: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\tuvTransform: { value: new Matrix3() },\n\n\t\talphaMap: { value: null },\n\n\t},\n\n\tspecularmap: {\n\n\t\tspecularMap: { value: null },\n\n\t},\n\n\tenvmap: {\n\n\t\tenvMap: { value: null },\n\t\tflipEnvMap: { value: - 1 },\n\t\treflectivity: { value: 1.0 },\n\t\trefractionRatio: { value: 0.98 },\n\t\tmaxMipLevel: { value: 0 }\n\n\t},\n\n\taomap: {\n\n\t\taoMap: { value: null },\n\t\taoMapIntensity: { value: 1 }\n\n\t},\n\n\tlightmap: {\n\n\t\tlightMap: { value: null },\n\t\tlightMapIntensity: { value: 1 }\n\n\t},\n\n\temissivemap: {\n\n\t\temissiveMap: { value: null }\n\n\t},\n\n\tbumpmap: {\n\n\t\tbumpMap: { value: null },\n\t\tbumpScale: { value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\tnormalMap: { value: null },\n\t\tnormalScale: { value: new Vector2( 1, 1 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\tdisplacementMap: { value: null },\n\t\tdisplacementScale: { value: 1 },\n\t\tdisplacementBias: { value: 0 }\n\n\t},\n\n\troughnessmap: {\n\n\t\troughnessMap: { value: null }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\tmetalnessMap: { value: null }\n\n\t},\n\n\tgradientmap: {\n\n\t\tgradientMap: { value: null }\n\n\t},\n\n\tfog: {\n\n\t\tfogDensity: { value: 0.00025 },\n\t\tfogNear: { value: 1 },\n\t\tfogFar: { value: 2000 },\n\t\tfogColor: { value: new Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tlightProbe: { value: [] },\n\n\t\tdirectionalLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tcolor: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tdirectionalShadowMap: { value: [] },\n\t\tdirectionalShadowMatrix: { value: [] },\n\n\t\tspotLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdirection: {},\n\t\t\tdistance: {},\n\t\t\tconeCos: {},\n\t\t\tpenumbraCos: {},\n\t\t\tdecay: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tspotShadowMap: { value: [] },\n\t\tspotShadowMatrix: { value: [] },\n\n\t\tpointLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdecay: {},\n\t\t\tdistance: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {},\n\t\t\tshadowCameraNear: {},\n\t\t\tshadowCameraFar: {}\n\t\t} },\n\n\t\tpointShadowMap: { value: [] },\n\t\tpointShadowMatrix: { value: [] },\n\n\t\themisphereLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tskyColor: {},\n\t\t\tgroundColor: {}\n\t\t} },\n\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\trectAreaLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\twidth: {},\n\t\t\theight: {}\n\t\t} }\n\n\t},\n\n\tpoints: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t},\n\n\tsprite: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tcenter: { value: new Vector2( 0.5, 0.5 ) },\n\t\trotation: { value: 0.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t}\n\n};\n\nexport { UniformsLib };\n","import { ShaderChunk } from './ShaderChunk.js';\nimport { mergeUniforms } from './UniformsUtils.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { UniformsLib } from './UniformsLib.js';\nimport { Color } from '../../math/Color.js';\nimport { Matrix3 } from '../../math/Matrix3.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n */\n\nvar ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\n\tlambert: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\n\tphong: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.gradientmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\n\tstandard: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.roughnessmap,\n\t\t\tUniformsLib.metalnessmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\troughness: { value: 0.5 },\n\t\t\t\tmetalness: { value: 0.5 },\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t},\n\n\tmatcap: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tmatcap: { value: null }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshmatcap_vert,\n\t\tfragmentShader: ShaderChunk.meshmatcap_frag\n\n\t},\n\n\tpoints: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.points,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\n\tdashed: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tscale: { value: 1 },\n\t\t\t\tdashSize: { value: 1 },\n\t\t\t\ttotalSize: { value: 2 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\n\tdepth: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.depth_vert,\n\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t},\n\n\tnormal: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.normal_vert,\n\t\tfragmentShader: ShaderChunk.normal_frag\n\n\t},\n\n\tsprite: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.sprite,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.sprite_vert,\n\t\tfragmentShader: ShaderChunk.sprite_frag\n\n\t},\n\n\tbackground: {\n\n\t\tuniforms: {\n\t\t\tuvTransform: { value: new Matrix3() },\n\t\t\tt2D: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.background_vert,\n\t\tfragmentShader: ShaderChunk.background_frag\n\n\t},\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\tcube: {\n\n\t\tuniforms: {\n\t\t\ttCube: { value: null },\n\t\t\ttFlip: { value: - 1 },\n\t\t\topacity: { value: 1.0 }\n\t\t},\n\n\t\tvertexShader: ShaderChunk.cube_vert,\n\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t},\n\n\tequirect: {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t},\n\n\tdistanceRGBA: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\treferencePosition: { value: new Vector3() },\n\t\t\t\tnearDistance: { value: 1 },\n\t\t\t\tfarDistance: { value: 1000 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t},\n\n\tshadow: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.lights,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tcolor: { value: new Color( 0x00000 ) },\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t},\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.shadow_vert,\n\t\tfragmentShader: ShaderChunk.shadow_frag\n\n\t}\n\n};\n\nShaderLib.physical = {\n\n\tuniforms: mergeUniforms( [\n\t\tShaderLib.standard.uniforms,\n\t\t{\n\t\t\ttransparency: { value: 0 },\n\t\t\tclearcoat: { value: 0 },\n\t\t\tclearcoatRoughness: { value: 0 },\n\t\t\tsheen: { value: new Color( 0x000000 ) },\n\t\t\tclearcoatNormalScale: { value: new Vector2( 1, 1 ) },\n\t\t\tclearcoatNormalMap: { value: null },\n\t\t}\n\t] ),\n\n\tvertexShader: ShaderChunk.meshphysical_vert,\n\tfragmentShader: ShaderChunk.meshphysical_frag\n\n};\n\n\nexport { ShaderLib };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLAnimation() {\n\n\tvar context = null;\n\tvar isAnimating = false;\n\tvar animationLoop = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tif ( isAnimating === false ) return;\n\n\t\tanimationLoop( time, frame );\n\n\t\tcontext.requestAnimationFrame( onAnimationFrame );\n\n\t}\n\n\treturn {\n\n\t\tstart: function () {\n\n\t\t\tif ( isAnimating === true ) return;\n\t\t\tif ( animationLoop === null ) return;\n\n\t\t\tcontext.requestAnimationFrame( onAnimationFrame );\n\n\t\t\tisAnimating = true;\n\n\t\t},\n\n\t\tstop: function () {\n\n\t\t\tisAnimating = false;\n\n\t\t},\n\n\t\tsetAnimationLoop: function ( callback ) {\n\n\t\t\tanimationLoop = callback;\n\n\t\t},\n\n\t\tsetContext: function ( value ) {\n\n\t\t\tcontext = value;\n\n\t\t}\n\n\t};\n\n}\n\nexport { WebGLAnimation };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLAttributes( gl ) {\n\n\tvar buffers = new WeakMap();\n\n\tfunction createBuffer( attribute, bufferType ) {\n\n\t\tvar array = attribute.array;\n\t\tvar usage = attribute.usage;\n\n\t\tvar buffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\t\tgl.bufferData( bufferType, array, usage );\n\n\t\tattribute.onUploadCallback();\n\n\t\tvar type = gl.FLOAT;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = gl.FLOAT;\n\n\t\t} else if ( array instanceof Float64Array ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.' );\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\ttype = gl.UNSIGNED_SHORT;\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = gl.SHORT;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = gl.UNSIGNED_INT;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = gl.INT;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = gl.BYTE;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = gl.UNSIGNED_BYTE;\n\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: buffer,\n\t\t\ttype: type,\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\tversion: attribute.version\n\t\t};\n\n\t}\n\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\tvar array = attribute.array;\n\t\tvar updateRange = attribute.updateRange;\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\tif ( updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t} else {\n\n\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\tupdateRange.count = - 1; // reset range\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction get( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\treturn buffers.get( attribute );\n\n\t}\n\n\tfunction remove( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tvar data = buffers.get( attribute );\n\n\t\tif ( data ) {\n\n\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\tbuffers.delete( attribute );\n\n\t\t}\n\n\t}\n\n\tfunction update( attribute, bufferType ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tvar data = buffers.get( attribute );\n\n\t\tif ( data === undefined ) {\n\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\n\n\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\tdata.version = attribute.version;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update\n\n\t};\n\n}\n\n\nexport { WebGLAttributes };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\n\n// PlaneGeometry\n\nfunction PlaneGeometry( width, height, widthSegments, heightSegments ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'PlaneGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\tthis.fromBufferGeometry( new PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\n\tthis.mergeVertices();\n\n}\n\nPlaneGeometry.prototype = Object.create( Geometry.prototype );\nPlaneGeometry.prototype.constructor = PlaneGeometry;\n\n// PlaneBufferGeometry\n\nfunction PlaneBufferGeometry( width, height, widthSegments, heightSegments ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'PlaneBufferGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\twidth = width || 1;\n\theight = height || 1;\n\n\tvar width_half = width / 2;\n\tvar height_half = height / 2;\n\n\tvar gridX = Math.floor( widthSegments ) || 1;\n\tvar gridY = Math.floor( heightSegments ) || 1;\n\n\tvar gridX1 = gridX + 1;\n\tvar gridY1 = gridY + 1;\n\n\tvar segment_width = width / gridX;\n\tvar segment_height = height / gridY;\n\n\tvar ix, iy;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// generate vertices, normals and uvs\n\n\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\tvar y = iy * segment_height - height_half;\n\n\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\tvar x = ix * segment_width - width_half;\n\n\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\tuvs.push( ix / gridX );\n\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\tvar a = ix + gridX1 * iy;\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nPlaneBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nPlaneBufferGeometry.prototype.constructor = PlaneBufferGeometry;\n\n\nexport { PlaneGeometry, PlaneBufferGeometry };\n","export default /* glsl */`\nvoid main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n`;\n","export default /* glsl */`\nvoid main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}\n`;\n","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nimport { Material } from './Material.js';\nimport { cloneUniforms } from '../renderers/shaders/UniformsUtils.js';\n\nimport default_vertex from '../renderers/shaders/ShaderChunk/default_vertex.glsl.js';\nimport default_fragment from '../renderers/shaders/ShaderChunk/default_fragment.glsl.js';\n\nfunction ShaderMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShaderMaterial';\n\n\tthis.defines = {};\n\tthis.uniforms = {};\n\n\tthis.vertexShader = default_vertex;\n\tthis.fragmentShader = default_fragment;\n\n\tthis.linewidth = 1;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false; // set to use scene fog\n\tthis.lights = false; // set to use scene lights\n\tthis.clipping = false; // set to use user-defined clipping planes\n\n\tthis.skinning = false; // set to use skinning attribute streams\n\tthis.morphTargets = false; // set to use morph targets\n\tthis.morphNormals = false; // set to use morph normals\n\n\tthis.extensions = {\n\t\tderivatives: false, // set to use derivatives\n\t\tfragDepth: false, // set to use fragment depth values\n\t\tdrawBuffers: false, // set to use draw buffers\n\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t};\n\n\t// When rendered geometry doesn't include these attributes but the material does,\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\tthis.defaultAttributeValues = {\n\t\t'color': [ 1, 1, 1 ],\n\t\t'uv': [ 0, 0 ],\n\t\t'uv2': [ 0, 0 ]\n\t};\n\n\tthis.index0AttributeName = undefined;\n\tthis.uniformsNeedUpdate = false;\n\n\tif ( parameters !== undefined ) {\n\n\t\tif ( parameters.attributes !== undefined ) {\n\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n}\n\nShaderMaterial.prototype = Object.create( Material.prototype );\nShaderMaterial.prototype.constructor = ShaderMaterial;\n\nShaderMaterial.prototype.isShaderMaterial = true;\n\nShaderMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.fragmentShader = source.fragmentShader;\n\tthis.vertexShader = source.vertexShader;\n\n\tthis.uniforms = cloneUniforms( source.uniforms );\n\n\tthis.defines = Object.assign( {}, source.defines );\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.lights = source.lights;\n\tthis.clipping = source.clipping;\n\n\tthis.skinning = source.skinning;\n\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.extensions = source.extensions;\n\n\treturn this;\n\n};\n\nShaderMaterial.prototype.toJSON = function ( meta ) {\n\n\tvar data = Material.prototype.toJSON.call( this, meta );\n\n\tdata.uniforms = {};\n\n\tfor ( var name in this.uniforms ) {\n\n\t\tvar uniform = this.uniforms[ name ];\n\t\tvar value = uniform.value;\n\n\t\tif ( value && value.isTexture ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 't',\n\t\t\t\tvalue: value.toJSON( meta ).uuid\n\t\t\t};\n\n\t\t} else if ( value && value.isColor ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'c',\n\t\t\t\tvalue: value.getHex()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector2 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v2',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector3 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v3',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector4 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v4',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isMatrix3 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'm3',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isMatrix4 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'm4',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\tvalue: value\n\t\t\t};\n\n\t\t\t// note: the array variants v2v, v3v, v4v, m4v and tv are not supported so far\n\n\t\t}\n\n\t}\n\n\tif ( Object.keys( this.defines ).length > 0 ) data.defines = this.defines;\n\n\tdata.vertexShader = this.vertexShader;\n\tdata.fragmentShader = this.fragmentShader;\n\n\tvar extensions = {};\n\n\tfor ( var key in this.extensions ) {\n\n\t\tif ( this.extensions[ key ] === true ) extensions[ key ] = true;\n\n\t}\n\n\tif ( Object.keys( extensions ).length > 0 ) data.extensions = extensions;\n\n\treturn data;\n\n};\n\n\nexport { ShaderMaterial };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { BackSide, FrontSide } from '../../constants.js';\nimport { BoxBufferGeometry } from '../../geometries/BoxGeometry.js';\nimport { PlaneBufferGeometry } from '../../geometries/PlaneGeometry.js';\nimport { ShaderMaterial } from '../../materials/ShaderMaterial.js';\nimport { Color } from '../../math/Color.js';\nimport { Mesh } from '../../objects/Mesh.js';\nimport { ShaderLib } from '../shaders/ShaderLib.js';\nimport { cloneUniforms } from '../shaders/UniformsUtils.js';\n\nfunction WebGLBackground( renderer, state, objects, premultipliedAlpha ) {\n\n\tvar clearColor = new Color( 0x000000 );\n\tvar clearAlpha = 0;\n\n\tvar planeMesh;\n\tvar boxMesh;\n\t// Store the current background texture and its `version`\n\t// so we can recompile the material accordingly.\n\tvar currentBackground = null;\n\tvar currentBackgroundVersion = 0;\n\n\tfunction render( renderList, scene, camera, forceClear ) {\n\n\t\tvar background = scene.background;\n\n\t\t// Ignore background in AR\n\t\t// TODO: Reconsider this.\n\n\t\tvar vr = renderer.vr;\n\t\tvar session = vr.getSession && vr.getSession();\n\n\t\tif ( session && session.environmentBlendMode === 'additive' ) {\n\n\t\t\tbackground = null;\n\n\t\t}\n\n\t\tif ( background === null ) {\n\n\t\t\tsetClear( clearColor, clearAlpha );\n\t\t\tcurrentBackground = null;\n\t\t\tcurrentBackgroundVersion = 0;\n\n\t\t} else if ( background && background.isColor ) {\n\n\t\t\tsetClear( background, 1 );\n\t\t\tforceClear = true;\n\t\t\tcurrentBackground = null;\n\t\t\tcurrentBackgroundVersion = 0;\n\n\t\t}\n\n\t\tif ( renderer.autoClear || forceClear ) {\n\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background && ( background.isCubeTexture || background.isWebGLRenderTargetCube ) ) {\n\n\t\t\tif ( boxMesh === undefined ) {\n\n\t\t\t\tboxMesh = new Mesh(\n\t\t\t\t\tnew BoxBufferGeometry( 1, 1, 1 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\ttype: 'BackgroundCubeMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.cube.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\n\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'normal' );\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'uv' );\n\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\n\n\t\t\t\t};\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( boxMesh.material, 'map', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.tCube.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( boxMesh );\n\n\t\t\t}\n\n\t\t\tvar texture = background.isWebGLRenderTargetCube ? background.texture : background;\n\t\t\tboxMesh.material.uniforms.tCube.value = texture;\n\t\t\tboxMesh.material.uniforms.tFlip.value = ( background.isWebGLRenderTargetCube ) ? 1 : - 1;\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t     currentBackgroundVersion !== texture.version ) {\n\n\t\t\t\tboxMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = texture.version;\n\n\t\t\t}\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( boxMesh, boxMesh.geometry, boxMesh.material, 0, 0, null );\n\n\t\t} else if ( background && background.isTexture ) {\n\n\t\t\tif ( planeMesh === undefined ) {\n\n\t\t\t\tplaneMesh = new Mesh(\n\t\t\t\t\tnew PlaneBufferGeometry( 2, 2 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\ttype: 'BackgroundMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.background.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.background.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.background.fragmentShader,\n\t\t\t\t\t\tside: FrontSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tplaneMesh.geometry.deleteAttribute( 'normal' );\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( planeMesh.material, 'map', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.t2D.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( planeMesh );\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.t2D.value = background;\n\n\t\t\tif ( background.matrixAutoUpdate === true ) {\n\n\t\t\t\tbackground.updateMatrix();\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.uvTransform.value.copy( background.matrix );\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\t   currentBackgroundVersion !== background.version ) {\n\n\t\t\t\tplaneMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\n\t\t\t}\n\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( planeMesh, planeMesh.geometry, planeMesh.material, 0, 0, null );\n\n\t\t}\n\n\t}\n\n\tfunction setClear( color, alpha ) {\n\n\t\tstate.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\n\n\t}\n\n\treturn {\n\n\t\tgetClearColor: function () {\n\n\t\t\treturn clearColor;\n\n\t\t},\n\t\tsetClearColor: function ( color, alpha ) {\n\n\t\t\tclearColor.set( color );\n\t\t\tclearAlpha = alpha !== undefined ? alpha : 1;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\tgetClearAlpha: function () {\n\n\t\t\treturn clearAlpha;\n\n\t\t},\n\t\tsetClearAlpha: function ( alpha ) {\n\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\trender: render\n\n\t};\n\n}\n\n\nexport { WebGLBackground };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\n\tvar mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawArrays( mode, start, count );\n\n\t\tinfo.update( count, mode );\n\n\t}\n\n\tfunction renderInstances( geometry, start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tvar extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawArraysInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawArraysInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, start, count, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n\nexport { WebGLBufferRenderer };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLCapabilities( gl, extensions, parameters ) {\n\n\tvar maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\t/* eslint-disable no-undef */\n\tvar isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext ) ||\n\t\t( typeof WebGL2ComputeRenderingContext !== 'undefined' && gl instanceof WebGL2ComputeRenderingContext );\n\t/* eslint-enable no-undef */\n\n\tvar precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tvar maxPrecision = getMaxPrecision( precision );\n\n\tif ( maxPrecision !== precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tvar logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n\n\tvar maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\n\tvar maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\n\tvar maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\n\tvar maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\n\n\tvar maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tvar maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\n\tvar maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\n\tvar maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\n\n\tvar vertexTextures = maxVertexTextures > 0;\n\tvar floatFragmentTextures = isWebGL2 || !! extensions.get( 'OES_texture_float' );\n\tvar floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\tvar maxSamples = isWebGL2 ? gl.getParameter( gl.MAX_SAMPLES ) : 0;\n\n\treturn {\n\n\t\tisWebGL2: isWebGL2,\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures,\n\n\t\tmaxSamples: maxSamples\n\n\t};\n\n}\n\n\nexport { WebGLCapabilities };\n","/**\n * @author tschw\n */\n\nimport { Matrix3 } from '../../math/Matrix3.js';\nimport { Plane } from '../../math/Plane.js';\n\nfunction WebGLClipping() {\n\n\tvar scope = this,\n\n\t\tglobalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false,\n\n\t\tplane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function ( planes, enableLocalClipping, camera ) {\n\n\t\tvar enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function () {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function () {\n\n\t\trenderingShadows = false;\n\t\tresetGlobalState();\n\n\t};\n\n\tthis.setState = function ( planes, clipIntersection, clipShadows, camera, cache, fromCache ) {\n\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\n\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4,\n\n\t\t\t\tdstArray = cache.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, fromCache );\n\n\t\t\tfor ( var i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tcache.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tvar nPlanes = planes !== null ? planes.length : 0,\n\t\t\tdstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tvar flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\n\t\treturn dstArray;\n\n\t}\n\n}\n\n\nexport { WebGLClipping };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLExtensions( gl ) {\n\n\tvar extensions = {};\n\n\treturn {\n\n\t\tget: function ( name ) {\n\n\t\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\t\treturn extensions[ name ];\n\n\t\t\t}\n\n\t\t\tvar extension;\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\textension = gl.getExtension( name );\n\n\t\t\t}\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t}\n\n\t\t\textensions[ name ] = extension;\n\n\t\t\treturn extension;\n\n\t\t}\n\n\t};\n\n}\n\n\nexport { WebGLExtensions };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Uint16BufferAttribute, Uint32BufferAttribute } from '../../core/BufferAttribute.js';\nimport { BufferGeometry } from '../../core/BufferGeometry.js';\nimport { arrayMax } from '../../utils.js';\n\nfunction WebGLGeometries( gl, attributes, info ) {\n\n\tvar geometries = new WeakMap();\n\tvar wireframeAttributes = new WeakMap();\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tvar geometry = event.target;\n\t\tvar buffergeometry = geometries.get( geometry );\n\n\t\tif ( buffergeometry.index !== null ) {\n\n\t\t\tattributes.remove( buffergeometry.index );\n\n\t\t}\n\n\t\tfor ( var name in buffergeometry.attributes ) {\n\n\t\t\tattributes.remove( buffergeometry.attributes[ name ] );\n\n\t\t}\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tgeometries.delete( geometry );\n\n\t\tvar attribute = wireframeAttributes.get( buffergeometry );\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\twireframeAttributes.delete( buffergeometry );\n\n\t\t}\n\n\t\t//\n\n\t\tinfo.memory.geometries --;\n\n\t}\n\n\tfunction get( object, geometry ) {\n\n\t\tvar buffergeometry = geometries.get( geometry );\n\n\t\tif ( buffergeometry ) return buffergeometry;\n\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tbuffergeometry = geometry;\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\n\n\t\t\t\tgeometry._bufferGeometry = new BufferGeometry().setFromObject( object );\n\n\t\t\t}\n\n\t\t\tbuffergeometry = geometry._bufferGeometry;\n\n\t\t}\n\n\t\tgeometries.set( geometry, buffergeometry );\n\n\t\tinfo.memory.geometries ++;\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction update( geometry ) {\n\n\t\tvar index = geometry.index;\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattributes.update( index, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\t}\n\n\t\tfor ( var name in geometryAttributes ) {\n\n\t\t\tattributes.update( geometryAttributes[ name ], gl.ARRAY_BUFFER );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( var name in morphAttributes ) {\n\n\t\t\tvar array = morphAttributes[ name ];\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.update( array[ i ], gl.ARRAY_BUFFER );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateWireframeAttribute( geometry ) {\n\n\t\tvar indices = [];\n\n\t\tvar geometryIndex = geometry.index;\n\t\tvar geometryPosition = geometry.attributes.position;\n\t\tvar version = 0;\n\n\t\tif ( geometryIndex !== null ) {\n\n\t\t\tvar array = geometryIndex.array;\n\t\t\tversion = geometryIndex.version;\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tvar a = array[ i + 0 ];\n\t\t\t\tvar b = array[ i + 1 ];\n\t\t\t\tvar c = array[ i + 2 ];\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar array = geometryPosition.array;\n\t\t\tversion = geometryPosition.version;\n\n\t\t\tfor ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tvar a = i + 0;\n\t\t\t\tvar b = i + 1;\n\t\t\t\tvar c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar attribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\t\tattribute.version = version;\n\n\t\tattributes.update( attribute, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\t//\n\n\t\tvar previousAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( previousAttribute ) attributes.remove( previousAttribute );\n\n\t\t//\n\n\t\twireframeAttributes.set( geometry, attribute );\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tvar currentAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( currentAttribute ) {\n\n\t\t\tvar geometryIndex = geometry.index;\n\n\t\t\tif ( geometryIndex !== null ) {\n\n\t\t\t\t// if the attribute is obsolete, create a new one\n\n\t\t\t\tif ( currentAttribute.version < geometryIndex.version ) {\n\n\t\t\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t}\n\n\t\treturn wireframeAttributes.get( geometry );\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tupdate: update,\n\n\t\tgetWireframeAttribute: getWireframeAttribute\n\n\t};\n\n}\n\n\nexport { WebGLGeometries };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLIndexedBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\n\tvar mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tvar type, bytesPerElement;\n\n\tfunction setIndex( value ) {\n\n\t\ttype = value.type;\n\t\tbytesPerElement = value.bytesPerElement;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\n\n\t\tinfo.update( count, mode );\n\n\t}\n\n\tfunction renderInstances( geometry, start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tvar extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawElementsInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawElementsInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, count, type, start * bytesPerElement, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.setIndex = setIndex;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n\nexport { WebGLIndexedBufferRenderer };\n","/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction WebGLInfo( gl ) {\n\n\tvar memory = {\n\t\tgeometries: 0,\n\t\ttextures: 0\n\t};\n\n\tvar render = {\n\t\tframe: 0,\n\t\tcalls: 0,\n\t\ttriangles: 0,\n\t\tpoints: 0,\n\t\tlines: 0\n\t};\n\n\tfunction update( count, mode, instanceCount ) {\n\n\t\tinstanceCount = instanceCount || 1;\n\n\t\trender.calls ++;\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase gl.TRIANGLES:\n\t\t\t\trender.triangles += instanceCount * ( count / 3 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.TRIANGLE_STRIP:\n\t\t\tcase gl.TRIANGLE_FAN:\n\t\t\t\trender.triangles += instanceCount * ( count - 2 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINES:\n\t\t\t\trender.lines += instanceCount * ( count / 2 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINE_STRIP:\n\t\t\t\trender.lines += instanceCount * ( count - 1 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINE_LOOP:\n\t\t\t\trender.lines += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tcase gl.POINTS:\n\t\t\t\trender.points += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\trender.frame ++;\n\t\trender.calls = 0;\n\t\trender.triangles = 0;\n\t\trender.points = 0;\n\t\trender.lines = 0;\n\n\t}\n\n\treturn {\n\t\tmemory: memory,\n\t\trender: render,\n\t\tprograms: null,\n\t\tautoReset: true,\n\t\treset: reset,\n\t\tupdate: update\n\t};\n\n}\n\n\nexport { WebGLInfo };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction absNumericalSort( a, b ) {\n\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\n\n}\n\nfunction WebGLMorphtargets( gl ) {\n\n\tvar influencesList = {};\n\tvar morphInfluences = new Float32Array( 8 );\n\n\tfunction update( object, geometry, material, program ) {\n\n\t\tvar objectInfluences = object.morphTargetInfluences;\n\n\t\tvar length = objectInfluences.length;\n\n\t\tvar influences = influencesList[ geometry.id ];\n\n\t\tif ( influences === undefined ) {\n\n\t\t\t// initialise list\n\n\t\t\tinfluences = [];\n\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\t\tinfluences[ i ] = [ i, 0 ];\n\n\t\t\t}\n\n\t\t\tinfluencesList[ geometry.id ] = influences;\n\n\t\t}\n\n\t\tvar morphTargets = material.morphTargets && geometry.morphAttributes.position;\n\t\tvar morphNormals = material.morphNormals && geometry.morphAttributes.normal;\n\n\t\t// Remove current morphAttributes\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tif ( influence[ 1 ] !== 0 ) {\n\n\t\t\t\tif ( morphTargets ) geometry.deleteAttribute( 'morphTarget' + i );\n\t\t\t\tif ( morphNormals ) geometry.deleteAttribute( 'morphNormal' + i );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Collect influences\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tinfluence[ 0 ] = i;\n\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\n\n\t\t}\n\n\t\tinfluences.sort( absNumericalSort );\n\n\t\t// Add morphAttributes\n\n\t\tvar morphInfluencesSum = 0;\n\n\t\tfor ( var i = 0; i < 8; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tif ( influence ) {\n\n\t\t\t\tvar index = influence[ 0 ];\n\t\t\t\tvar value = influence[ 1 ];\n\n\t\t\t\tif ( value ) {\n\n\t\t\t\t\tif ( morphTargets ) geometry.setAttribute( 'morphTarget' + i, morphTargets[ index ] );\n\t\t\t\t\tif ( morphNormals ) geometry.setAttribute( 'morphNormal' + i, morphNormals[ index ] );\n\n\t\t\t\t\tmorphInfluences[ i ] = value;\n\t\t\t\t\tmorphInfluencesSum += value;\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmorphInfluences[ i ] = 0;\n\n\t\t}\n\n\t\t// GLSL shader uses formula baseinfluence * base + sum(target * influence)\n\t\t// This allows us to switch between absolute morphs and relative morphs without changing shader code\n\t\t// When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\n\t\tvar morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update\n\n\t};\n\n}\n\n\nexport { WebGLMorphtargets };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLObjects( gl, geometries, attributes, info ) {\n\n\tvar updateList = {};\n\n\tfunction update( object ) {\n\n\t\tvar frame = info.render.frame;\n\n\t\tvar geometry = object.geometry;\n\t\tvar buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateList[ buffergeometry.id ] !== frame ) {\n\n\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\tbuffergeometry.updateFromObject( object );\n\n\t\t\t}\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateList[ buffergeometry.id ] = frame;\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\tattributes.update( object.instanceMatrix, gl.ARRAY_BUFFER );\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tupdateList = {};\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tdispose: dispose\n\n\t};\n\n}\n\n\nexport { WebGLObjects };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Texture } from './Texture.js';\nimport { CubeReflectionMapping, RGBFormat } from '../constants.js';\n\nfunction CubeTexture( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\timages = images !== undefined ? images : [];\n\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n\tformat = format !== undefined ? format : RGBFormat;\n\n\tTexture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.flipY = false;\n\n}\n\nCubeTexture.prototype = Object.create( Texture.prototype );\nCubeTexture.prototype.constructor = CubeTexture;\n\nCubeTexture.prototype.isCubeTexture = true;\n\nObject.defineProperty( CubeTexture.prototype, 'images', {\n\n\tget: function () {\n\n\t\treturn this.image;\n\n\t},\n\n\tset: function ( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n} );\n\n\nexport { CubeTexture };\n","/**\n * @author Takahiro https://github.com/takahirox\n */\n\nimport { Texture } from './Texture.js';\nimport { ClampToEdgeWrapping, NearestFilter } from '../constants.js';\n\nfunction DataTexture2DArray( data, width, height, depth ) {\n\n\tTexture.call( this, null );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1, depth: depth || 1 };\n\n\tthis.magFilter = NearestFilter;\n\tthis.minFilter = NearestFilter;\n\n\tthis.wrapR = ClampToEdgeWrapping;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\n\tthis.needsUpdate = true;\n\n}\n\nDataTexture2DArray.prototype = Object.create( Texture.prototype );\nDataTexture2DArray.prototype.constructor = DataTexture2DArray;\nDataTexture2DArray.prototype.isDataTexture2DArray = true;\n\nexport { DataTexture2DArray };\n","/**\n * @author Artur Trzesiok\n */\n\nimport { Texture } from './Texture.js';\nimport { ClampToEdgeWrapping, NearestFilter } from '../constants.js';\n\nfunction DataTexture3D( data, width, height, depth ) {\n\n\t// We're going to add .setXXX() methods for setting properties later.\n\t// Users can still set in DataTexture3D directly.\n\t//\n\t//\tvar texture = new THREE.DataTexture3D( data, width, height, depth );\n\t// \ttexture.anisotropy = 16;\n\t//\n\t// See #14839\n\n\tTexture.call( this, null );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1, depth: depth || 1 };\n\n\tthis.magFilter = NearestFilter;\n\tthis.minFilter = NearestFilter;\n\n\tthis.wrapR = ClampToEdgeWrapping;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\n\tthis.needsUpdate = true;\n\n\n}\n\nDataTexture3D.prototype = Object.create( Texture.prototype );\nDataTexture3D.prototype.constructor = DataTexture3D;\nDataTexture3D.prototype.isDataTexture3D = true;\n\nexport { DataTexture3D };\n","/**\n * @author tschw\n * @author Mugen87 / https://github.com/Mugen87\n * @author mrdoob / http://mrdoob.com/\n *\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [textures] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'textures' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (textures factorizations):\n *\n * .upload( gl, seq, values, textures )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (textures factorizations):\n *\n * .setValue( gl, name, value, textures )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\nimport { CubeTexture } from '../../textures/CubeTexture.js';\nimport { Texture } from '../../textures/Texture.js';\nimport { DataTexture2DArray } from '../../textures/DataTexture2DArray.js';\nimport { DataTexture3D } from '../../textures/DataTexture3D.js';\n\nvar emptyTexture = new Texture();\nvar emptyTexture2dArray = new DataTexture2DArray();\nvar emptyTexture3d = new DataTexture3D();\nvar emptyCubeTexture = new CubeTexture();\n\n// --- Utilities ---\n\n// Array Caches (provide typed arrays for temporary by size)\n\nvar arrayCacheF32 = [];\nvar arrayCacheI32 = [];\n\n// Float32Array caches used for uploading Matrix uniforms\n\nvar mat4array = new Float32Array( 16 );\nvar mat3array = new Float32Array( 9 );\nvar mat2array = new Float32Array( 4 );\n\n// Flattening for arrays of vectors and matrices\n\nfunction flatten( array, nBlocks, blockSize ) {\n\n\tvar firstElem = array[ 0 ];\n\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t// unoptimized: ! isNaN( firstElem )\n\t// see http://jacksondunstan.com/articles/983\n\n\tvar n = nBlocks * blockSize,\n\t\tr = arrayCacheF32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Float32Array( n );\n\t\tarrayCacheF32[ n ] = r;\n\n\t}\n\n\tif ( nBlocks !== 0 ) {\n\n\t\tfirstElem.toArray( r, 0 );\n\n\t\tfor ( var i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\toffset += blockSize;\n\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t}\n\n\t}\n\n\treturn r;\n\n}\n\nfunction arraysEqual( a, b ) {\n\n\tif ( a.length !== b.length ) return false;\n\n\tfor ( var i = 0, l = a.length; i < l; i ++ ) {\n\n\t\tif ( a[ i ] !== b[ i ] ) return false;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction copyArray( a, b ) {\n\n\tfor ( var i = 0, l = b.length; i < l; i ++ ) {\n\n\t\ta[ i ] = b[ i ];\n\n\t}\n\n}\n\n// Texture unit allocation\n\nfunction allocTexUnits( textures, n ) {\n\n\tvar r = arrayCacheI32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Int32Array( n );\n\t\tarrayCacheI32[ n ] = r;\n\n\t}\n\n\tfor ( var i = 0; i !== n; ++ i )\n\t\tr[ i ] = textures.allocateTextureUnit();\n\n\treturn r;\n\n}\n\n// --- Setters ---\n\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n\n// Single scalar\n\nfunction setValueV1f( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1f( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single float vector (from flat array or THREE.VectorN)\n\nfunction setValueV2f( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2f( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3f( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else if ( v.r !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.r || cache[ 1 ] !== v.g || cache[ 2 ] !== v.b ) {\n\n\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\n\t\t\tcache[ 0 ] = v.r;\n\t\t\tcache[ 1 ] = v.g;\n\t\t\tcache[ 2 ] = v.b;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4f( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n// Single matrix (from flat array or MatrixN)\n\nfunction setValueM2( gl, v ) {\n\n\tvar cache = this.cache;\n\tvar elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix2fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat2array.set( elements );\n\n\t\tgl.uniformMatrix2fv( this.addr, false, mat2array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM3( gl, v ) {\n\n\tvar cache = this.cache;\n\tvar elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat3array.set( elements );\n\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM4( gl, v ) {\n\n\tvar cache = this.cache;\n\tvar elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat4array.set( elements );\n\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\n// Single texture (2D / Cube)\n\nfunction setValueT1( gl, v, textures ) {\n\n\tvar cache = this.cache;\n\tvar unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.safeSetTexture2D( v || emptyTexture, unit );\n\n}\n\nfunction setValueT2DArray1( gl, v, textures ) {\n\n\tvar cache = this.cache;\n\tvar unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture2DArray( v || emptyTexture2dArray, unit );\n\n}\n\nfunction setValueT3D1( gl, v, textures ) {\n\n\tvar cache = this.cache;\n\tvar unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture3D( v || emptyTexture3d, unit );\n\n}\n\nfunction setValueT6( gl, v, textures ) {\n\n\tvar cache = this.cache;\n\tvar unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.safeSetTextureCube( v || emptyCubeTexture, unit );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\n\nfunction setValueV1i( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1i( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\nfunction setValueV2i( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform2iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV3i( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform3iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV4i( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform4iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\n// Helper to pick the right setter for the singular case\n\nfunction getSingularSetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1f; // FLOAT\n\t\tcase 0x8b50: return setValueV2f; // _VEC2\n\t\tcase 0x8b51: return setValueV3f; // _VEC3\n\t\tcase 0x8b52: return setValueV4f; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2; // _MAT2\n\t\tcase 0x8b5b: return setValueM3; // _MAT3\n\t\tcase 0x8b5c: return setValueM4; // _MAT4\n\n\t\tcase 0x8b5e: case 0x8d66: return setValueT1; // SAMPLER_2D, SAMPLER_EXTERNAL_OES\n\t\tcase 0x8b5f: return setValueT3D1; // SAMPLER_3D\n\t\tcase 0x8b60: return setValueT6; // SAMPLER_CUBE\n\t\tcase 0x8DC1: return setValueT2DArray1; // SAMPLER_2D_ARRAY\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1i; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2i; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3i; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4i; // _VEC4\n\n\t}\n\n}\n\n// Array of scalars\nfunction setValueV1fArray( gl, v ) {\n\n\tgl.uniform1fv( this.addr, v );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\nfunction setValueV1iArray( gl, v ) {\n\n\tgl.uniform1iv( this.addr, v );\n\n}\n\nfunction setValueV2iArray( gl, v ) {\n\n\tgl.uniform2iv( this.addr, v );\n\n}\n\nfunction setValueV3iArray( gl, v ) {\n\n\tgl.uniform3iv( this.addr, v );\n\n}\n\nfunction setValueV4iArray( gl, v ) {\n\n\tgl.uniform4iv( this.addr, v );\n\n}\n\n\n// Array of vectors (flat or from THREE classes)\n\nfunction setValueV2fArray( gl, v ) {\n\n\tvar data = flatten( v, this.size, 2 );\n\n\tgl.uniform2fv( this.addr, data );\n\n}\n\nfunction setValueV3fArray( gl, v ) {\n\n\tvar data = flatten( v, this.size, 3 );\n\n\tgl.uniform3fv( this.addr, data );\n\n}\n\nfunction setValueV4fArray( gl, v ) {\n\n\tvar data = flatten( v, this.size, 4 );\n\n\tgl.uniform4fv( this.addr, data );\n\n}\n\n// Array of matrices (flat or from THREE clases)\n\nfunction setValueM2Array( gl, v ) {\n\n\tvar data = flatten( v, this.size, 4 );\n\n\tgl.uniformMatrix2fv( this.addr, false, data );\n\n}\n\nfunction setValueM3Array( gl, v ) {\n\n\tvar data = flatten( v, this.size, 9 );\n\n\tgl.uniformMatrix3fv( this.addr, false, data );\n\n}\n\nfunction setValueM4Array( gl, v ) {\n\n\tvar data = flatten( v, this.size, 16 );\n\n\tgl.uniformMatrix4fv( this.addr, false, data );\n\n}\n\n// Array of textures (2D / Cube)\n\nfunction setValueT1Array( gl, v, textures ) {\n\n\tvar n = v.length;\n\n\tvar units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\ttextures.safeSetTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT6Array( gl, v, textures ) {\n\n\tvar n = v.length;\n\n\tvar units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\ttextures.safeSetTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t}\n\n}\n\n// Helper to pick the right setter for a pure (bottom-level) array\n\nfunction getPureArraySetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1fArray; // FLOAT\n\t\tcase 0x8b50: return setValueV2fArray; // _VEC2\n\t\tcase 0x8b51: return setValueV3fArray; // _VEC3\n\t\tcase 0x8b52: return setValueV4fArray; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2Array; // _MAT2\n\t\tcase 0x8b5b: return setValueM3Array; // _MAT3\n\t\tcase 0x8b5c: return setValueM4Array; // _MAT4\n\n\t\tcase 0x8b5e: return setValueT1Array; // SAMPLER_2D\n\t\tcase 0x8b60: return setValueT6Array; // SAMPLER_CUBE\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1iArray; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2iArray; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3iArray; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4iArray; // _VEC4\n\n\t}\n\n}\n\n// --- Uniform Classes ---\n\nfunction SingleUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.cache = [];\n\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nfunction PureArrayUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.cache = [];\n\tthis.size = activeInfo.size;\n\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nPureArrayUniform.prototype.updateCache = function ( data ) {\n\n\tvar cache = this.cache;\n\n\tif ( data instanceof Float32Array && cache.length !== data.length ) {\n\n\t\tthis.cache = new Float32Array( data.length );\n\n\t}\n\n\tcopyArray( cache, data );\n\n};\n\nfunction StructuredUniform( id ) {\n\n\tthis.id = id;\n\n\tthis.seq = [];\n\tthis.map = {};\n\n}\n\nStructuredUniform.prototype.setValue = function ( gl, value, textures ) {\n\n\tvar seq = this.seq;\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ];\n\t\tu.setValue( gl, value[ u.id ], textures );\n\n\t}\n\n};\n\n// --- Top-level ---\n\n// Parser - builds up the property tree from the path strings\n\nvar RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\n\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform( container, uniformObject ) {\n\n\tcontainer.seq.push( uniformObject );\n\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n}\n\nfunction parseUniform( activeInfo, addr, container ) {\n\n\tvar path = activeInfo.name,\n\t\tpathLength = path.length;\n\n\t// reset RegExp object, because of the early exit of a previous run\n\tRePathPart.lastIndex = 0;\n\n\twhile ( true ) {\n\n\t\tvar match = RePathPart.exec( path ),\n\t\t\tmatchEnd = RePathPart.lastIndex,\n\n\t\t\tid = match[ 1 ],\n\t\t\tidIsIndex = match[ 2 ] === ']',\n\t\t\tsubscript = match[ 3 ];\n\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\n\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\tbreak;\n\n\t\t} else {\n\n\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\tvar map = container.map, next = map[ id ];\n\n\t\t\tif ( next === undefined ) {\n\n\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\taddUniform( container, next );\n\n\t\t\t}\n\n\t\t\tcontainer = next;\n\n\t\t}\n\n\t}\n\n}\n\n// Root Container\n\nfunction WebGLUniforms( gl, program ) {\n\n\tthis.seq = [];\n\tthis.map = {};\n\n\tvar n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\n\n\tfor ( var i = 0; i < n; ++ i ) {\n\n\t\tvar info = gl.getActiveUniform( program, i ),\n\t\t\taddr = gl.getUniformLocation( program, info.name );\n\n\t\tparseUniform( info, addr, this );\n\n\t}\n\n}\n\nWebGLUniforms.prototype.setValue = function ( gl, name, value, textures ) {\n\n\tvar u = this.map[ name ];\n\n\tif ( u !== undefined ) u.setValue( gl, value, textures );\n\n};\n\nWebGLUniforms.prototype.setOptional = function ( gl, object, name ) {\n\n\tvar v = object[ name ];\n\n\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n};\n\n\n// Static interface\n\nWebGLUniforms.upload = function ( gl, seq, values, textures ) {\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ],\n\t\t\tv = values[ u.id ];\n\n\t\tif ( v.needsUpdate !== false ) {\n\n\t\t\t// note: always updating when .needsUpdate is undefined\n\t\t\tu.setValue( gl, v.value, textures );\n\n\t\t}\n\n\t}\n\n};\n\nWebGLUniforms.seqWithValue = function ( seq, values ) {\n\n\tvar r = [];\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ];\n\t\tif ( u.id in values ) r.push( u );\n\n\t}\n\n\treturn r;\n\n};\n\nexport { WebGLUniforms };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLShader( gl, type, string ) {\n\n\tvar shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\treturn shader;\n\n}\n\nexport { WebGLShader };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { WebGLUniforms } from './WebGLUniforms.js';\nimport { WebGLShader } from './WebGLShader.js';\nimport { ShaderChunk } from '../shaders/ShaderChunk.js';\nimport { NoToneMapping, AddOperation, MixOperation, MultiplyOperation, EquirectangularRefractionMapping, CubeRefractionMapping, SphericalReflectionMapping, EquirectangularReflectionMapping, CubeUVRefractionMapping, CubeUVReflectionMapping, CubeReflectionMapping, PCFSoftShadowMap, PCFShadowMap, VSMShadowMap, ACESFilmicToneMapping, CineonToneMapping, Uncharted2ToneMapping, ReinhardToneMapping, LinearToneMapping, GammaEncoding, RGBDEncoding, RGBM16Encoding, RGBM7Encoding, RGBEEncoding, sRGBEncoding, LinearEncoding, LogLuvEncoding } from '../../constants.js';\n\nvar programIdCount = 0;\n\nfunction addLineNumbers( string ) {\n\n\tvar lines = string.split( '\\n' );\n\n\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t}\n\n\treturn lines.join( '\\n' );\n\n}\n\nfunction getEncodingComponents( encoding ) {\n\n\tswitch ( encoding ) {\n\n\t\tcase LinearEncoding:\n\t\t\treturn [ 'Linear', '( value )' ];\n\t\tcase sRGBEncoding:\n\t\t\treturn [ 'sRGB', '( value )' ];\n\t\tcase RGBEEncoding:\n\t\t\treturn [ 'RGBE', '( value )' ];\n\t\tcase RGBM7Encoding:\n\t\t\treturn [ 'RGBM', '( value, 7.0 )' ];\n\t\tcase RGBM16Encoding:\n\t\t\treturn [ 'RGBM', '( value, 16.0 )' ];\n\t\tcase RGBDEncoding:\n\t\t\treturn [ 'RGBD', '( value, 256.0 )' ];\n\t\tcase GammaEncoding:\n\t\t\treturn [ 'Gamma', '( value, float( GAMMA_FACTOR ) )' ];\n\t\tcase LogLuvEncoding:\n\t\t\treturn [ 'LogLuv', '( value )' ];\n\t\tdefault:\n\t\t\tthrow new Error( 'unsupported encoding: ' + encoding );\n\n\t}\n\n}\n\nfunction getShaderErrors( gl, shader, type ) {\n\n\tvar status = gl.getShaderParameter( shader, gl.COMPILE_STATUS );\n\tvar log = gl.getShaderInfoLog( shader ).trim();\n\n\tif ( status && log === '' ) return '';\n\n\t// --enable-privileged-webgl-extension\n\t// console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\tvar source = gl.getShaderSource( shader );\n\n\treturn 'THREE.WebGLShader: gl.getShaderInfoLog() ' + type + '\\n' + log + addLineNumbers( source );\n\n}\n\nfunction getTexelDecodingFunction( functionName, encoding ) {\n\n\tvar components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return ' + components[ 0 ] + 'ToLinear' + components[ 1 ] + '; }';\n\n}\n\nfunction getTexelEncodingFunction( functionName, encoding ) {\n\n\tvar components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[ 0 ] + components[ 1 ] + '; }';\n\n}\n\nfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\tvar toneMappingName;\n\n\tswitch ( toneMapping ) {\n\n\t\tcase LinearToneMapping:\n\t\t\ttoneMappingName = 'Linear';\n\t\t\tbreak;\n\n\t\tcase ReinhardToneMapping:\n\t\t\ttoneMappingName = 'Reinhard';\n\t\t\tbreak;\n\n\t\tcase Uncharted2ToneMapping:\n\t\t\ttoneMappingName = 'Uncharted2';\n\t\t\tbreak;\n\n\t\tcase CineonToneMapping:\n\t\t\ttoneMappingName = 'OptimizedCineon';\n\t\t\tbreak;\n\n\t\tcase ACESFilmicToneMapping:\n\t\t\ttoneMappingName = 'ACESFilmic';\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'unsupported toneMapping: ' + toneMapping );\n\n\t}\n\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\n\n}\n\nfunction generateExtensions( extensions, parameters, rendererExtensions ) {\n\n\textensions = extensions || {};\n\n\tvar chunks = [\n\t\t( extensions.derivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.tangentSpaceNormalMap || parameters.clearcoatNormalMap || parameters.flatShading ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t( extensions.fragDepth || parameters.logarithmicDepthBuffer ) && rendererExtensions.get( 'EXT_frag_depth' ) ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t( extensions.drawBuffers ) && rendererExtensions.get( 'WEBGL_draw_buffers' ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t( extensions.shaderTextureLOD || parameters.envMap ) && rendererExtensions.get( 'EXT_shader_texture_lod' ) ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateDefines( defines ) {\n\n\tvar chunks = [];\n\n\tfor ( var name in defines ) {\n\n\t\tvar value = defines[ name ];\n\n\t\tif ( value === false ) continue;\n\n\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t}\n\n\treturn chunks.join( '\\n' );\n\n}\n\nfunction fetchAttributeLocations( gl, program ) {\n\n\tvar attributes = {};\n\n\tvar n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\n\n\tfor ( var i = 0; i < n; i ++ ) {\n\n\t\tvar info = gl.getActiveAttrib( program, i );\n\t\tvar name = info.name;\n\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\n\n\t\tattributes[ name ] = gl.getAttribLocation( program, name );\n\n\t}\n\n\treturn attributes;\n\n}\n\nfunction filterEmptyLine( string ) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights )\n\t\t.replace( /NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows )\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows )\n\t\t.replace( /NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows );\n\n}\n\nfunction replaceClippingPlaneNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\n\t\t.replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\n\n}\n\n// Resolve Includes\n\nvar includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\n\nfunction resolveIncludes( string ) {\n\n\treturn string.replace( includePattern, includeReplacer );\n\n}\n\nfunction includeReplacer( match, include ) {\n\n\tvar string = ShaderChunk[ include ];\n\n\tif ( string === undefined ) {\n\n\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t}\n\n\treturn resolveIncludes( string );\n\n}\n\n// Unroll Loops\n\nvar loopPattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\n\nfunction unrollLoops( string ) {\n\n\treturn string.replace( loopPattern, loopReplacer );\n\n}\n\nfunction loopReplacer( match, start, end, snippet ) {\n\n\tvar string = '';\n\n\tfor ( var i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\tstring += snippet\n\t\t\t.replace( /\\[ i \\]/g, '[ ' + i + ' ]' )\n\t\t\t.replace( /UNROLLED_LOOP_INDEX/g, i );\n\n\t}\n\n\treturn string;\n\n}\n\n//\n\nfunction generatePrecision( parameters ) {\n\n\tvar precisionstring = \"precision \" + parameters.precision + \" float;\\nprecision \" + parameters.precision + \" int;\";\n\n\tif ( parameters.precision === \"highp\" ) {\n\n\t\tprecisionstring += \"\\n#define HIGH_PRECISION\";\n\n\t} else if ( parameters.precision === \"mediump\" ) {\n\n\t\tprecisionstring += \"\\n#define MEDIUM_PRECISION\";\n\n\t} else if ( parameters.precision === \"lowp\" ) {\n\n\t\tprecisionstring += \"\\n#define LOW_PRECISION\";\n\n\t}\n\n\treturn precisionstring;\n\n}\n\nfunction generateShadowMapTypeDefine( parameters ) {\n\n\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t} else if ( parameters.shadowMapType === VSMShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_VSM';\n\n\t}\n\n\treturn shadowMapTypeDefine;\n\n}\n\nfunction generateEnvMapTypeDefine( parameters ) {\n\n\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeReflectionMapping:\n\t\t\tcase CubeRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\tbreak;\n\n\t\t\tcase CubeUVReflectionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\tbreak;\n\n\t\t\tcase EquirectangularReflectionMapping:\n\t\t\tcase EquirectangularRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\n\t\t\t\tbreak;\n\n\t\t\tcase SphericalReflectionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapTypeDefine;\n\n}\n\nfunction generateEnvMapModeDefine( parameters ) {\n\n\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeRefractionMapping:\n\t\t\tcase EquirectangularRefractionMapping:\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapModeDefine;\n\n}\n\nfunction generateEnvMapBlendingDefine( parameters ) {\n\n\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.combine ) {\n\n\t\t\tcase MultiplyOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\tbreak;\n\n\t\t\tcase MixOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\tbreak;\n\n\t\t\tcase AddOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapBlendingDefine;\n\n}\n\nfunction WebGLProgram( renderer, extensions, cacheKey, material, shader, parameters ) {\n\n\tvar gl = renderer.getContext();\n\n\tvar defines = material.defines;\n\n\tvar vertexShader = shader.vertexShader;\n\tvar fragmentShader = shader.fragmentShader;\n\tvar shadowMapTypeDefine = generateShadowMapTypeDefine( parameters );\n\tvar envMapTypeDefine = generateEnvMapTypeDefine( parameters );\n\tvar envMapModeDefine = generateEnvMapModeDefine( parameters );\n\tvar envMapBlendingDefine = generateEnvMapBlendingDefine( parameters );\n\n\n\tvar gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\n\n\tvar customExtensions = parameters.isWebGL2 ? '' : generateExtensions( material.extensions, parameters, extensions );\n\n\tvar customDefines = generateDefines( defines );\n\n\tvar program = gl.createProgram();\n\n\tvar prefixVertex, prefixFragment;\n\n\tvar numMultiviewViews = parameters.numMultiviewViews;\n\n\tif ( material.isRawShaderMaterial ) {\n\n\t\tprefixVertex = [\n\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixVertex.length > 0 ) {\n\n\t\t\tprefixVertex += '\\n';\n\n\t\t}\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixFragment.length > 0 ) {\n\n\t\t\tprefixFragment += '\\n';\n\n\t\t}\n\n\t} else {\n\n\t\tprefixVertex = [\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + shader.name,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.instancing ? '#define USE_INSTANCING' : '',\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t'#define MAX_BONES ' + parameters.maxBones,\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\n\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\tparameters.logarithmicDepthBuffer && ( parameters.isWebGL2 || extensions.get( 'EXT_frag_depth' ) ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t'#ifdef USE_INSTANCING',\n\n\t\t\t' attribute mat4 instanceMatrix;',\n\n\t\t\t'#endif',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec3 normal;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'#ifdef USE_TANGENT',\n\n\t\t\t'\tattribute vec4 tangent;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_COLOR',\n\n\t\t\t'\tattribute vec3 color;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_MORPHTARGETS',\n\n\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t'\t#else',\n\n\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t'\t#endif',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t'#endif',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + shader.name,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest + ( parameters.alphaTest % 1 ? '' : '.0' ) : '', // add '.0' if integer\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.matcap ? '#define USE_MATCAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\n\t\t\tparameters.sheen ? '#define USE_SHEEN' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\n\n\t\t\tparameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\tparameters.logarithmicDepthBuffer && ( parameters.isWebGL2 || extensions.get( 'EXT_frag_depth' ) ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t( ( material.extensions ? material.extensions.shaderTextureLOD : false ) || parameters.envMap ) && ( parameters.isWebGL2 || extensions.get( 'EXT_shader_texture_lod' ) ) ? '#define TEXTURE_LOD_EXT' : '',\n\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\n\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\n\n\t\t\t( parameters.outputEncoding || parameters.mapEncoding || parameters.matcapEncoding || parameters.envMapEncoding || parameters.emissiveMapEncoding ) ?\n\t\t\t\tShaderChunk[ 'encodings_pars_fragment' ] : '', // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\tparameters.mapEncoding ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\n\t\t\tparameters.matcapEncoding ? getTexelDecodingFunction( 'matcapTexelToLinear', parameters.matcapEncoding ) : '',\n\t\t\tparameters.envMapEncoding ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\n\t\t\tparameters.emissiveMapEncoding ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\n\t\t\tparameters.outputEncoding ? getTexelEncodingFunction( 'linearToOutputTexel', parameters.outputEncoding ) : '',\n\n\t\t\tparameters.depthPacking ? '#define DEPTH_PACKING ' + material.depthPacking : '',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tvertexShader = resolveIncludes( vertexShader );\n\tvertexShader = replaceLightNums( vertexShader, parameters );\n\tvertexShader = replaceClippingPlaneNums( vertexShader, parameters );\n\n\tfragmentShader = resolveIncludes( fragmentShader );\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\tfragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\n\n\tvertexShader = unrollLoops( vertexShader );\n\tfragmentShader = unrollLoops( fragmentShader );\n\n\tif ( parameters.isWebGL2 && ! material.isRawShaderMaterial ) {\n\n\t\tvar isGLSL3ShaderMaterial = false;\n\n\t\tvar versionRegex = /^\\s*#version\\s+300\\s+es\\s*\\n/;\n\n\t\tif ( material.isShaderMaterial &&\n\t\t\tvertexShader.match( versionRegex ) !== null &&\n\t\t\tfragmentShader.match( versionRegex ) !== null ) {\n\n\t\t\tisGLSL3ShaderMaterial = true;\n\n\t\t\tvertexShader = vertexShader.replace( versionRegex, '' );\n\t\t\tfragmentShader = fragmentShader.replace( versionRegex, '' );\n\n\t\t}\n\n\t\t// GLSL 3.0 conversion\n\n\t\tprefixVertex = [\n\t\t\t'#version 300 es\\n',\n\t\t\t'#define attribute in',\n\t\t\t'#define varying out',\n\t\t\t'#define texture2D texture'\n\t\t].join( '\\n' ) + '\\n' + prefixVertex;\n\n\t\tprefixFragment = [\n\t\t\t'#version 300 es\\n',\n\t\t\t'#define varying in',\n\t\t\tisGLSL3ShaderMaterial ? '' : 'out highp vec4 pc_fragColor;',\n\t\t\tisGLSL3ShaderMaterial ? '' : '#define gl_FragColor pc_fragColor',\n\t\t\t'#define gl_FragDepthEXT gl_FragDepth',\n\t\t\t'#define texture2D texture',\n\t\t\t'#define textureCube texture',\n\t\t\t'#define texture2DProj textureProj',\n\t\t\t'#define texture2DLodEXT textureLod',\n\t\t\t'#define texture2DProjLodEXT textureProjLod',\n\t\t\t'#define textureCubeLodEXT textureLod',\n\t\t\t'#define texture2DGradEXT textureGrad',\n\t\t\t'#define texture2DProjGradEXT textureProjGrad',\n\t\t\t'#define textureCubeGradEXT textureGrad'\n\t\t].join( '\\n' ) + '\\n' + prefixFragment;\n\n\t\t// Multiview\n\n\t\tif ( numMultiviewViews > 0 ) {\n\n\t\t\tprefixVertex = prefixVertex.replace(\n\t\t\t\t'#version 300 es\\n',\n\t\t\t\t[\n\t\t\t\t\t'#version 300 es\\n',\n\t\t\t\t\t'#extension GL_OVR_multiview2 : require',\n\t\t\t\t\t'layout(num_views = ' + numMultiviewViews + ') in;',\n\t\t\t\t\t'#define VIEW_ID gl_ViewID_OVR'\n\t\t\t\t].join( '\\n' )\n\t\t\t);\n\n\t\t\tprefixVertex = prefixVertex.replace(\n\t\t\t\t[\n\t\t\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t\t\t'uniform mat3 normalMatrix;'\n\t\t\t\t].join( '\\n' ),\n\t\t\t\t[\n\t\t\t\t\t'uniform mat4 modelViewMatrices[' + numMultiviewViews + '];',\n\t\t\t\t\t'uniform mat4 projectionMatrices[' + numMultiviewViews + '];',\n\t\t\t\t\t'uniform mat4 viewMatrices[' + numMultiviewViews + '];',\n\t\t\t\t\t'uniform mat3 normalMatrices[' + numMultiviewViews + '];',\n\n\t\t\t\t\t'#define modelViewMatrix modelViewMatrices[VIEW_ID]',\n\t\t\t\t\t'#define projectionMatrix projectionMatrices[VIEW_ID]',\n\t\t\t\t\t'#define viewMatrix viewMatrices[VIEW_ID]',\n\t\t\t\t\t'#define normalMatrix normalMatrices[VIEW_ID]'\n\t\t\t\t].join( '\\n' )\n\t\t\t);\n\n\t\t\tprefixFragment = prefixFragment.replace(\n\t\t\t\t'#version 300 es\\n',\n\t\t\t\t[\n\t\t\t\t\t'#version 300 es\\n',\n\t\t\t\t\t'#extension GL_OVR_multiview2 : require',\n\t\t\t\t\t'#define VIEW_ID gl_ViewID_OVR'\n\t\t\t\t].join( '\\n' )\n\t\t\t);\n\n\t\t\tprefixFragment = prefixFragment.replace(\n\t\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t\t[\n\t\t\t\t\t'uniform mat4 viewMatrices[' + numMultiviewViews + '];',\n\t\t\t\t\t'#define viewMatrix viewMatrices[VIEW_ID]'\n\t\t\t\t].join( '\\n' )\n\t\t\t);\n\n\t\t}\n\n\t}\n\n\tvar vertexGlsl = prefixVertex + vertexShader;\n\tvar fragmentGlsl = prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\tvar glVertexShader = WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\n\tvar glFragmentShader = WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\n\n\tgl.attachShader( program, glVertexShader );\n\tgl.attachShader( program, glFragmentShader );\n\n\t// Force a particular attribute to index 0.\n\n\tif ( material.index0AttributeName !== undefined ) {\n\n\t\tgl.bindAttribLocation( program, 0, material.index0AttributeName );\n\n\t} else if ( parameters.morphTargets === true ) {\n\n\t\t// programs with morphTargets displace position out of attribute 0\n\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t}\n\n\tgl.linkProgram( program );\n\n\t// check for link errors\n\tif ( renderer.debug.checkShaderErrors ) {\n\n\t\tvar programLog = gl.getProgramInfoLog( program ).trim();\n\t\tvar vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\n\t\tvar fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\n\n\t\tvar runnable = true;\n\t\tvar haveDiagnostics = true;\n\n\t\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\n\n\t\t\trunnable = false;\n\n\t\t\tvar vertexErrors = getShaderErrors( gl, glVertexShader, 'vertex' );\n\t\t\tvar fragmentErrors = getShaderErrors( gl, glFragmentShader, 'fragment' );\n\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexErrors, fragmentErrors );\n\n\t\t} else if ( programLog !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\n\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\t\thaveDiagnostics = false;\n\n\t\t}\n\n\t\tif ( haveDiagnostics ) {\n\n\t\t\tthis.diagnostics = {\n\n\t\t\t\trunnable: runnable,\n\t\t\t\tmaterial: material,\n\n\t\t\t\tprogramLog: programLog,\n\n\t\t\t\tvertexShader: {\n\n\t\t\t\t\tlog: vertexLog,\n\t\t\t\t\tprefix: prefixVertex\n\n\t\t\t\t},\n\n\t\t\t\tfragmentShader: {\n\n\t\t\t\t\tlog: fragmentLog,\n\t\t\t\t\tprefix: prefixFragment\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t}\n\n\t// clean up\n\n\tgl.deleteShader( glVertexShader );\n\tgl.deleteShader( glFragmentShader );\n\n\t// set up caching for uniform locations\n\n\tvar cachedUniforms;\n\n\tthis.getUniforms = function () {\n\n\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\tcachedUniforms = new WebGLUniforms( gl, program );\n\n\t\t}\n\n\t\treturn cachedUniforms;\n\n\t};\n\n\t// set up caching for attribute locations\n\n\tvar cachedAttributes;\n\n\tthis.getAttributes = function () {\n\n\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t}\n\n\t\treturn cachedAttributes;\n\n\t};\n\n\t// free resource\n\n\tthis.destroy = function () {\n\n\t\tgl.deleteProgram( program );\n\t\tthis.program = undefined;\n\n\t};\n\n\t//\n\n\tthis.name = shader.name;\n\tthis.id = programIdCount ++;\n\tthis.cacheKey = cacheKey;\n\tthis.usedTimes = 1;\n\tthis.program = program;\n\tthis.vertexShader = glVertexShader;\n\tthis.fragmentShader = glFragmentShader;\n\tthis.numMultiviewViews = numMultiviewViews;\n\n\treturn this;\n\n}\n\nexport { WebGLProgram };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { BackSide, DoubleSide, CubeUVRefractionMapping, CubeUVReflectionMapping, GammaEncoding, LinearEncoding, ObjectSpaceNormalMap, TangentSpaceNormalMap, NoToneMapping } from '../../constants.js';\nimport { WebGLProgram } from './WebGLProgram.js';\n\nfunction WebGLPrograms( renderer, extensions, capabilities ) {\n\n\tvar programs = [];\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\tvar logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\n\tvar floatVertexTextures = capabilities.floatVertexTextures;\n\tvar precision = capabilities.precision;\n\tvar maxVertexUniforms = capabilities.maxVertexUniforms;\n\tvar vertexTextures = capabilities.vertexTextures;\n\n\tvar shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshDistanceMaterial: 'distanceRGBA',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'phong',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tMeshMatcapMaterial: 'matcap',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points',\n\t\tShadowMaterial: 'shadow',\n\t\tSpriteMaterial: 'sprite'\n\t};\n\n\tvar parameterNames = [\n\t\t\"precision\", \"isWebGL2\", \"supportsVertexTextures\", \"outputEncoding\", \"instancing\", \"numMultiviewViews\",\n\t\t\"map\", \"mapEncoding\", \"matcap\", \"matcapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\", \"envMapCubeUV\",\n\t\t\"lightMap\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"objectSpaceNormalMap\", \"tangentSpaceNormalMap\", \"clearcoatNormalMap\", \"displacementMap\", \"specularMap\",\n\t\t\"roughnessMap\", \"metalnessMap\", \"gradientMap\",\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"vertexTangents\", \"vertexUvs\", \"uvsVertexOnly\", \"fog\", \"useFog\", \"fogExp2\",\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\n\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\", \"numRectAreaLights\",\n\t\t\"numDirLightShadows\", \"numPointLightShadows\", \"numSpotLightShadows\",\n\t\t\"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\n\t\t\"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"numClipIntersection\", \"depthPacking\", \"dithering\",\n\t\t\"sheen\"\n\t];\n\n\n\tfunction allocateBones( object ) {\n\n\t\tvar skeleton = object.skeleton;\n\t\tvar bones = skeleton.bones;\n\n\t\tif ( floatVertexTextures ) {\n\n\t\t\treturn 1024;\n\n\t\t} else {\n\n\t\t\t// default for when object is not specified\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\n\t\t\t//\n\t\t\t//  - leave some extra space for other uniforms\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\n\t\t\t//    (up to 54 should be safe)\n\n\t\t\tvar nVertexUniforms = maxVertexUniforms;\n\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\n\n\t\t\tvar maxBones = Math.min( nVertexMatrices, bones.length );\n\n\t\t\tif ( maxBones < bones.length ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.' );\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\treturn maxBones;\n\n\t\t}\n\n\t}\n\n\tfunction getTextureEncodingFromMap( map, gammaOverrideLinear ) {\n\n\t\tvar encoding;\n\n\t\tif ( ! map ) {\n\n\t\t\tencoding = LinearEncoding;\n\n\t\t} else if ( map.isTexture ) {\n\n\t\t\tencoding = map.encoding;\n\n\t\t} else if ( map.isWebGLRenderTarget ) {\n\n\t\t\tconsole.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\tencoding = map.texture.encoding;\n\n\t\t}\n\n\t\t// add backwards compatibility for WebGLRenderer.gammaInput/gammaOutput parameter, should probably be removed at some point.\n\t\tif ( encoding === LinearEncoding && gammaOverrideLinear ) {\n\n\t\t\tencoding = GammaEncoding;\n\n\t\t}\n\n\t\treturn encoding;\n\n\t}\n\n\tthis.getParameters = function ( material, lights, shadows, fog, nClipPlanes, nClipIntersection, object ) {\n\n\t\tvar shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tvar maxBones = object.isSkinnedMesh ? allocateBones( object ) : 0;\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar currentRenderTarget = renderer.getRenderTarget();\n\t\tvar numMultiviewViews = currentRenderTarget && currentRenderTarget.isWebGLMultiviewRenderTarget ? currentRenderTarget.numViews : 0;\n\n\t\tvar parameters = {\n\n\t\t\tisWebGL2: isWebGL2,\n\n\t\t\tshaderID: shaderID,\n\n\t\t\tprecision: precision,\n\n\t\t\tinstancing: object.isInstancedMesh === true,\n\n\t\t\tsupportsVertexTextures: vertexTextures,\n\t\t\tnumMultiviewViews: numMultiviewViews,\n\t\t\toutputEncoding: getTextureEncodingFromMap( ( ! currentRenderTarget ) ? null : currentRenderTarget.texture, renderer.gammaOutput ),\n\t\t\tmap: !! material.map,\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map, renderer.gammaInput ),\n\t\t\tmatcap: !! material.matcap,\n\t\t\tmatcapEncoding: getTextureEncodingFromMap( material.matcap, renderer.gammaInput ),\n\t\t\tenvMap: !! material.envMap,\n\t\t\tenvMapMode: material.envMap && material.envMap.mapping,\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( material.envMap, renderer.gammaInput ),\n\t\t\tenvMapCubeUV: ( !! material.envMap ) && ( ( material.envMap.mapping === CubeUVReflectionMapping ) || ( material.envMap.mapping === CubeUVRefractionMapping ) ),\n\t\t\tlightMap: !! material.lightMap,\n\t\t\taoMap: !! material.aoMap,\n\t\t\temissiveMap: !! material.emissiveMap,\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap, renderer.gammaInput ),\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tobjectSpaceNormalMap: material.normalMapType === ObjectSpaceNormalMap,\n\t\t\ttangentSpaceNormalMap: material.normalMapType === TangentSpaceNormalMap,\n\t\t\tclearcoatNormalMap: !! material.clearcoatNormalMap,\n\t\t\tdisplacementMap: !! material.displacementMap,\n\t\t\troughnessMap: !! material.roughnessMap,\n\t\t\tmetalnessMap: !! material.metalnessMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\talphaMap: !! material.alphaMap,\n\n\t\t\tgradientMap: !! material.gradientMap,\n\n\t\t\tsheen: !! material.sheen,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexTangents: ( material.normalMap && material.vertexTangents ),\n\t\t\tvertexColors: material.vertexColors,\n\t\t\tvertexUvs: !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatNormalMap || !! material.displacementMap,\n\t\t\tuvsVertexOnly: ! ( !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatNormalMap ) && !! material.displacementMap,\n\n\t\t\tfog: !! fog,\n\t\t\tuseFog: material.fog,\n\t\t\tfogExp2: ( fog && fog.isFogExp2 ),\n\n\t\t\tflatShading: material.flatShading,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\t\tskinning: material.skinning && maxBones > 0,\n\t\t\tmaxBones: maxBones,\n\t\t\tuseVertexTexture: floatVertexTextures,\n\n\t\t\tmorphTargets: material.morphTargets,\n\t\t\tmorphNormals: material.morphNormals,\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumDirLightShadows: lights.directionalShadowMap.length,\n\t\t\tnumPointLightShadows: lights.pointShadowMap.length,\n\t\t\tnumSpotLightShadows: lights.spotShadowMap.length,\n\n\t\t\tnumClippingPlanes: nClipPlanes,\n\t\t\tnumClipIntersection: nClipIntersection,\n\n\t\t\tdithering: material.dithering,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: material.toneMapped ? renderer.toneMapping : NoToneMapping,\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\talphaTest: material.alphaTest,\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false\n\n\t\t};\n\n\t\treturn parameters;\n\n\t};\n\n\tthis.getProgramCacheKey = function ( material, parameters ) {\n\n\t\tvar array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( material.fragmentShader );\n\t\t\tarray.push( material.vertexShader );\n\n\t\t}\n\n\t\tif ( material.defines !== undefined ) {\n\n\t\t\tfor ( var name in material.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( material.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var i = 0; i < parameterNames.length; i ++ ) {\n\n\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\n\n\t\t}\n\n\t\tarray.push( material.onBeforeCompile.toString() );\n\n\t\tarray.push( renderer.gammaOutput );\n\n\t\tarray.push( renderer.gammaFactor );\n\n\t\treturn array.join();\n\n\t};\n\n\tthis.acquireProgram = function ( material, shader, parameters, cacheKey ) {\n\n\t\tvar program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( var p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tvar preexistingProgram = programs[ p ];\n\n\t\t\tif ( preexistingProgram.cacheKey === cacheKey ) {\n\n\t\t\t\tprogram = preexistingProgram;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new WebGLProgram( renderer, extensions, cacheKey, material, shader, parameters );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t};\n\n\tthis.releaseProgram = function ( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tvar i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t};\n\n\t// Exposed for resource monitoring & error feedback via renderer.info:\n\tthis.programs = programs;\n\n}\n\n\nexport { WebGLPrograms };\n","/**\n * @author fordacious / fordacious.github.io\n */\n\nfunction WebGLProperties() {\n\n\tvar properties = new WeakMap();\n\n\tfunction get( object ) {\n\n\t\tvar map = properties.get( object );\n\n\t\tif ( map === undefined ) {\n\n\t\t\tmap = {};\n\t\t\tproperties.set( object, map );\n\n\t\t}\n\n\t\treturn map;\n\n\t}\n\n\tfunction remove( object ) {\n\n\t\tproperties.delete( object );\n\n\t}\n\n\tfunction update( object, key, value ) {\n\n\t\tproperties.get( object )[ key ] = value;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tproperties = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLProperties };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction painterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.program !== b.program ) {\n\n\t\treturn a.program.id - b.program.id;\n\n\t} else if ( a.material.id !== b.material.id ) {\n\n\t\treturn a.material.id - b.material.id;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn a.z - b.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction reversePainterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn b.z - a.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\n\nfunction WebGLRenderList() {\n\n\tvar renderItems = [];\n\tvar renderItemsIndex = 0;\n\n\tvar opaque = [];\n\tvar transparent = [];\n\n\tvar defaultProgram = { id: - 1 };\n\n\tfunction init() {\n\n\t\trenderItemsIndex = 0;\n\n\t\topaque.length = 0;\n\t\ttransparent.length = 0;\n\n\t}\n\n\tfunction getNextRenderItem( object, geometry, material, groupOrder, z, group ) {\n\n\t\tvar renderItem = renderItems[ renderItemsIndex ];\n\n\t\tif ( renderItem === undefined ) {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tprogram: material.program || defaultProgram,\n\t\t\t\tgroupOrder: groupOrder,\n\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\tz: z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\n\n\t\t} else {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.program = material.program || defaultProgram;\n\t\t\trenderItem.groupOrder = groupOrder;\n\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\trenderItem.z = z;\n\t\t\trenderItem.group = group;\n\n\t\t}\n\n\t\trenderItemsIndex ++;\n\n\t\treturn renderItem;\n\n\t}\n\n\tfunction push( object, geometry, material, groupOrder, z, group ) {\n\n\t\tvar renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\t( material.transparent === true ? transparent : opaque ).push( renderItem );\n\n\t}\n\n\tfunction unshift( object, geometry, material, groupOrder, z, group ) {\n\n\t\tvar renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\t( material.transparent === true ? transparent : opaque ).unshift( renderItem );\n\n\t}\n\n\tfunction sort() {\n\n\t\tif ( opaque.length > 1 ) opaque.sort( painterSortStable );\n\t\tif ( transparent.length > 1 ) transparent.sort( reversePainterSortStable );\n\n\t}\n\n\treturn {\n\t\topaque: opaque,\n\t\ttransparent: transparent,\n\n\t\tinit: init,\n\t\tpush: push,\n\t\tunshift: unshift,\n\n\t\tsort: sort\n\t};\n\n}\n\nfunction WebGLRenderLists() {\n\n\tvar lists = new WeakMap();\n\n\tfunction onSceneDispose( event ) {\n\n\t\tvar scene = event.target;\n\n\t\tscene.removeEventListener( 'dispose', onSceneDispose );\n\n\t\tlists.delete( scene );\n\n\t}\n\n\tfunction get( scene, camera ) {\n\n\t\tvar cameras = lists.get( scene );\n\t\tvar list;\n\t\tif ( cameras === undefined ) {\n\n\t\t\tlist = new WebGLRenderList();\n\t\t\tlists.set( scene, new WeakMap() );\n\t\t\tlists.get( scene ).set( camera, list );\n\n\t\t\tscene.addEventListener( 'dispose', onSceneDispose );\n\n\t\t} else {\n\n\t\t\tlist = cameras.get( camera );\n\t\t\tif ( list === undefined ) {\n\n\t\t\t\tlist = new WebGLRenderList();\n\t\t\t\tcameras.set( camera, list );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn list;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tlists = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLRenderLists };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Color } from '../../math/Color.js';\nimport { Matrix4 } from '../../math/Matrix4.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Vector3 } from '../../math/Vector3.js';\n\nfunction UniformsCache() {\n\n\tvar lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tvar uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tconeCos: 0,\n\t\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\t\tdecay: 0,\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tdecay: 0,\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2(),\n\t\t\t\t\t\tshadowCameraNear: 1,\n\t\t\t\t\t\tshadowCameraFar: 1000\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tskyColor: new Color(),\n\t\t\t\t\t\tgroundColor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RectAreaLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\thalfWidth: new Vector3(),\n\t\t\t\t\t\thalfHeight: new Vector3()\n\t\t\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\nvar nextVersion = 0;\n\nfunction shadowCastingLightsFirst( lightA, lightB ) {\n\n\treturn ( lightB.castShadow ? 1 : 0 ) - ( lightA.castShadow ? 1 : 0 );\n\n}\n\nfunction WebGLLights() {\n\n\tvar cache = new UniformsCache();\n\n\tvar state = {\n\n\t\tversion: 0,\n\n\t\thash: {\n\t\t\tdirectionalLength: - 1,\n\t\t\tpointLength: - 1,\n\t\t\tspotLength: - 1,\n\t\t\trectAreaLength: - 1,\n\t\t\themiLength: - 1,\n\n\t\t\tnumDirectionalShadows: - 1,\n\t\t\tnumPointShadows: - 1,\n\t\t\tnumSpotShadows: - 1,\n\t\t},\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tprobe: [],\n\t\tdirectional: [],\n\t\tdirectionalShadowMap: [],\n\t\tdirectionalShadowMatrix: [],\n\t\tspot: [],\n\t\tspotShadowMap: [],\n\t\tspotShadowMatrix: [],\n\t\trectArea: [],\n\t\tpoint: [],\n\t\tpointShadowMap: [],\n\t\tpointShadowMatrix: [],\n\t\themi: [],\n\n\t\tnumDirectionalShadows: - 1,\n\t\tnumPointShadows: - 1,\n\t\tnumSpotShadows: - 1\n\n\t};\n\n\tfor ( var i = 0; i < 9; i ++ ) state.probe.push( new Vector3() );\n\n\tvar vector3 = new Vector3();\n\tvar matrix4 = new Matrix4();\n\tvar matrix42 = new Matrix4();\n\n\tfunction setup( lights, shadows, camera ) {\n\n\t\tvar r = 0, g = 0, b = 0;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) state.probe[ i ].set( 0, 0, 0 );\n\n\t\tvar directionalLength = 0;\n\t\tvar pointLength = 0;\n\t\tvar spotLength = 0;\n\t\tvar rectAreaLength = 0;\n\t\tvar hemiLength = 0;\n\n\t\tvar numDirectionalShadows = 0;\n\t\tvar numPointShadows = 0;\n\t\tvar numSpotShadows = 0;\n\n\t\tvar viewMatrix = camera.matrixWorldInverse;\n\n\t\tlights.sort( shadowCastingLightsFirst );\n\n\t\tfor ( var i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tvar light = lights[ i ];\n\n\t\t\tvar color = light.color;\n\t\t\tvar intensity = light.intensity;\n\t\t\tvar distance = light.distance;\n\n\t\t\tvar shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\tr += color.r * intensity;\n\t\t\t\tg += color.g * intensity;\n\t\t\t\tb += color.b * intensity;\n\n\t\t\t} else if ( light.isLightProbe ) {\n\n\t\t\t\tfor ( var j = 0; j < 9; j ++ ) {\n\n\t\t\t\t\tstate.probe[ j ].addScaledVector( light.sh.coefficients[ j ], intensity );\n\n\t\t\t\t}\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tvar shadow = light.shadow;\n\n\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\t\tstate.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumDirectionalShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.directional[ directionalLength ] = uniforms;\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tvar shadow = light.shadow;\n\n\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.spotShadowMap[ spotLength ] = shadowMap;\n\t\t\t\t\tstate.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumSpotShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.spot[ spotLength ] = uniforms;\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\t// (a) intensity is the total visible light emitted\n\t\t\t\t//uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\n\n\t\t\t\t// (b) intensity is the brightness of the light\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\n\t\t\t\tmatrix42.identity();\n\t\t\t\tmatrix4.copy( light.matrixWorld );\n\t\t\t\tmatrix4.premultiply( viewMatrix );\n\t\t\t\tmatrix42.extractRotation( matrix4 );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tuniforms.halfWidth.applyMatrix4( matrix42 );\n\t\t\t\tuniforms.halfHeight.applyMatrix4( matrix42 );\n\n\t\t\t\t// TODO (abelnation): RectAreaLight distance?\n\t\t\t\t// uniforms.distance = distance;\n\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tvar shadow = light.shadow;\n\n\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\t\t\t\t\tuniforms.shadowCameraNear = shadow.camera.near;\n\t\t\t\t\tuniforms.shadowCameraFar = shadow.camera.far;\n\n\t\t\t\t\tstate.pointShadowMap[ pointLength ] = shadowMap;\n\t\t\t\t\tstate.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumPointShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.point[ pointLength ] = uniforms;\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\t\t\t\tuniforms.direction.normalize();\n\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\n\n\t\t\t\tstate.hemi[ hemiLength ] = uniforms;\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.ambient[ 0 ] = r;\n\t\tstate.ambient[ 1 ] = g;\n\t\tstate.ambient[ 2 ] = b;\n\n\t\tvar hash = state.hash;\n\n\t\tif ( hash.directionalLength !== directionalLength ||\n\t\t\thash.pointLength !== pointLength ||\n\t\t\thash.spotLength !== spotLength ||\n\t\t\thash.rectAreaLength !== rectAreaLength ||\n\t\t\thash.hemiLength !== hemiLength ||\n\t\t\thash.numDirectionalShadows !== numDirectionalShadows ||\n\t\t\thash.numPointShadows !== numPointShadows ||\n\t\t\thash.numSpotShadows !== numSpotShadows ) {\n\n\t\t\tstate.directional.length = directionalLength;\n\t\t\tstate.spot.length = spotLength;\n\t\t\tstate.rectArea.length = rectAreaLength;\n\t\t\tstate.point.length = pointLength;\n\t\t\tstate.hemi.length = hemiLength;\n\n\t\t\tstate.directionalShadowMap.length = numDirectionalShadows;\n\t\t\tstate.pointShadowMap.length = numPointShadows;\n\t\t\tstate.spotShadowMap.length = numSpotShadows;\n\t\t\tstate.directionalShadowMatrix.length = numDirectionalShadows;\n\t\t\tstate.pointShadowMatrix.length = numPointShadows;\n\t\t\tstate.spotShadowMatrix.length = numSpotShadows;\n\n\t\t\thash.directionalLength = directionalLength;\n\t\t\thash.pointLength = pointLength;\n\t\t\thash.spotLength = spotLength;\n\t\t\thash.rectAreaLength = rectAreaLength;\n\t\t\thash.hemiLength = hemiLength;\n\n\t\t\thash.numDirectionalShadows = numDirectionalShadows;\n\t\t\thash.numPointShadows = numPointShadows;\n\t\t\thash.numSpotShadows = numSpotShadows;\n\n\t\t\tstate.version = nextVersion ++;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tsetup: setup,\n\t\tstate: state\n\t};\n\n}\n\n\nexport { WebGLLights };\n","/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { WebGLLights } from './WebGLLights.js';\n\nfunction WebGLRenderState() {\n\n\tvar lights = new WebGLLights();\n\n\tvar lightsArray = [];\n\tvar shadowsArray = [];\n\n\tfunction init() {\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\n\t}\n\n\tfunction pushLight( light ) {\n\n\t\tlightsArray.push( light );\n\n\t}\n\n\tfunction pushShadow( shadowLight ) {\n\n\t\tshadowsArray.push( shadowLight );\n\n\t}\n\n\tfunction setupLights( camera ) {\n\n\t\tlights.setup( lightsArray, shadowsArray, camera );\n\n\t}\n\n\tvar state = {\n\t\tlightsArray: lightsArray,\n\t\tshadowsArray: shadowsArray,\n\n\t\tlights: lights\n\t};\n\n\treturn {\n\t\tinit: init,\n\t\tstate: state,\n\t\tsetupLights: setupLights,\n\n\t\tpushLight: pushLight,\n\t\tpushShadow: pushShadow\n\t};\n\n}\n\nfunction WebGLRenderStates() {\n\n\tvar renderStates = new WeakMap();\n\n\tfunction onSceneDispose( event ) {\n\n\t\tvar scene = event.target;\n\n\t\tscene.removeEventListener( 'dispose', onSceneDispose );\n\n\t\trenderStates.delete( scene );\n\n\t}\n\n\tfunction get( scene, camera ) {\n\n\t\tvar renderState;\n\n\t\tif ( renderStates.has( scene ) === false ) {\n\n\t\t\trenderState = new WebGLRenderState();\n\t\t\trenderStates.set( scene, new WeakMap() );\n\t\t\trenderStates.get( scene ).set( camera, renderState );\n\n\t\t\tscene.addEventListener( 'dispose', onSceneDispose );\n\n\t\t} else {\n\n\t\t\tif ( renderStates.get( scene ).has( camera ) === false ) {\n\n\t\t\t\trenderState = new WebGLRenderState();\n\t\t\t\trenderStates.get( scene ).set( camera, renderState );\n\n\t\t\t} else {\n\n\t\t\t\trenderState = renderStates.get( scene ).get( camera );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn renderState;\n\n\t}\n\n\tfunction dispose() {\n\n\t\trenderStates = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLRenderStates };\n","import { EventDispatcher } from '../core/EventDispatcher.js';\nimport { Texture } from '../textures/Texture.js';\nimport { LinearFilter } from '../constants.js';\nimport { Vector4 } from '../math/Vector4.js';\n\n/**\n * @author szimek / https://github.com/szimek/\n * @author alteredq / http://alteredqualia.com/\n * @author Marius Kintel / https://github.com/kintel\n */\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nfunction WebGLRenderTarget( width, height, options ) {\n\n\tthis.width = width;\n\tthis.height = height;\n\n\tthis.scissor = new Vector4( 0, 0, width, height );\n\tthis.scissorTest = false;\n\n\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\toptions = options || {};\n\n\tthis.texture = new Texture( undefined, undefined, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\tthis.texture.image = {};\n\tthis.texture.image.width = width;\n\tthis.texture.image.height = height;\n\n\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\n\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n\n}\n\nWebGLRenderTarget.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: WebGLRenderTarget,\n\n\tisWebGLRenderTarget: true,\n\n\tsetSize: function ( width, height ) {\n\n\t\tif ( this.width !== width || this.height !== height ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\n\t\t\tthis.texture.image.width = width;\n\t\t\tthis.texture.image.height = height;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\t\tthis.depthTexture = source.depthTexture;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { WebGLRenderTarget };\n","import { Material } from './Material.js';\nimport { BasicDepthPacking } from '../constants.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / https://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nfunction MeshDepthMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDepthMaterial';\n\n\tthis.depthPacking = BasicDepthPacking;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDepthMaterial.prototype = Object.create( Material.prototype );\nMeshDepthMaterial.prototype.constructor = MeshDepthMaterial;\n\nMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\n\nMeshDepthMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.depthPacking = source.depthPacking;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\treturn this;\n\n};\n\n\nexport { MeshDepthMaterial };\n","import { Material } from './Material.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *\n *  referencePosition: <float>,\n *  nearDistance: <float>,\n *  farDistance: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>\n *\n * }\n */\n\nfunction MeshDistanceMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDistanceMaterial';\n\n\tthis.referencePosition = new Vector3();\n\tthis.nearDistance = 1;\n\tthis.farDistance = 1000;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.fog = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDistanceMaterial.prototype = Object.create( Material.prototype );\nMeshDistanceMaterial.prototype.constructor = MeshDistanceMaterial;\n\nMeshDistanceMaterial.prototype.isMeshDistanceMaterial = true;\n\nMeshDistanceMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.referencePosition.copy( source.referencePosition );\n\tthis.nearDistance = source.nearDistance;\n\tthis.farDistance = source.farDistance;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\treturn this;\n\n};\n\n\nexport { MeshDistanceMaterial };\n","export default /* glsl */`\nuniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n\n#include <packing>\n\nvoid main() {\n\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\n\t// This seems totally useless but it's a crazy work around for a Adreno compiler bug\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\n    #ifdef HORIZONAL_PASS\n\n      vec2 distribution = unpack2HalfToRGBA ( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\n    #else\n\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n\n    #endif\n\n  }\n\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n\n  float std_dev = sqrt( squared_mean - mean * mean );\n\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n\n}\n`;\n","export default /* glsl */`\n\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n\n`;\n","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { FrontSide, BackSide, DoubleSide, RGBAFormat, NearestFilter, LinearFilter, PCFShadowMap, VSMShadowMap, RGBADepthPacking, NoBlending } from '../../constants.js';\nimport { WebGLRenderTarget } from '../WebGLRenderTarget.js';\nimport { MeshDepthMaterial } from '../../materials/MeshDepthMaterial.js';\nimport { MeshDistanceMaterial } from '../../materials/MeshDistanceMaterial.js';\nimport { ShaderMaterial } from '../../materials/ShaderMaterial.js';\nimport { BufferAttribute } from '../../core/BufferAttribute.js';\nimport { BufferGeometry } from '../../core/BufferGeometry.js';\nimport { Mesh } from '../../objects/Mesh.js';\nimport { Vector4 } from '../../math/Vector4.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Frustum } from '../../math/Frustum.js';\n\nimport vsm_frag from '../shaders/ShaderLib/vsm_frag.glsl.js';\nimport vsm_vert from '../shaders/ShaderLib/vsm_vert.glsl.js';\n\nfunction WebGLShadowMap( _renderer, _objects, maxTextureSize ) {\n\n\tvar _frustum = new Frustum(),\n\n\t\t_shadowMapSize = new Vector2(),\n\t\t_viewportSize = new Vector2(),\n\n\t\t_viewport = new Vector4(),\n\n\t\t_depthMaterials = [],\n\t\t_distanceMaterials = [],\n\n\t\t_materialCache = {};\n\n\tvar shadowSide = { 0: BackSide, 1: FrontSide, 2: DoubleSide };\n\n\tvar shadowMaterialVertical = new ShaderMaterial( {\n\n\t\tdefines: {\n\t\t\tSAMPLE_RATE: 2.0 / 8.0,\n\t\t\tHALF_SAMPLE_RATE: 1.0 / 8.0\n\t\t},\n\n\t\tuniforms: {\n\t\t\tshadow_pass: { value: null },\n\t\t\tresolution: { value: new Vector2() },\n\t\t\tradius: { value: 4.0 }\n\t\t},\n\n\t\tvertexShader: vsm_vert,\n\n\t\tfragmentShader: vsm_frag\n\n\t} );\n\n\tvar shadowMaterialHorizonal = shadowMaterialVertical.clone();\n\tshadowMaterialHorizonal.defines.HORIZONAL_PASS = 1;\n\n\tvar fullScreenTri = new BufferGeometry();\n\tfullScreenTri.setAttribute(\n\t\t\"position\",\n\t\tnew BufferAttribute(\n\t\t\tnew Float32Array( [ - 1, - 1, 0.5, 3, - 1, 0.5, - 1, 3, 0.5 ] ),\n\t\t\t3\n\t\t)\n\t);\n\n\tvar fullScreenMesh = new Mesh( fullScreenTri, shadowMaterialVertical );\n\n\tvar scope = this;\n\n\tthis.enabled = false;\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis.type = PCFShadowMap;\n\n\tthis.render = function ( lights, scene, camera ) {\n\n\t\tif ( scope.enabled === false ) return;\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\tif ( lights.length === 0 ) return;\n\n\t\tvar currentRenderTarget = _renderer.getRenderTarget();\n\t\tvar activeCubeFace = _renderer.getActiveCubeFace();\n\t\tvar activeMipmapLevel = _renderer.getActiveMipmapLevel();\n\n\t\tvar _state = _renderer.state;\n\n\t\t// Set GL state for depth map.\n\t\t_state.setBlending( NoBlending );\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\n\t\t_state.buffers.depth.setTest( true );\n\t\t_state.setScissorTest( false );\n\n\t\t// render depth map\n\n\t\tfor ( var i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\tvar light = lights[ i ];\n\t\t\tvar shadow = light.shadow;\n\n\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\n\t\t\tvar shadowFrameExtents = shadow.getFrameExtents();\n\n\t\t\t_shadowMapSize.multiply( shadowFrameExtents );\n\n\t\t\t_viewportSize.copy( shadow.mapSize );\n\n\t\t\tif ( _shadowMapSize.x > maxTextureSize || _shadowMapSize.y > maxTextureSize ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has shadow exceeding max texture size, reducing' );\n\n\t\t\t\tif ( _shadowMapSize.x > maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.x = Math.floor( maxTextureSize / shadowFrameExtents.x );\n\t\t\t\t\t_shadowMapSize.x = _viewportSize.x * shadowFrameExtents.x;\n\t\t\t\t\tshadow.mapSize.x = _viewportSize.x;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _shadowMapSize.y > maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.y = Math.floor( maxTextureSize / shadowFrameExtents.y );\n\t\t\t\t\t_shadowMapSize.y = _viewportSize.y * shadowFrameExtents.y;\n\t\t\t\t\tshadow.mapSize.y = _viewportSize.y;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null && ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\n\n\t\t\t\tvar pars = { minFilter: LinearFilter, magFilter: LinearFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\n\n\t\t\t\tshadow.mapPass = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null ) {\n\n\t\t\t\tvar pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\t_renderer.setRenderTarget( shadow.map );\n\t\t\t_renderer.clear();\n\n\t\t\tvar viewportCount = shadow.getViewportCount();\n\n\t\t\tfor ( var vp = 0; vp < viewportCount; vp ++ ) {\n\n\t\t\t\tvar viewport = shadow.getViewport( vp );\n\n\t\t\t\t_viewport.set(\n\t\t\t\t\t_viewportSize.x * viewport.x,\n\t\t\t\t\t_viewportSize.y * viewport.y,\n\t\t\t\t\t_viewportSize.x * viewport.z,\n\t\t\t\t\t_viewportSize.y * viewport.w\n\t\t\t\t);\n\n\t\t\t\t_state.viewport( _viewport );\n\n\t\t\t\tshadow.updateMatrices( light, vp );\n\n\t\t\t\t_frustum = shadow.getFrustum();\n\n\t\t\t\trenderObject( scene, camera, shadow.camera, light, this.type );\n\n\t\t\t}\n\n\t\t\t// do blur pass for VSM\n\n\t\t\tif ( ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\n\n\t\t\t\tVSMPass( shadow, camera );\n\n\t\t\t}\n\n\t\t}\n\n\t\tscope.needsUpdate = false;\n\n\t\t_renderer.setRenderTarget( currentRenderTarget, activeCubeFace, activeMipmapLevel );\n\n\t};\n\n\tfunction VSMPass( shadow, camera ) {\n\n\t\tvar geometry = _objects.update( fullScreenMesh );\n\n\t\t// vertical pass\n\n\t\tshadowMaterialVertical.uniforms.shadow_pass.value = shadow.map.texture;\n\t\tshadowMaterialVertical.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialVertical.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.mapPass );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialVertical, fullScreenMesh, null );\n\n\t\t// horizonal pass\n\n\t\tshadowMaterialHorizonal.uniforms.shadow_pass.value = shadow.mapPass.texture;\n\t\tshadowMaterialHorizonal.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialHorizonal.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.map );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialHorizonal, fullScreenMesh, null );\n\n\t}\n\n\tfunction getDepthMaterialVariant( useMorphing, useSkinning, useInstancing ) {\n\n\t\tvar index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\n\n\t\tvar material = _depthMaterials[ index ];\n\n\t\tif ( material === undefined ) {\n\n\t\t\tmaterial = new MeshDepthMaterial( {\n\n\t\t\t\tdepthPacking: RGBADepthPacking,\n\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\tskinning: useSkinning\n\n\t\t\t} );\n\n\t\t\t_depthMaterials[ index ] = material;\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n\tfunction getDistanceMaterialVariant( useMorphing, useSkinning, useInstancing ) {\n\n\t\tvar index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\n\n\t\tvar material = _distanceMaterials[ index ];\n\n\t\tif ( material === undefined ) {\n\n\t\t\tmaterial = new MeshDistanceMaterial( {\n\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\tskinning: useSkinning\n\n\t\t\t} );\n\n\t\t\t_distanceMaterials[ index ] = material;\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n\tfunction getDepthMaterial( object, material, light, shadowCameraNear, shadowCameraFar, type ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tvar result = null;\n\n\t\tvar getMaterialVariant = getDepthMaterialVariant;\n\t\tvar customMaterial = object.customDepthMaterial;\n\n\t\tif ( light.isPointLight === true ) {\n\n\t\t\tgetMaterialVariant = getDistanceMaterialVariant;\n\t\t\tcustomMaterial = object.customDistanceMaterial;\n\n\t\t}\n\n\t\tif ( customMaterial === undefined ) {\n\n\t\t\tvar useMorphing = false;\n\n\t\t\tif ( material.morphTargets === true ) {\n\n\t\t\t\tif ( geometry.isBufferGeometry === true ) {\n\n\t\t\t\t\tuseMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\n\n\t\t\t\t} else if ( geometry.isGeometry === true ) {\n\n\t\t\t\t\tuseMorphing = geometry.morphTargets && geometry.morphTargets.length > 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar useSkinning = false;\n\n\t\t\tif ( object.isSkinnedMesh === true ) {\n\n\t\t\t\tif ( material.skinning === true ) {\n\n\t\t\t\t\tuseSkinning = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:', object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar useInstancing = object.isInstancedMesh === true;\n\n\t\t\tresult = getMaterialVariant( useMorphing, useSkinning, useInstancing );\n\n\t\t} else {\n\n\t\t\tresult = customMaterial;\n\n\t\t}\n\n\t\tif ( _renderer.localClippingEnabled &&\n\t\t\t\tmaterial.clipShadows === true &&\n\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\n\n\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t// appropriate state\n\n\t\t\tvar keyA = result.uuid, keyB = material.uuid;\n\n\t\t\tvar materialsForVariant = _materialCache[ keyA ];\n\n\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t}\n\n\t\t\tvar cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\n\t\t\t}\n\n\t\t\tresult = cachedMaterial;\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tif ( type === VSMShadowMap ) {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : material.side;\n\n\t\t} else {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : shadowSide[ material.side ];\n\n\t\t}\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\t\tresult.clipIntersection = material.clipIntersection;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif ( light.isPointLight === true && result.isMeshDistanceMaterial === true ) {\n\n\t\t\tresult.referencePosition.setFromMatrixPosition( light.matrixWorld );\n\t\t\tresult.nearDistance = shadowCameraNear;\n\t\t\tresult.farDistance = shadowCameraFar;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction renderObject( object, camera, shadowCamera, light, type ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tvar visible = object.layers.test( camera.layers );\n\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\n\n\t\t\tif ( ( object.castShadow || ( object.receiveShadow && type === VSMShadowMap ) ) && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\n\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\tvar geometry = _objects.update( object );\n\t\t\t\tvar material = object.material;\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\tfor ( var k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\tvar group = groups[ k ];\n\t\t\t\t\t\tvar groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, groupMaterial, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, material, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( children[ i ], camera, shadowCamera, light, type );\n\n\t\t}\n\n\t}\n\n}\n\n\nexport { WebGLShadowMap };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { NotEqualDepth, GreaterDepth, GreaterEqualDepth, EqualDepth, LessEqualDepth, LessDepth, AlwaysDepth, NeverDepth, CullFaceFront, CullFaceBack, CullFaceNone, DoubleSide, BackSide, CustomBlending, MultiplyBlending, SubtractiveBlending, AdditiveBlending, NoBlending, NormalBlending, AddEquation, SubtractEquation, ReverseSubtractEquation, MinEquation, MaxEquation, ZeroFactor, OneFactor, SrcColorFactor, SrcAlphaFactor, SrcAlphaSaturateFactor, DstColorFactor, DstAlphaFactor, OneMinusSrcColorFactor, OneMinusSrcAlphaFactor, OneMinusDstColorFactor, OneMinusDstAlphaFactor } from '../../constants.js';\nimport { Vector4 } from '../../math/Vector4.js';\n\nfunction WebGLState( gl, extensions, capabilities ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\n\tfunction ColorBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar color = new Vector4();\n\t\tvar currentColorMask = null;\n\t\tvar currentColorClear = new Vector4( 0, 0, 0, 0 );\n\n\t\treturn {\n\n\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t}\n\n\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentColorMask = null;\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction DepthBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar currentDepthMask = null;\n\t\tvar currentDepthFunc = null;\n\t\tvar currentDepthClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\tenable( gl.DEPTH_TEST );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( gl.DEPTH_TEST );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\tif ( depthFunc ) {\n\n\t\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LESS );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentDepthMask = null;\n\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction StencilBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar currentStencilMask = null;\n\t\tvar currentStencilFunc = null;\n\t\tvar currentStencilRef = null;\n\t\tvar currentStencilFuncMask = null;\n\t\tvar currentStencilFail = null;\n\t\tvar currentStencilZFail = null;\n\t\tvar currentStencilZPass = null;\n\t\tvar currentStencilClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\tif ( ! locked ) {\n\n\t\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\t\tenable( gl.STENCIL_TEST );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdisable( gl.STENCIL_TEST );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t     currentStencilRef \t!== stencilRef \t||\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\tif ( currentStencilFail\t !== stencilFail \t||\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentStencilMask = null;\n\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\tcurrentStencilRef = null;\n\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\tcurrentStencilFail = null;\n\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tvar colorBuffer = new ColorBuffer();\n\tvar depthBuffer = new DepthBuffer();\n\tvar stencilBuffer = new StencilBuffer();\n\n\tvar maxVertexAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tvar newAttributes = new Uint8Array( maxVertexAttributes );\n\tvar enabledAttributes = new Uint8Array( maxVertexAttributes );\n\tvar attributeDivisors = new Uint8Array( maxVertexAttributes );\n\n\tvar enabledCapabilities = {};\n\n\tvar currentProgram = null;\n\n\tvar currentBlendingEnabled = null;\n\tvar currentBlending = null;\n\tvar currentBlendEquation = null;\n\tvar currentBlendSrc = null;\n\tvar currentBlendDst = null;\n\tvar currentBlendEquationAlpha = null;\n\tvar currentBlendSrcAlpha = null;\n\tvar currentBlendDstAlpha = null;\n\tvar currentPremultipledAlpha = false;\n\n\tvar currentFlipSided = null;\n\tvar currentCullFace = null;\n\n\tvar currentLineWidth = null;\n\n\tvar currentPolygonOffsetFactor = null;\n\tvar currentPolygonOffsetUnits = null;\n\n\tvar maxTextures = gl.getParameter( gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS );\n\n\tvar lineWidthAvailable = false;\n\tvar version = 0;\n\tvar glVersion = gl.getParameter( gl.VERSION );\n\n\tif ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^WebGL\\ ([0-9])/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 1.0 );\n\n\t} else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^OpenGL\\ ES\\ ([0-9])/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 2.0 );\n\n\t}\n\n\tvar currentTextureSlot = null;\n\tvar currentBoundTextures = {};\n\n\tvar currentScissor = new Vector4();\n\tvar currentViewport = new Vector4();\n\n\tfunction createTexture( type, target, count ) {\n\n\t\tvar data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tvar texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( type, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\n\t\tfor ( var i = 0; i < count; i ++ ) {\n\n\t\t\tgl.texImage2D( target + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, data );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tvar emptyTextures = {};\n\temptyTextures[ gl.TEXTURE_2D ] = createTexture( gl.TEXTURE_2D, gl.TEXTURE_2D, 1 );\n\temptyTextures[ gl.TEXTURE_CUBE_MAP ] = createTexture( gl.TEXTURE_CUBE_MAP, gl.TEXTURE_CUBE_MAP_POSITIVE_X, 6 );\n\n\t// init\n\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\tdepthBuffer.setClear( 1 );\n\tstencilBuffer.setClear( 0 );\n\n\tenable( gl.DEPTH_TEST );\n\tdepthBuffer.setFunc( LessEqualDepth );\n\n\tsetFlipSided( false );\n\tsetCullFace( CullFaceBack );\n\tenable( gl.CULL_FACE );\n\n\tsetBlending( NoBlending );\n\n\t//\n\n\tfunction initAttributes() {\n\n\t\tfor ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tenableAttributeAndDivisor( attribute, 0 );\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\tvar extension = isWebGL2 ? gl : extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension[ isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE' ]( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tfor ( var i = 0, l = enabledAttributes.length; i !== l; ++ i ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction enable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tenabledCapabilities[ id ] = true;\n\n\t\t}\n\n\t}\n\n\tfunction disable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tenabledCapabilities[ id ] = false;\n\n\t\t}\n\n\t}\n\n\tfunction useProgram( program ) {\n\n\t\tif ( currentProgram !== program ) {\n\n\t\t\tgl.useProgram( program );\n\n\t\t\tcurrentProgram = program;\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tvar equationToGL = {\n\t\t[ AddEquation ]: gl.FUNC_ADD,\n\t\t[ SubtractEquation ]: gl.FUNC_SUBTRACT,\n\t\t[ ReverseSubtractEquation ]: gl.FUNC_REVERSE_SUBTRACT\n\t};\n\n\tif ( isWebGL2 ) {\n\n\t\tequationToGL[ MinEquation ] = gl.MIN;\n\t\tequationToGL[ MaxEquation ] = gl.MAX;\n\n\t} else {\n\n\t\tvar extension = extensions.get( 'EXT_blend_minmax' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tequationToGL[ MinEquation ] = extension.MIN_EXT;\n\t\t\tequationToGL[ MaxEquation ] = extension.MAX_EXT;\n\n\t\t}\n\n\t}\n\n\tvar factorToGL = {\n\t\t[ ZeroFactor ]: gl.ZERO,\n\t\t[ OneFactor ]: gl.ONE,\n\t\t[ SrcColorFactor ]: gl.SRC_COLOR,\n\t\t[ SrcAlphaFactor ]: gl.SRC_ALPHA,\n\t\t[ SrcAlphaSaturateFactor ]: gl.SRC_ALPHA_SATURATE,\n\t\t[ DstColorFactor ]: gl.DST_COLOR,\n\t\t[ DstAlphaFactor ]: gl.DST_ALPHA,\n\t\t[ OneMinusSrcColorFactor ]: gl.ONE_MINUS_SRC_COLOR,\n\t\t[ OneMinusSrcAlphaFactor ]: gl.ONE_MINUS_SRC_ALPHA,\n\t\t[ OneMinusDstColorFactor ]: gl.ONE_MINUS_DST_COLOR,\n\t\t[ OneMinusDstAlphaFactor ]: gl.ONE_MINUS_DST_ALPHA\n\t};\n\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending === NoBlending ) {\n\n\t\t\tif ( currentBlendingEnabled ) {\n\n\t\t\t\tdisable( gl.BLEND );\n\t\t\t\tcurrentBlendingEnabled = false;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( ! currentBlendingEnabled ) {\n\n\t\t\tenable( gl.BLEND );\n\t\t\tcurrentBlendingEnabled = true;\n\n\t\t}\n\n\t\tif ( blending !== CustomBlending ) {\n\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\t\tif ( currentBlendEquation !== AddEquation || currentBlendEquationAlpha !== AddEquation ) {\n\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\n\t\t\t\t\tcurrentBlendEquation = AddEquation;\n\t\t\t\t\tcurrentBlendEquationAlpha = AddEquation;\n\n\t\t\t\t}\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.ONE, gl.ONE );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tcurrentBlendSrc = null;\n\t\t\t\tcurrentBlendDst = null;\n\t\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t\t\tcurrentBlending = blending;\n\t\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// custom blending\n\n\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\tgl.blendEquationSeparate( equationToGL[ blendEquation ], equationToGL[ blendEquationAlpha ] );\n\n\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t}\n\n\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\tgl.blendFuncSeparate( factorToGL[ blendSrc ], factorToGL[ blendDst ], factorToGL[ blendSrcAlpha ], factorToGL[ blendDstAlpha ] );\n\n\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\tcurrentBlendDst = blendDst;\n\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t}\n\n\t\tcurrentBlending = blending;\n\t\tcurrentPremultipledAlpha = null;\n\n\t}\n\n\tfunction setMaterial( material, frontFaceCW ) {\n\n\t\tmaterial.side === DoubleSide\n\t\t\t? disable( gl.CULL_FACE )\n\t\t\t: enable( gl.CULL_FACE );\n\n\t\tvar flipSided = ( material.side === BackSide );\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\n\n\t\tsetFlipSided( flipSided );\n\n\t\t( material.blending === NormalBlending && material.transparent === false )\n\t\t\t? setBlending( NoBlending )\n\t\t\t: setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\n\n\t\tdepthBuffer.setFunc( material.depthFunc );\n\t\tdepthBuffer.setTest( material.depthTest );\n\t\tdepthBuffer.setMask( material.depthWrite );\n\t\tcolorBuffer.setMask( material.colorWrite );\n\n\t\tvar stencilWrite = material.stencilWrite;\n\t\tstencilBuffer.setTest( stencilWrite );\n\t\tif ( stencilWrite ) {\n\n\t\t\tstencilBuffer.setMask( material.stencilWriteMask );\n\t\t\tstencilBuffer.setFunc( material.stencilFunc, material.stencilRef, material.stencilFuncMask );\n\t\t\tstencilBuffer.setOp( material.stencilFail, material.stencilZFail, material.stencilZPass );\n\n\t\t}\n\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t}\n\n\t//\n\n\tfunction setFlipSided( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( gl.CW );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( gl.CCW );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t}\n\n\tfunction setCullFace( cullFace ) {\n\n\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\tenable( gl.CULL_FACE );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( gl.BACK );\n\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT_AND_BACK );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.CULL_FACE );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t}\n\n\tfunction setLineWidth( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tenable( gl.POLYGON_OFFSET_FILL );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.POLYGON_OFFSET_FILL );\n\n\t\t}\n\n\t}\n\n\tfunction setScissorTest( scissorTest ) {\n\n\t\tif ( scissorTest ) {\n\n\t\t\tenable( gl.SCISSOR_TEST );\n\n\t\t} else {\n\n\t\t\tdisable( gl.SCISSOR_TEST );\n\n\t\t}\n\n\t}\n\n\t// texture\n\n\tfunction activeTexture( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t}\n\n\tfunction bindTexture( webglType, webglTexture ) {\n\n\t\tif ( currentTextureSlot === null ) {\n\n\t\t\tactiveTexture();\n\n\t\t}\n\n\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t}\n\n\tfunction unbindTexture() {\n\n\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture !== undefined && boundTexture.type !== undefined ) {\n\n\t\t\tgl.bindTexture( boundTexture.type, null );\n\n\t\t\tboundTexture.type = undefined;\n\t\t\tboundTexture.texture = undefined;\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction scissor( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t}\n\n\tfunction viewport( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction reset() {\n\n\t\tfor ( var i = 0; i < enabledAttributes.length; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] === 1 ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tenabledCapabilities = {};\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentProgram = null;\n\n\t\tcurrentBlending = null;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tcolorBuffer.reset();\n\t\tdepthBuffer.reset();\n\t\tstencilBuffer.reset();\n\n\t}\n\n\treturn {\n\n\t\tbuffers: {\n\t\t\tcolor: colorBuffer,\n\t\t\tdepth: depthBuffer,\n\t\t\tstencil: stencilBuffer\n\t\t},\n\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tenableAttributeAndDivisor: enableAttributeAndDivisor,\n\t\tdisableUnusedAttributes: disableUnusedAttributes,\n\t\tenable: enable,\n\t\tdisable: disable,\n\n\t\tuseProgram: useProgram,\n\n\t\tsetBlending: setBlending,\n\t\tsetMaterial: setMaterial,\n\n\t\tsetFlipSided: setFlipSided,\n\t\tsetCullFace: setCullFace,\n\n\t\tsetLineWidth: setLineWidth,\n\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\tsetScissorTest: setScissorTest,\n\n\t\tactiveTexture: activeTexture,\n\t\tbindTexture: bindTexture,\n\t\tunbindTexture: unbindTexture,\n\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\ttexImage2D: texImage2D,\n\t\ttexImage3D: texImage3D,\n\n\t\tscissor: scissor,\n\t\tviewport: viewport,\n\n\t\treset: reset\n\n\t};\n\n}\n\nexport { WebGLState };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { LinearFilter, LinearMipmapLinearFilter, LinearMipmapNearestFilter, NearestFilter, NearestMipmapLinearFilter, NearestMipmapNearestFilter, RGBFormat, RGBAFormat, DepthFormat, DepthStencilFormat, UnsignedShortType, UnsignedIntType, UnsignedInt248Type, FloatType, HalfFloatType, MirroredRepeatWrapping, ClampToEdgeWrapping, RepeatWrapping } from '../../constants.js';\nimport { _Math } from '../../math/Math.js';\n\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\tvar maxTextures = capabilities.maxTextures;\n\tvar maxCubemapSize = capabilities.maxCubemapSize;\n\tvar maxTextureSize = capabilities.maxTextureSize;\n\tvar maxSamples = capabilities.maxSamples;\n\n\tvar _videoTextures = new WeakMap();\n\tvar _canvas;\n\n\t// cordova iOS (as of 5.0) still uses UIWebView, which provides OffscreenCanvas,\n\t// also OffscreenCanvas.getContext(\"webgl\"), but not OffscreenCanvas.getContext(\"2d\")!\n\n\tvar useOffscreenCanvas = typeof OffscreenCanvas !== 'undefined'\n\t\t&& ( new OffscreenCanvas( 1, 1 ).getContext( \"2d\" ) ) !== null;\n\n\tfunction createCanvas( width, height ) {\n\n\t\t// Use OffscreenCanvas when available. Specially needed in web workers\n\n\t\treturn useOffscreenCanvas ?\n\t\t\tnew OffscreenCanvas( width, height ) :\n\t\t\tdocument.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t}\n\n\tfunction resizeImage( image, needsPowerOfTwo, needsNewCanvas, maxSize ) {\n\n\t\tvar scale = 1;\n\n\t\t// handle case if texture exceeds max size\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\tscale = maxSize / Math.max( image.width, image.height );\n\n\t\t}\n\n\t\t// only perform resize if necessary\n\n\t\tif ( scale < 1 || needsPowerOfTwo === true ) {\n\n\t\t\t// only perform resize for certain image types\n\n\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\t\tvar floor = needsPowerOfTwo ? _Math.floorPowerOfTwo : Math.floor;\n\n\t\t\t\tvar width = floor( scale * image.width );\n\t\t\t\tvar height = floor( scale * image.height );\n\n\t\t\t\tif ( _canvas === undefined ) _canvas = createCanvas( width, height );\n\n\t\t\t\t// cube textures can't reuse the same canvas\n\n\t\t\t\tvar canvas = needsNewCanvas ? createCanvas( width, height ) : _canvas;\n\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\n\t\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture has been resized from (' + image.width + 'x' + image.height + ') to (' + width + 'x' + height + ').' );\n\n\t\t\t\treturn canvas;\n\n\t\t\t} else {\n\n\t\t\t\tif ( 'data' in image ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\n\n\t\t\t\t}\n\n\t\t\t\treturn image;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo( image ) {\n\n\t\treturn _Math.isPowerOfTwo( image.width ) && _Math.isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\tif ( isWebGL2 ) return false;\n\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t}\n\n\tfunction textureNeedsGenerateMipmaps( texture, supportsMips ) {\n\n\t\treturn texture.generateMipmaps && supportsMips &&\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t}\n\n\tfunction generateMipmap( target, texture, width, height ) {\n\n\t\t_gl.generateMipmap( target );\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\t// Note: Math.log( x ) * Math.LOG2E used instead of Math.log2( x ) which is not supported by IE11\n\t\ttextureProperties.__maxMipLevel = Math.log( Math.max( width, height ) ) * Math.LOG2E;\n\n\t}\n\n\tfunction getInternalFormat( glFormat, glType ) {\n\n\t\tif ( isWebGL2 === false ) return glFormat;\n\n\t\tvar internalFormat = glFormat;\n\n\t\tif ( glFormat === _gl.RED ) {\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.R32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.R16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.R8;\n\n\t\t}\n\n\t\tif ( glFormat === _gl.RGB ) {\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.RGB32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.RGB16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.RGB8;\n\n\t\t}\n\n\t\tif ( glFormat === _gl.RGBA ) {\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.RGBA32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.RGBA16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.RGBA8;\n\n\t\t}\n\n\t\tif ( internalFormat === _gl.R16F || internalFormat === _gl.R32F ||\n\t\t\tinternalFormat === _gl.RGBA16F || internalFormat === _gl.RGBA32F ) {\n\n\t\t\textensions.get( 'EXT_color_buffer_float' );\n\n\t\t} else if ( internalFormat === _gl.RGB16F || internalFormat === _gl.RGB32F ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead.' );\n\n\t\t}\n\n\t\treturn internalFormat;\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback( f ) {\n\n\t\tif ( f === NearestFilter || f === NearestMipmapNearestFilter || f === NearestMipmapLinearFilter ) {\n\n\t\t\treturn _gl.NEAREST;\n\n\t\t}\n\n\t\treturn _gl.LINEAR;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tvar texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\tif ( texture.isVideoTexture ) {\n\n\t\t\t_videoTextures.delete( texture );\n\n\t\t}\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tvar renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\tproperties.remove( texture );\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\tif ( ! renderTarget ) return;\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLRenderTargetCube ) {\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLMultiviewRenderTarget ) {\n\n\t\t\t_gl.deleteTexture( renderTargetProperties.__webglColorTexture );\n\t\t\t_gl.deleteTexture( renderTargetProperties.__webglDepthStencilTexture );\n\n\t\t\tinfo.memory.textures -= 2;\n\n\t\t\tfor ( var i = 0, il = renderTargetProperties.__webglViewFramebuffers.length; i < il; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglViewFramebuffers[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tproperties.remove( renderTarget.texture );\n\t\tproperties.remove( renderTarget );\n\n\t}\n\n\t//\n\n\tvar textureUnits = 0;\n\n\tfunction resetTextureUnits() {\n\n\t\ttextureUnits = 0;\n\n\t}\n\n\tfunction allocateTextureUnit() {\n\n\t\tvar textureUnit = textureUnits;\n\n\t\tif ( textureUnit >= maxTextures ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLTextures: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + maxTextures );\n\n\t\t}\n\n\t\ttextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\t//\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.isVideoTexture ) updateVideoTexture( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tvar image = texture.image;\n\n\t\t\tif ( image === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined' );\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete' );\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture2DArray( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D_ARRAY, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture3D( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_3D, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTextureCube( texture, slot ) {\n\n\t\tif ( texture.image.length !== 6 ) return;\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tinitTexture( textureProperties, texture );\n\n\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\n\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\n\t\t\tvar isCompressed = ( texture && texture.isCompressedTexture );\n\t\t\tvar isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\n\n\t\t\tvar cubeImage = [];\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\t\tcubeImage[ i ] = resizeImage( texture.image[ i ], false, true, maxCubemapSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar image = cubeImage[ 0 ],\n\t\t\t\tsupportsMips = isPowerOfTwo( image ) || isWebGL2,\n\t\t\t\tglFormat = utils.convert( texture.format ),\n\t\t\t\tglType = utils.convert( texture.type ),\n\t\t\t\tglInternalFormat = getInternalFormat( glFormat, glType );\n\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, supportsMips );\n\n\t\t\tvar mipmaps;\n\n\t\t\tif ( isCompressed ) {\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tmipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\t\tfor ( var j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\tvar mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tmipmaps = texture.mipmaps;\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glInternalFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\tfor ( var j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\t\tvar mipmap = mipmaps[ j ];\n\t\t\t\t\t\t\tvar mipmapImage = mipmap.image[ i ].image;\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j + 1, glInternalFormat, mipmapImage.width, mipmapImage.height, 0, glFormat, glType, mipmapImage.data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glInternalFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\tfor ( var j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\t\tvar mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j + 1, glInternalFormat, glFormat, glType, mipmap.image[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length;\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\t// We assume images for cube map have the same size.\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_CUBE_MAP, texture, image.width, image.height );\n\n\t\t\t}\n\n\t\t\ttextureProperties.__version = texture.version;\n\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t} else {\n\n\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\n\t\t}\n\n\t}\n\n\tfunction setTextureCubeDynamic( texture, slot ) {\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( texture ).__webglTexture );\n\n\t}\n\n\tvar wrappingToGL = {\n\t\t[ RepeatWrapping ]: _gl.REPEAT,\n\t\t[ ClampToEdgeWrapping ]: _gl.CLAMP_TO_EDGE,\n\t\t[ MirroredRepeatWrapping ]: _gl.MIRRORED_REPEAT\n\t};\n\n\tvar filterToGL = {\n\t\t[ NearestFilter ]: _gl.NEAREST,\n\t\t[ NearestMipmapNearestFilter ]: _gl.NEAREST_MIPMAP_NEAREST,\n\t\t[ NearestMipmapLinearFilter ]: _gl.NEAREST_MIPMAP_LINEAR,\n\n\t\t[ LinearFilter ]: _gl.LINEAR,\n\t\t[ LinearMipmapNearestFilter ]: _gl.LINEAR_MIPMAP_NEAREST,\n\t\t[ LinearMipmapLinearFilter ]: _gl.LINEAR_MIPMAP_LINEAR\n\t};\n\n\tfunction setTextureParameters( textureType, texture, supportsMips ) {\n\n\t\tif ( supportsMips ) {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, wrappingToGL[ texture.wrapS ] );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, wrappingToGL[ texture.wrapT ] );\n\n\t\t\tif ( textureType === _gl.TEXTURE_3D || textureType === _gl.TEXTURE_2D_ARRAY ) {\n\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_R, wrappingToGL[ texture.wrapR ] );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterToGL[ texture.magFilter ] );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterToGL[ texture.minFilter ] );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\n\n\t\t\tif ( textureType === _gl.TEXTURE_3D || textureType === _gl.TEXTURE_2D_ARRAY ) {\n\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_R, _gl.CLAMP_TO_EDGE );\n\n\t\t\t}\n\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.' );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension ) {\n\n\t\t\tif ( texture.type === FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\n\t\t\tif ( texture.type === HalfFloatType && ( isWebGL2 || extensions.get( 'OES_texture_half_float_linear' ) ) === null ) return;\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction initTexture( textureProperties, texture ) {\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\tinfo.memory.textures ++;\n\n\t\t}\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tvar textureType = _gl.TEXTURE_2D;\n\n\t\tif ( texture.isDataTexture2DArray ) textureType = _gl.TEXTURE_2D_ARRAY;\n\t\tif ( texture.isDataTexture3D ) textureType = _gl.TEXTURE_3D;\n\n\t\tinitTexture( textureProperties, texture );\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( textureType, textureProperties.__webglTexture );\n\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\n\t\tvar needsPowerOfTwo = textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( texture.image ) === false;\n\t\tvar image = resizeImage( texture.image, needsPowerOfTwo, false, maxTextureSize );\n\n\t\tvar supportsMips = isPowerOfTwo( image ) || isWebGL2,\n\t\t\tglFormat = utils.convert( texture.format ),\n\t\t\tglType = utils.convert( texture.type ),\n\t\t\tglInternalFormat = getInternalFormat( glFormat, glType );\n\n\t\tsetTextureParameters( textureType, texture, supportsMips );\n\n\t\tvar mipmap, mipmaps = texture.mipmaps;\n\n\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t// populate depth texture with dummy data\n\n\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT;\n\n\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\tif ( isWebGL2 === false ) throw new Error( 'Float Depth Texture only supported in WebGL2.0' );\n\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT32F;\n\n\t\t\t} else if ( isWebGL2 ) {\n\n\t\t\t\t// WebGL 2.0 requires signed internalformat for glTexImage2D\n\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT16;\n\n\t\t\t}\n\n\t\t\tif ( texture.format === DepthFormat && glInternalFormat === _gl.DEPTH_COMPONENT ) {\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedShortType;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\tif ( texture.format === DepthStencilFormat ) {\n\n\t\t\t\tglInternalFormat = _gl.DEPTH_STENCIL;\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t} else if ( texture.isDataTexture2DArray ) {\n\n\t\t\tstate.texImage3D( _gl.TEXTURE_2D_ARRAY, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t} else if ( texture.isDataTexture3D ) {\n\n\t\t\tstate.texImage3D( _gl.TEXTURE_3D, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t} else {\n\n\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, glFormat, glType, mipmap );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, glFormat, glType, image );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\tgenerateMipmap( _gl.TEXTURE_2D, texture, image.width, image.height );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\n\n\t\tvar glFormat = utils.convert( renderTarget.texture.format );\n\t\tvar glType = utils.convert( renderTarget.texture.type );\n\t\tvar glInternalFormat = getInternalFormat( glFormat, glType );\n\t\tstate.texImage2D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget, isMultisample ) {\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tvar samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tvar samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, _gl.DEPTH24_STENCIL8, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else {\n\n\t\t\tvar glFormat = utils.convert( renderTarget.texture.format );\n\t\t\tvar glType = utils.convert( renderTarget.texture.type );\n\t\t\tvar glInternalFormat = getInternalFormat( glFormat, glType );\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tvar samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\tvar isCube = ( renderTarget && renderTarget.isWebGLRenderTargetCube );\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tvar webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\n\n\t\t}\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\n\t\tvar isCube = ( renderTarget.isWebGLRenderTargetCube === true );\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\tif ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\tinfo.memory.textures ++;\n\n\t\tvar isCube = ( renderTarget.isWebGLRenderTargetCube === true );\n\t\tvar isMultisample = ( renderTarget.isWebGLMultisampleRenderTarget === true );\n\t\tvar isMultiview = ( renderTarget.isWebGLMultiviewRenderTarget === true );\n\t\tvar supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\n\n\t\t// Setup framebuffer\n\n\t\tif ( isCube ) {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\trenderTargetProperties.__webglMultisampledFramebuffer = _gl.createFramebuffer();\n\t\t\t\t\trenderTargetProperties.__webglColorRenderbuffer = _gl.createRenderbuffer();\n\n\t\t\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderTargetProperties.__webglColorRenderbuffer );\n\t\t\t\t\tvar glFormat = utils.convert( renderTarget.texture.format );\n\t\t\t\t\tvar glType = utils.convert( renderTarget.texture.type );\n\t\t\t\t\tvar glInternalFormat = getInternalFormat( glFormat, glType );\n\t\t\t\t\tvar samples = getRenderTargetSamples( renderTarget );\n\t\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.RENDERBUFFER, renderTargetProperties.__webglColorRenderbuffer );\n\t\t\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t\t\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\t\t\trenderTargetProperties.__webglDepthRenderbuffer = _gl.createRenderbuffer();\n\t\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthRenderbuffer, renderTarget, true );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t} else if ( isMultiview ) {\n\n\t\t\t\tvar width = renderTarget.width;\n\t\t\t\tvar height = renderTarget.height;\n\t\t\t\tvar numViews = renderTarget.numViews;\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\n\t\t\t\tvar ext = extensions.get( 'OVR_multiview2' );\n\n\t\t\t\tinfo.memory.textures += 2;\n\n\t\t\t\tvar colorTexture = _gl.createTexture();\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_2D_ARRAY, colorTexture );\n\t\t\t\t_gl.texParameteri( _gl.TEXTURE_2D_ARRAY, _gl.TEXTURE_MAG_FILTER, _gl.NEAREST );\n\t\t\t\t_gl.texParameteri( _gl.TEXTURE_2D_ARRAY, _gl.TEXTURE_MIN_FILTER, _gl.NEAREST );\n\t\t\t\t_gl.texImage3D( _gl.TEXTURE_2D_ARRAY, 0, _gl.RGBA8, width, height, numViews, 0, _gl.RGBA, _gl.UNSIGNED_BYTE, null );\n\t\t\t\text.framebufferTextureMultiviewOVR( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, colorTexture, 0, 0, numViews );\n\n\t\t\t\tvar depthStencilTexture = _gl.createTexture();\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_2D_ARRAY, depthStencilTexture );\n\t\t\t\t_gl.texParameteri( _gl.TEXTURE_2D_ARRAY, _gl.TEXTURE_MAG_FILTER, _gl.NEAREST );\n\t\t\t\t_gl.texParameteri( _gl.TEXTURE_2D_ARRAY, _gl.TEXTURE_MIN_FILTER, _gl.NEAREST );\n\t\t\t\t_gl.texImage3D( _gl.TEXTURE_2D_ARRAY, 0, _gl.DEPTH24_STENCIL8, width, height, numViews, 0, _gl.DEPTH_STENCIL, _gl.UNSIGNED_INT_24_8, null );\n\t\t\t\text.framebufferTextureMultiviewOVR( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, depthStencilTexture, 0, 0, numViews );\n\n\t\t\t\tvar viewFramebuffers = new Array( numViews );\n\t\t\t\tfor ( var i = 0; i < numViews; ++ i ) {\n\n\t\t\t\t\tviewFramebuffers[ i ] = _gl.createFramebuffer();\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, viewFramebuffers[ i ] );\n\t\t\t\t\t_gl.framebufferTextureLayer( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, colorTexture, 0, i );\n\n\t\t\t\t}\n\n\t\t\t\trenderTargetProperties.__webglColorTexture = colorTexture;\n\t\t\t\trenderTargetProperties.__webglDepthStencilTexture = depthStencilTexture;\n\t\t\t\trenderTargetProperties.__webglViewFramebuffers = viewFramebuffers;\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_2D_ARRAY, null );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\tif ( isCube ) {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, supportsMips );\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\n\n\t\t} else if ( ! isMultiview ) {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget.texture, supportsMips );\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D );\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_2D, renderTarget.texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tvar texture = renderTarget.texture;\n\t\tvar supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\tvar target = renderTarget.isWebGLRenderTargetCube ? _gl.TEXTURE_CUBE_MAP : _gl.TEXTURE_2D;\n\t\t\tvar webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\tgenerateMipmap( target, texture, renderTarget.width, renderTarget.height );\n\t\t\tstate.bindTexture( target, null );\n\n\t\t}\n\n\t}\n\n\tfunction updateMultisampleRenderTarget( renderTarget ) {\n\n\t\tif ( renderTarget.isWebGLMultisampleRenderTarget ) {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tvar renderTargetProperties = properties.get( renderTarget );\n\n\t\t\t\t_gl.bindFramebuffer( _gl.READ_FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t_gl.bindFramebuffer( _gl.DRAW_FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\n\t\t\t\tvar width = renderTarget.width;\n\t\t\t\tvar height = renderTarget.height;\n\t\t\t\tvar mask = _gl.COLOR_BUFFER_BIT;\n\n\t\t\t\tif ( renderTarget.depthBuffer ) mask |= _gl.DEPTH_BUFFER_BIT;\n\t\t\t\tif ( renderTarget.stencilBuffer ) mask |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t\t\t_gl.blitFramebuffer( 0, 0, width, height, 0, 0, width, height, mask, _gl.NEAREST );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction getRenderTargetSamples( renderTarget ) {\n\n\t\treturn ( isWebGL2 && renderTarget.isWebGLMultisampleRenderTarget ) ?\n\t\t\tMath.min( maxSamples, renderTarget.samples ) : 0;\n\n\t}\n\n\tfunction updateVideoTexture( texture ) {\n\n\t\tvar frame = info.render.frame;\n\n\t\t// Check the last frame we updated the VideoTexture\n\n\t\tif ( _videoTextures.get( texture ) !== frame ) {\n\n\t\t\t_videoTextures.set( texture, frame );\n\t\t\ttexture.update();\n\n\t\t}\n\n\t}\n\n\t// backwards compatibility\n\n\tvar warnedTexture2D = false;\n\tvar warnedTextureCube = false;\n\n\tfunction safeSetTexture2D( texture, slot ) {\n\n\t\tif ( texture && texture.isWebGLRenderTarget ) {\n\n\t\t\tif ( warnedTexture2D === false ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\t\twarnedTexture2D = true;\n\n\t\t\t}\n\n\t\t\ttexture = texture.texture;\n\n\t\t}\n\n\t\tsetTexture2D( texture, slot );\n\n\t}\n\n\tfunction safeSetTextureCube( texture, slot ) {\n\n\t\tif ( texture && texture.isWebGLRenderTargetCube ) {\n\n\t\t\tif ( warnedTextureCube === false ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\n\t\t\t\twarnedTextureCube = true;\n\n\t\t\t}\n\n\t\t\ttexture = texture.texture;\n\n\t\t}\n\n\t\t// currently relying on the fact that WebGLRenderTargetCube.texture is a Texture and NOT a CubeTexture\n\t\t// TODO: unify these code paths\n\t\tif ( ( texture && texture.isCubeTexture ) ||\n\t\t\t( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\n\n\t\t\t// CompressedTexture can have Array in image :/\n\n\t\t\t// this function alone should take care of cube textures\n\t\t\tsetTextureCube( texture, slot );\n\n\t\t} else {\n\n\t\t\t// assumed: texture property of THREE.WebGLRenderTargetCube\n\t\t\tsetTextureCubeDynamic( texture, slot );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tthis.allocateTextureUnit = allocateTextureUnit;\n\tthis.resetTextureUnits = resetTextureUnits;\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTexture2DArray = setTexture2DArray;\n\tthis.setTexture3D = setTexture3D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.setTextureCubeDynamic = setTextureCubeDynamic;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\tthis.updateMultisampleRenderTarget = updateMultisampleRenderTarget;\n\n\tthis.safeSetTexture2D = safeSetTexture2D;\n\tthis.safeSetTextureCube = safeSetTextureCube;\n\n}\n\nexport { WebGLTextures };\n","/**\n * @author thespite / http://www.twitter.com/thespite\n */\n\nimport { RGBA_ASTC_4x4_Format, RGBA_ASTC_5x4_Format, RGBA_ASTC_5x5_Format, RGBA_ASTC_6x5_Format, RGBA_ASTC_6x6_Format, RGBA_ASTC_8x5_Format, RGBA_ASTC_8x6_Format, RGBA_ASTC_8x8_Format, RGBA_ASTC_10x5_Format, RGBA_ASTC_10x6_Format, RGBA_ASTC_10x8_Format, RGBA_ASTC_10x10_Format, RGBA_ASTC_12x10_Format, RGBA_ASTC_12x12_Format, RGB_ETC1_Format, RGBA_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGB_PVRTC_2BPPV1_Format, RGB_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT5_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT1_Format, RGB_S3TC_DXT1_Format, DepthFormat, DepthStencilFormat, LuminanceAlphaFormat, LuminanceFormat, RedFormat, RGBAFormat, RGBFormat, AlphaFormat, HalfFloatType, FloatType, UnsignedIntType, IntType, UnsignedShortType, ShortType, ByteType, UnsignedInt248Type, UnsignedShort565Type, UnsignedShort5551Type, UnsignedShort4444Type, UnsignedByteType } from '../../constants.js';\n\nfunction WebGLUtils( gl, extensions, capabilities ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\n\tfunction convert( p ) {\n\n\t\tvar extension;\n\n\t\tif ( p === UnsignedByteType ) return gl.UNSIGNED_BYTE;\n\t\tif ( p === UnsignedShort4444Type ) return gl.UNSIGNED_SHORT_4_4_4_4;\n\t\tif ( p === UnsignedShort5551Type ) return gl.UNSIGNED_SHORT_5_5_5_1;\n\t\tif ( p === UnsignedShort565Type ) return gl.UNSIGNED_SHORT_5_6_5;\n\n\t\tif ( p === ByteType ) return gl.BYTE;\n\t\tif ( p === ShortType ) return gl.SHORT;\n\t\tif ( p === UnsignedShortType ) return gl.UNSIGNED_SHORT;\n\t\tif ( p === IntType ) return gl.INT;\n\t\tif ( p === UnsignedIntType ) return gl.UNSIGNED_INT;\n\t\tif ( p === FloatType ) return gl.FLOAT;\n\n\t\tif ( p === HalfFloatType ) {\n\n\t\t\tif ( isWebGL2 ) return gl.HALF_FLOAT;\n\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.HALF_FLOAT_OES;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === AlphaFormat ) return gl.ALPHA;\n\t\tif ( p === RGBFormat ) return gl.RGB;\n\t\tif ( p === RGBAFormat ) return gl.RGBA;\n\t\tif ( p === LuminanceFormat ) return gl.LUMINANCE;\n\t\tif ( p === LuminanceAlphaFormat ) return gl.LUMINANCE_ALPHA;\n\t\tif ( p === DepthFormat ) return gl.DEPTH_COMPONENT;\n\t\tif ( p === DepthStencilFormat ) return gl.DEPTH_STENCIL;\n\t\tif ( p === RedFormat ) return gl.RED;\n\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\n\t\t\tp === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\n\t\t\tp === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\n\t\t\tp === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\n\t\t\tp === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\n\t\t\tp === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\n\t\t\tp === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_astc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\t// TODO Complete?\n\n\t\t\t\treturn p;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\tif ( isWebGL2 ) return gl.UNSIGNED_INT_24_8;\n\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { convert: convert };\n\n}\n\n\nexport { WebGLUtils };\n","/**\n * @author fernandojsg / http://fernandojsg.com\n * @author Takahiro https://github.com/takahirox\n */\n\nimport { WebGLRenderTarget } from './WebGLRenderTarget.js';\n\nfunction WebGLMultiviewRenderTarget( width, height, numViews, options ) {\n\n\tWebGLRenderTarget.call( this, width, height, options );\n\n\tthis.depthBuffer = false;\n\tthis.stencilBuffer = false;\n\n\tthis.numViews = numViews;\n\n}\n\nWebGLMultiviewRenderTarget.prototype = Object.assign( Object.create( WebGLRenderTarget.prototype ), {\n\n\tconstructor: WebGLMultiviewRenderTarget,\n\n\tisWebGLMultiviewRenderTarget: true,\n\n\tcopy: function ( source ) {\n\n\t\tWebGLRenderTarget.prototype.copy.call( this, source );\n\n\t\tthis.numViews = source.numViews;\n\n\t\treturn this;\n\n\t},\n\n\tsetNumViews: function ( numViews ) {\n\n\t\tif ( this.numViews !== numViews ) {\n\n\t\t\tthis.numViews = numViews;\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\nexport { WebGLMultiviewRenderTarget };\n","/**\n * @author fernandojsg / http://fernandojsg.com\n * @author Takahiro https://github.com/takahirox\n */\n\nimport { WebGLMultiviewRenderTarget } from '../WebGLMultiviewRenderTarget.js';\nimport { Matrix3 } from '../../math/Matrix3.js';\nimport { Matrix4 } from '../../math/Matrix4.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\nfunction WebGLMultiview( renderer, gl ) {\n\n\tvar DEFAULT_NUMVIEWS = 2;\n\n\tvar extensions = renderer.extensions;\n\tvar properties = renderer.properties;\n\n\tvar renderTarget, currentRenderTarget;\n\tvar mat3, mat4, cameraArray, renderSize;\n\n\tvar available;\n\tvar maxNumViews = 0;\n\n\t//\n\n\tfunction isAvailable() {\n\n\t\tif ( available === undefined ) {\n\n\t\t\tvar extension = extensions.get( 'OVR_multiview2' );\n\n\t\t\tavailable = extension !== null && gl.getContextAttributes().antialias === false;\n\n\t\t\tif ( available ) {\n\n\t\t\t\tmaxNumViews = gl.getParameter( extension.MAX_VIEWS_OVR );\n\t\t\t\trenderTarget = new WebGLMultiviewRenderTarget( 0, 0, DEFAULT_NUMVIEWS );\n\n\t\t\t\trenderSize = new Vector2();\n\t\t\t\tmat4 = [];\n\t\t\t\tmat3 = [];\n\t\t\t\tcameraArray = [];\n\n\t\t\t\tfor ( var i = 0; i < maxNumViews; i ++ ) {\n\n\t\t\t\t\tmat4[ i ] = new Matrix4();\n\t\t\t\t\tmat3[ i ] = new Matrix3();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn available;\n\n\t}\n\n\tfunction getCameraArray( camera ) {\n\n\t\tif ( camera.isArrayCamera ) return camera.cameras;\n\n\t\tcameraArray[ 0 ] = camera;\n\n\t\treturn cameraArray;\n\n\t}\n\n\tfunction updateCameraProjectionMatricesUniform( camera, uniforms ) {\n\n\t\tvar cameras = getCameraArray( camera );\n\n\t\tfor ( var i = 0; i < cameras.length; i ++ ) {\n\n\t\t\tmat4[ i ].copy( cameras[ i ].projectionMatrix );\n\n\t\t}\n\n\t\tuniforms.setValue( gl, 'projectionMatrices', mat4 );\n\n\t}\n\n\tfunction updateCameraViewMatricesUniform( camera, uniforms ) {\n\n\t\tvar cameras = getCameraArray( camera );\n\n\t\tfor ( var i = 0; i < cameras.length; i ++ ) {\n\n\t\t\tmat4[ i ].copy( cameras[ i ].matrixWorldInverse );\n\n\t\t}\n\n\t\tuniforms.setValue( gl, 'viewMatrices', mat4 );\n\n\t}\n\n\tfunction updateObjectMatricesUniforms( object, camera, uniforms ) {\n\n\t\tvar cameras = getCameraArray( camera );\n\n\t\tfor ( var i = 0; i < cameras.length; i ++ ) {\n\n\t\t\tmat4[ i ].multiplyMatrices( cameras[ i ].matrixWorldInverse, object.matrixWorld );\n\t\t\tmat3[ i ].getNormalMatrix( mat4[ i ] );\n\n\t\t}\n\n\t\tuniforms.setValue( gl, 'modelViewMatrices', mat4 );\n\t\tuniforms.setValue( gl, 'normalMatrices', mat3 );\n\n\t}\n\n\tfunction isMultiviewCompatible( camera ) {\n\n\t\tif ( camera.isArrayCamera === undefined ) return true;\n\n\t\tvar cameras = camera.cameras;\n\n\t\tif ( cameras.length > maxNumViews ) return false;\n\n\t\tfor ( var i = 1, il = cameras.length; i < il; i ++ ) {\n\n\t\t\tif ( cameras[ 0 ].viewport.z !== cameras[ i ].viewport.z ||\n\t\t\t\tcameras[ 0 ].viewport.w !== cameras[ i ].viewport.w ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfunction resizeRenderTarget( camera ) {\n\n\t\tif ( currentRenderTarget ) {\n\n\t\t\trenderSize.set( currentRenderTarget.width, currentRenderTarget.height );\n\n\t\t} else {\n\n\t\t\trenderer.getDrawingBufferSize( renderSize );\n\n\t\t}\n\n\t\tif ( camera.isArrayCamera ) {\n\n\t\t\tvar viewport = camera.cameras[ 0 ].viewport;\n\n\t\t\trenderTarget.setSize( viewport.z, viewport.w );\n\t\t\trenderTarget.setNumViews( camera.cameras.length );\n\n\t\t} else {\n\n\t\t\trenderTarget.setSize( renderSize.x, renderSize.y );\n\t\t\trenderTarget.setNumViews( DEFAULT_NUMVIEWS );\n\n\t\t}\n\n\t}\n\n\tfunction attachCamera( camera ) {\n\n\t\tif ( isMultiviewCompatible( camera ) === false ) return;\n\n\t\tcurrentRenderTarget = renderer.getRenderTarget();\n\t\tresizeRenderTarget( camera );\n\t\trenderer.setRenderTarget( renderTarget );\n\n\t}\n\n\tfunction detachCamera( camera ) {\n\n\t\tif ( renderTarget !== renderer.getRenderTarget() ) return;\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\tflush( camera );\n\n\t}\n\n\tfunction flush( camera ) {\n\n\t\tvar srcRenderTarget = renderTarget;\n\t\tvar numViews = srcRenderTarget.numViews;\n\n\t\tvar srcFramebuffers = properties.get( srcRenderTarget ).__webglViewFramebuffers;\n\n\t\tvar viewWidth = srcRenderTarget.width;\n\t\tvar viewHeight = srcRenderTarget.height;\n\n\t\tif ( camera.isArrayCamera ) {\n\n\t\t\tfor ( var i = 0; i < numViews; i ++ ) {\n\n\t\t\t\tvar viewport = camera.cameras[ i ].viewport;\n\n\t\t\t\tvar x1 = viewport.x;\n\t\t\t\tvar y1 = viewport.y;\n\t\t\t\tvar x2 = x1 + viewport.z;\n\t\t\t\tvar y2 = y1 + viewport.w;\n\n\t\t\t\tgl.bindFramebuffer( gl.READ_FRAMEBUFFER, srcFramebuffers[ i ] );\n\t\t\t\tgl.blitFramebuffer( 0, 0, viewWidth, viewHeight, x1, y1, x2, y2, gl.COLOR_BUFFER_BIT, gl.NEAREST );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl.bindFramebuffer( gl.READ_FRAMEBUFFER, srcFramebuffers[ 0 ] );\n\t\t\tgl.blitFramebuffer( 0, 0, viewWidth, viewHeight, 0, 0, renderSize.x, renderSize.y, gl.COLOR_BUFFER_BIT, gl.NEAREST );\n\n\t\t}\n\n\t}\n\n\tthis.isAvailable = isAvailable;\n\tthis.attachCamera = attachCamera;\n\tthis.detachCamera = detachCamera;\n\tthis.updateCameraProjectionMatricesUniform = updateCameraProjectionMatricesUniform;\n\tthis.updateCameraViewMatricesUniform = updateCameraViewMatricesUniform;\n\tthis.updateObjectMatricesUniforms = updateObjectMatricesUniforms;\n\n}\n\nexport { WebGLMultiview };\n","import { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Group() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Group';\n\n}\n\nGroup.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Group,\n\n\tisGroup: true\n\n} );\n\n\nexport { Group };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { PerspectiveCamera } from './PerspectiveCamera.js';\n\nfunction ArrayCamera( array ) {\n\n\tPerspectiveCamera.call( this );\n\n\tthis.cameras = array || [];\n\n}\n\nArrayCamera.prototype = Object.assign( Object.create( PerspectiveCamera.prototype ), {\n\n\tconstructor: ArrayCamera,\n\n\tisArrayCamera: true\n\n} );\n\n\nexport { ArrayCamera };\n","/**\n * @author jsantell / https://www.jsantell.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Vector3 } from '../../math/Vector3.js';\n\nvar cameraLPos = new Vector3();\nvar cameraRPos = new Vector3();\n\n/**\n * Assumes 2 cameras that are parallel and share an X-axis, and that\n * the cameras' projection and world matrices have already been set.\n * And that near and far planes are identical for both cameras.\n * Visualization of this technique: https://computergraphics.stackexchange.com/a/4765\n */\nfunction setProjectionFromUnion( camera, cameraL, cameraR ) {\n\n\tcameraLPos.setFromMatrixPosition( cameraL.matrixWorld );\n\tcameraRPos.setFromMatrixPosition( cameraR.matrixWorld );\n\n\tvar ipd = cameraLPos.distanceTo( cameraRPos );\n\n\tvar projL = cameraL.projectionMatrix.elements;\n\tvar projR = cameraR.projectionMatrix.elements;\n\n\t// VR systems will have identical far and near planes, and\n\t// most likely identical top and bottom frustum extents.\n\t// Use the left camera for these values.\n\tvar near = projL[ 14 ] / ( projL[ 10 ] - 1 );\n\tvar far = projL[ 14 ] / ( projL[ 10 ] + 1 );\n\tvar topFov = ( projL[ 9 ] + 1 ) / projL[ 5 ];\n\tvar bottomFov = ( projL[ 9 ] - 1 ) / projL[ 5 ];\n\n\tvar leftFov = ( projL[ 8 ] - 1 ) / projL[ 0 ];\n\tvar rightFov = ( projR[ 8 ] + 1 ) / projR[ 0 ];\n\tvar left = near * leftFov;\n\tvar right = near * rightFov;\n\n\t// Calculate the new camera's position offset from the\n\t// left camera. xOffset should be roughly half `ipd`.\n\tvar zOffset = ipd / ( - leftFov + rightFov );\n\tvar xOffset = zOffset * - leftFov;\n\n\t// TODO: Better way to apply this offset?\n\tcameraL.matrixWorld.decompose( camera.position, camera.quaternion, camera.scale );\n\tcamera.translateX( xOffset );\n\tcamera.translateZ( zOffset );\n\tcamera.matrixWorld.compose( camera.position, camera.quaternion, camera.scale );\n\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\n\n\t// Find the union of the frustum values of the cameras and scale\n\t// the values so that the near plane's position does not change in world space,\n\t// although must now be relative to the new union camera.\n\tvar near2 = near + zOffset;\n\tvar far2 = far + zOffset;\n\tvar left2 = left - xOffset;\n\tvar right2 = right + ( ipd - xOffset );\n\tvar top2 = topFov * far / far2 * near2;\n\tvar bottom2 = bottomFov * far / far2 * near2;\n\n\tcamera.projectionMatrix.makePerspective( left2, right2, top2, bottom2, near2, far2 );\n\n}\n\nexport { setProjectionFromUnion };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { EventDispatcher } from '../../core/EventDispatcher.js';\nimport { Group } from '../../objects/Group.js';\nimport { Matrix4 } from '../../math/Matrix4.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { Vector4 } from '../../math/Vector4.js';\nimport { Quaternion } from '../../math/Quaternion.js';\nimport { ArrayCamera } from '../../cameras/ArrayCamera.js';\nimport { PerspectiveCamera } from '../../cameras/PerspectiveCamera.js';\nimport { WebGLAnimation } from '../webgl/WebGLAnimation.js';\nimport { setProjectionFromUnion } from './WebVRUtils.js';\n\nfunction WebVRManager( renderer ) {\n\n\tvar renderWidth, renderHeight;\n\tvar scope = this;\n\n\tvar device = null;\n\tvar frameData = null;\n\n\tvar controllers = [];\n\tvar standingMatrix = new Matrix4();\n\tvar standingMatrixInverse = new Matrix4();\n\n\tvar framebufferScaleFactor = 1.0;\n\n\tvar referenceSpaceType = 'local-floor';\n\n\tif ( typeof window !== 'undefined' && 'VRFrameData' in window ) {\n\n\t\tframeData = new window.VRFrameData();\n\t\twindow.addEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange, false );\n\n\t}\n\n\tvar matrixWorldInverse = new Matrix4();\n\tvar tempQuaternion = new Quaternion();\n\tvar tempPosition = new Vector3();\n\n\tvar tempCamera = new PerspectiveCamera();\n\n\tvar cameraL = new PerspectiveCamera();\n\tcameraL.viewport = new Vector4();\n\tcameraL.layers.enable( 1 );\n\n\tvar cameraR = new PerspectiveCamera();\n\tcameraR.viewport = new Vector4();\n\tcameraR.layers.enable( 2 );\n\n\tvar cameraVR = new ArrayCamera( [ cameraL, cameraR ] );\n\tcameraVR.layers.enable( 1 );\n\tcameraVR.layers.enable( 2 );\n\n\t//\n\n\tfunction isPresenting() {\n\n\t\treturn device !== null && device.isPresenting === true;\n\n\t}\n\n\tvar currentSize = new Vector2(), currentPixelRatio;\n\n\tfunction onVRDisplayPresentChange() {\n\n\t\tif ( isPresenting() ) {\n\n\t\t\tvar eyeParameters = device.getEyeParameters( 'left' );\n\t\t\trenderWidth = 2 * eyeParameters.renderWidth * framebufferScaleFactor;\n\t\t\trenderHeight = eyeParameters.renderHeight * framebufferScaleFactor;\n\n\t\t\tcurrentPixelRatio = renderer.getPixelRatio();\n\t\t\trenderer.getSize( currentSize );\n\n\t\t\trenderer.setDrawingBufferSize( renderWidth, renderHeight, 1 );\n\n\t\t\tcameraL.viewport.set( 0, 0, renderWidth / 2, renderHeight );\n\t\t\tcameraR.viewport.set( renderWidth / 2, 0, renderWidth / 2, renderHeight );\n\n\t\t\tanimation.start();\n\n\t\t\tscope.dispatchEvent( { type: 'sessionstart' } );\n\n\t\t} else {\n\n\t\t\tif ( scope.enabled ) {\n\n\t\t\t\trenderer.setDrawingBufferSize( currentSize.width, currentSize.height, currentPixelRatio );\n\n\t\t\t}\n\n\t\t\tanimation.stop();\n\n\t\t\tscope.dispatchEvent( { type: 'sessionend' } );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tvar triggers = [];\n\tvar grips = [];\n\n\tfunction findGamepad( id ) {\n\n\t\tvar gamepads = navigator.getGamepads && navigator.getGamepads();\n\n\t\tfor ( var i = 0, l = gamepads.length; i < l; i ++ ) {\n\n\t\t\tvar gamepad = gamepads[ i ];\n\n\t\t\tif ( gamepad && ( gamepad.id === 'Daydream Controller' ||\n\t\t\t\tgamepad.id === 'Gear VR Controller' || gamepad.id === 'Oculus Go Controller' ||\n\t\t\t\tgamepad.id === 'OpenVR Gamepad' || gamepad.id.startsWith( 'Oculus Touch' ) ||\n\t\t\t\tgamepad.id.startsWith( 'HTC Vive Focus' ) ||\n\t\t\t\tgamepad.id.startsWith( 'Spatial Controller' ) ) ) {\n\n\t\t\t\tvar hand = gamepad.hand;\n\n\t\t\t\tif ( id === 0 && ( hand === '' || hand === 'right' ) ) return gamepad;\n\t\t\t\tif ( id === 1 && ( hand === 'left' ) ) return gamepad;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateControllers() {\n\n\t\tfor ( var i = 0; i < controllers.length; i ++ ) {\n\n\t\t\tvar controller = controllers[ i ];\n\n\t\t\tvar gamepad = findGamepad( i );\n\n\t\t\tif ( gamepad !== undefined && gamepad.pose !== undefined ) {\n\n\t\t\t\tif ( gamepad.pose === null ) return;\n\n\t\t\t\t// Pose\n\n\t\t\t\tvar pose = gamepad.pose;\n\n\t\t\t\tif ( pose.hasPosition === false ) controller.position.set( 0.2, - 0.6, - 0.05 );\n\n\t\t\t\tif ( pose.position !== null ) controller.position.fromArray( pose.position );\n\t\t\t\tif ( pose.orientation !== null ) controller.quaternion.fromArray( pose.orientation );\n\t\t\t\tcontroller.matrix.compose( controller.position, controller.quaternion, controller.scale );\n\t\t\t\tcontroller.matrix.premultiply( standingMatrix );\n\t\t\t\tcontroller.matrix.decompose( controller.position, controller.quaternion, controller.scale );\n\t\t\t\tcontroller.matrixWorldNeedsUpdate = true;\n\t\t\t\tcontroller.visible = true;\n\n\t\t\t\t// Trigger\n\n\t\t\t\tvar buttonId = gamepad.id === 'Daydream Controller' ? 0 : 1;\n\n\t\t\t\tif ( triggers[ i ] === undefined ) triggers[ i ] = false;\n\n\t\t\t\tif ( triggers[ i ] !== gamepad.buttons[ buttonId ].pressed ) {\n\n\t\t\t\t\ttriggers[ i ] = gamepad.buttons[ buttonId ].pressed;\n\n\t\t\t\t\tif ( triggers[ i ] === true ) {\n\n\t\t\t\t\t\tcontroller.dispatchEvent( { type: 'selectstart' } );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tcontroller.dispatchEvent( { type: 'selectend' } );\n\t\t\t\t\t\tcontroller.dispatchEvent( { type: 'select' } );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Grip\n\t\t\t\tbuttonId = 2;\n\n\t\t\t\tif ( grips[ i ] === undefined ) grips[ i ] = false;\n\n\t\t\t\t// Skip if the grip button doesn't exist on this controller\n\t\t\t\tif ( gamepad.buttons[ buttonId ] !== undefined ) {\n\n\t\t\t\t\tif ( grips[ i ] !== gamepad.buttons[ buttonId ].pressed ) {\n\n\t\t\t\t\t\tgrips[ i ] = gamepad.buttons[ buttonId ].pressed;\n\n\t\t\t\t\t\tif ( grips[ i ] === true ) {\n\n\t\t\t\t\t\t\tcontroller.dispatchEvent( { type: 'squeezestart' } );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tcontroller.dispatchEvent( { type: 'squeezeend' } );\n\t\t\t\t\t\t\tcontroller.dispatchEvent( { type: 'squeeze' } );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tcontroller.visible = false;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateViewportFromBounds( viewport, bounds ) {\n\n\t\tif ( bounds !== null && bounds.length === 4 ) {\n\n\t\t\tviewport.set( bounds[ 0 ] * renderWidth, bounds[ 1 ] * renderHeight, bounds[ 2 ] * renderWidth, bounds[ 3 ] * renderHeight );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tthis.enabled = false;\n\n\tthis.getController = function ( id ) {\n\n\t\tvar controller = controllers[ id ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = new Group();\n\t\t\tcontroller.matrixAutoUpdate = false;\n\t\t\tcontroller.visible = false;\n\n\t\t\tcontrollers[ id ] = controller;\n\n\t\t}\n\n\t\treturn controller;\n\n\t};\n\n\tthis.getDevice = function () {\n\n\t\treturn device;\n\n\t};\n\n\tthis.setDevice = function ( value ) {\n\n\t\tif ( value !== undefined ) device = value;\n\n\t\tanimation.setContext( value );\n\n\t};\n\n\tthis.setFramebufferScaleFactor = function ( value ) {\n\n\t\tframebufferScaleFactor = value;\n\n\t};\n\n\tthis.setReferenceSpaceType = function ( value ) {\n\n\t\treferenceSpaceType = value;\n\n\t};\n\n\tthis.getCamera = function ( camera ) {\n\n\t\tvar userHeight = referenceSpaceType === 'local-floor' ? 1.6 : 0;\n\n\t\tdevice.depthNear = camera.near;\n\t\tdevice.depthFar = camera.far;\n\n\t\tdevice.getFrameData( frameData );\n\n\t\t//\n\n\t\tif ( referenceSpaceType === 'local-floor' ) {\n\n\t\t\tvar stageParameters = device.stageParameters;\n\n\t\t\tif ( stageParameters ) {\n\n\t\t\t\tstandingMatrix.fromArray( stageParameters.sittingToStandingTransform );\n\n\t\t\t} else {\n\n\t\t\t\tstandingMatrix.makeTranslation( 0, userHeight, 0 );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tvar pose = frameData.pose;\n\n\t\ttempCamera.matrix.copy( standingMatrix );\n\t\ttempCamera.matrix.decompose( tempCamera.position, tempCamera.quaternion, tempCamera.scale );\n\n\t\tif ( pose.orientation !== null ) {\n\n\t\t\ttempQuaternion.fromArray( pose.orientation );\n\t\t\ttempCamera.quaternion.multiply( tempQuaternion );\n\n\t\t}\n\n\t\tif ( pose.position !== null ) {\n\n\t\t\ttempQuaternion.setFromRotationMatrix( standingMatrix );\n\t\t\ttempPosition.fromArray( pose.position );\n\t\t\ttempPosition.applyQuaternion( tempQuaternion );\n\t\t\ttempCamera.position.add( tempPosition );\n\n\t\t}\n\n\t\ttempCamera.updateMatrixWorld();\n\n\t\t//\n\n\t\tcamera.matrixWorld.copy( tempCamera.matrixWorld );\n\n\t\tvar children = camera.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( true );\n\n\t\t}\n\n\t\t//\n\n\t\tcameraL.near = camera.near;\n\t\tcameraR.near = camera.near;\n\n\t\tcameraL.far = camera.far;\n\t\tcameraR.far = camera.far;\n\n\t\tcameraL.matrixWorldInverse.fromArray( frameData.leftViewMatrix );\n\t\tcameraR.matrixWorldInverse.fromArray( frameData.rightViewMatrix );\n\n\t\t// TODO (mrdoob) Double check this code\n\n\t\tstandingMatrixInverse.getInverse( standingMatrix );\n\n\t\tif ( referenceSpaceType === 'local-floor' ) {\n\n\t\t\tcameraL.matrixWorldInverse.multiply( standingMatrixInverse );\n\t\t\tcameraR.matrixWorldInverse.multiply( standingMatrixInverse );\n\n\t\t}\n\n\t\tvar parent = camera.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tmatrixWorldInverse.getInverse( parent.matrixWorld );\n\n\t\t\tcameraL.matrixWorldInverse.multiply( matrixWorldInverse );\n\t\t\tcameraR.matrixWorldInverse.multiply( matrixWorldInverse );\n\n\t\t}\n\n\t\t// envMap and Mirror needs camera.matrixWorld\n\n\t\tcameraL.matrixWorld.getInverse( cameraL.matrixWorldInverse );\n\t\tcameraR.matrixWorld.getInverse( cameraR.matrixWorldInverse );\n\n\t\tcameraL.projectionMatrix.fromArray( frameData.leftProjectionMatrix );\n\t\tcameraR.projectionMatrix.fromArray( frameData.rightProjectionMatrix );\n\n\t\tsetProjectionFromUnion( cameraVR, cameraL, cameraR );\n\n\t\t//\n\n\t\tvar layers = device.getLayers();\n\n\t\tif ( layers.length ) {\n\n\t\t\tvar layer = layers[ 0 ];\n\n\t\t\tupdateViewportFromBounds( cameraL.viewport, layer.leftBounds );\n\t\t\tupdateViewportFromBounds( cameraR.viewport, layer.rightBounds );\n\n\t\t}\n\n\t\tupdateControllers();\n\n\t\treturn cameraVR;\n\n\t};\n\n\tthis.getStandingMatrix = function () {\n\n\t\treturn standingMatrix;\n\n\t};\n\n\tthis.isPresenting = isPresenting;\n\n\t// Animation Loop\n\n\tvar animation = new WebGLAnimation();\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tanimation.setAnimationLoop( callback );\n\n\t\tif ( isPresenting() ) animation.start();\n\n\t};\n\n\tthis.submitFrame = function () {\n\n\t\tif ( isPresenting() ) device.submitFrame();\n\n\t};\n\n\tthis.dispose = function () {\n\n\t\tif ( typeof window !== 'undefined' ) {\n\n\t\t\twindow.removeEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange );\n\n\t\t}\n\n\t};\n\n\t// DEPRECATED\n\n\tthis.setFrameOfReferenceType = function () {\n\n\t\tconsole.warn( 'THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.' );\n\n\t};\n\n}\n\nObject.assign( WebVRManager.prototype, EventDispatcher.prototype );\n\nexport { WebVRManager };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { EventDispatcher } from '../../core/EventDispatcher.js';\nimport { Group } from '../../objects/Group.js';\nimport { Matrix4 } from '../../math/Matrix4.js';\nimport { Vector4 } from '../../math/Vector4.js';\nimport { ArrayCamera } from '../../cameras/ArrayCamera.js';\nimport { PerspectiveCamera } from '../../cameras/PerspectiveCamera.js';\nimport { WebGLAnimation } from '../webgl/WebGLAnimation.js';\nimport { setProjectionFromUnion } from './WebVRUtils.js';\n\nfunction WebXRManager( renderer, gl ) {\n\n\tvar scope = this;\n\n\tvar session = null;\n\n\t// var framebufferScaleFactor = 1.0;\n\n\tvar referenceSpace = null;\n\tvar referenceSpaceType = 'local-floor';\n\n\tvar pose = null;\n\n\tvar controllers = [];\n\tvar sortedInputSources = [];\n\n\tfunction isPresenting() {\n\n\t\treturn session !== null && referenceSpace !== null;\n\n\t}\n\n\t//\n\n\tvar cameraL = new PerspectiveCamera();\n\tcameraL.layers.enable( 1 );\n\tcameraL.viewport = new Vector4();\n\n\tvar cameraR = new PerspectiveCamera();\n\tcameraR.layers.enable( 2 );\n\tcameraR.viewport = new Vector4();\n\n\tvar cameraVR = new ArrayCamera( [ cameraL, cameraR ] );\n\tcameraVR.layers.enable( 1 );\n\tcameraVR.layers.enable( 2 );\n\n\t//\n\n\tthis.enabled = false;\n\n\tthis.getController = function ( id ) {\n\n\t\tvar controller = controllers[ id ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = new Group();\n\t\t\tcontroller.matrixAutoUpdate = false;\n\t\t\tcontroller.visible = false;\n\n\t\t\tcontrollers[ id ] = controller;\n\n\t\t}\n\n\t\treturn controller;\n\n\t};\n\n\t//\n\n\tfunction onSessionEvent( event ) {\n\n\t\tfor ( var i = 0; i < controllers.length; i ++ ) {\n\n\t\t\tif ( sortedInputSources[ i ] === event.inputSource ) {\n\n\t\t\t\tcontrollers[ i ].dispatchEvent( { type: event.type } );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction onSessionEnd() {\n\n\t\trenderer.setFramebuffer( null );\n\t\trenderer.setRenderTarget( renderer.getRenderTarget() ); // Hack #15830\n\t\tanimation.stop();\n\n\t\tscope.dispatchEvent( { type: 'sessionend' } );\n\n\t}\n\n\tfunction onRequestReferenceSpace( value ) {\n\n\t\treferenceSpace = value;\n\n\t\tanimation.setContext( session );\n\t\tanimation.start();\n\n\t\tscope.dispatchEvent( { type: 'sessionstart' } );\n\n\t}\n\n\tthis.setFramebufferScaleFactor = function ( /* value */ ) {\n\n\t\t// framebufferScaleFactor = value;\n\n\t};\n\n\tthis.setReferenceSpaceType = function ( value ) {\n\n\t\treferenceSpaceType = value;\n\n\t};\n\n\tthis.getSession = function () {\n\n\t\treturn session;\n\n\t};\n\n\tthis.setSession = function ( value ) {\n\n\t\tsession = value;\n\n\t\tif ( session !== null ) {\n\n\t\t\tsession.addEventListener( 'select', onSessionEvent );\n\t\t\tsession.addEventListener( 'selectstart', onSessionEvent );\n\t\t\tsession.addEventListener( 'selectend', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeeze', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeezestart', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeezeend', onSessionEvent );\n\t\t\tsession.addEventListener( 'end', onSessionEnd );\n\n\t\t\t// eslint-disable-next-line no-undef\n\t\t\tsession.updateRenderState( { baseLayer: new XRWebGLLayer( session, gl ) } );\n\n\t\t\tsession.requestReferenceSpace( referenceSpaceType ).then( onRequestReferenceSpace );\n\n\t\t\t//\n\n\t\t\tsession.addEventListener( 'inputsourceschange', updateInputSources );\n\n\t\t\tupdateInputSources();\n\n\t\t}\n\n\t};\n\n\tfunction updateInputSources() {\n\n\t\tfor ( var i = 0; i < controllers.length; i ++ ) {\n\n\t\t\tsortedInputSources[ i ] = findInputSource( i );\n\n\t\t}\n\n\t}\n\n\tfunction findInputSource( id ) {\n\n\t\tvar inputSources = session.inputSources;\n\n\t\tfor ( var i = 0; i < inputSources.length; i ++ ) {\n\n\t\t\tvar inputSource = inputSources[ i ];\n\t\t\tvar handedness = inputSource.handedness;\n\n\t\t\tif ( id === 0 && ( handedness === 'none' || handedness === 'right' ) ) return inputSource;\n\t\t\tif ( id === 1 && ( handedness === 'left' ) ) return inputSource;\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction updateCamera( camera, parent ) {\n\n\t\tif ( parent === null ) {\n\n\t\t\tcamera.matrixWorld.copy( camera.matrix );\n\n\t\t} else {\n\n\t\t\tcamera.matrixWorld.multiplyMatrices( parent.matrixWorld, camera.matrix );\n\n\t\t}\n\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\n\n\t}\n\n\tthis.getCamera = function ( camera ) {\n\n\t\tvar parent = camera.parent;\n\t\tvar cameras = cameraVR.cameras;\n\n\t\tupdateCamera( cameraVR, parent );\n\n\t\tfor ( var i = 0; i < cameras.length; i ++ ) {\n\n\t\t\tupdateCamera( cameras[ i ], parent );\n\n\t\t}\n\n\t\t// update camera and its children\n\n\t\tcamera.matrixWorld.copy( cameraVR.matrixWorld );\n\n\t\tvar children = camera.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( true );\n\n\t\t}\n\n\t\tsetProjectionFromUnion( cameraVR, cameraL, cameraR );\n\n\t\treturn cameraVR;\n\n\t};\n\n\tthis.isPresenting = isPresenting;\n\n\t// Animation Loop\n\n\tvar onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tpose = frame.getViewerPose( referenceSpace );\n\n\t\tif ( pose !== null ) {\n\n\t\t\tvar views = pose.views;\n\t\t\tvar baseLayer = session.renderState.baseLayer;\n\n\t\t\trenderer.setFramebuffer( baseLayer.framebuffer );\n\n\t\t\tfor ( var i = 0; i < views.length; i ++ ) {\n\n\t\t\t\tvar view = views[ i ];\n\t\t\t\tvar viewport = baseLayer.getViewport( view );\n\t\t\t\tvar viewMatrix = view.transform.inverse.matrix;\n\n\t\t\t\tvar camera = cameraVR.cameras[ i ];\n\t\t\t\tcamera.matrix.fromArray( viewMatrix ).getInverse( camera.matrix );\n\t\t\t\tcamera.projectionMatrix.fromArray( view.projectionMatrix );\n\t\t\t\tcamera.viewport.set( viewport.x, viewport.y, viewport.width, viewport.height );\n\n\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\tcameraVR.matrix.copy( camera.matrix );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tfor ( var i = 0; i < controllers.length; i ++ ) {\n\n\t\t\tvar controller = controllers[ i ];\n\n\t\t\tvar inputSource = sortedInputSources[ i ];\n\n\t\t\tif ( inputSource ) {\n\n\t\t\t\tvar inputPose = frame.getPose( inputSource.targetRaySpace, referenceSpace );\n\n\t\t\t\tif ( inputPose !== null ) {\n\n\t\t\t\t\tcontroller.matrix.fromArray( inputPose.transform.matrix );\n\t\t\t\t\tcontroller.matrix.decompose( controller.position, controller.rotation, controller.scale );\n\t\t\t\t\tcontroller.visible = true;\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tcontroller.visible = false;\n\n\t\t}\n\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time );\n\n\t}\n\n\tvar animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\n\t};\n\n\tthis.dispose = function () {};\n\n\t// DEPRECATED\n\n\tthis.getStandingMatrix = function () {\n\n\t\tconsole.warn( 'THREE.WebXRManager: getStandingMatrix() is no longer needed.' );\n\t\treturn new Matrix4();\n\n\t};\n\n\tthis.getDevice = function () {\n\n\t\tconsole.warn( 'THREE.WebXRManager: getDevice() has been deprecated.' );\n\n\t};\n\n\tthis.setDevice = function () {\n\n\t\tconsole.warn( 'THREE.WebXRManager: setDevice() has been deprecated.' );\n\n\t};\n\n\tthis.setFrameOfReferenceType = function () {\n\n\t\tconsole.warn( 'THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.' );\n\n\t};\n\n\tthis.submitFrame = function () {};\n\n}\n\nObject.assign( WebXRManager.prototype, EventDispatcher.prototype );\n\nexport { WebXRManager };\n","import { BoxBufferGeometry } from 'three/src/geometries/BoxGeometry';\nimport { DirectionalLight } from 'three/src/lights/DirectionalLight';\nimport { Mesh } from 'three/src/objects/Mesh';\nimport { MeshNormalMaterial } from 'three/src/materials/MeshNormalMaterial';\nimport { PerspectiveCamera } from 'three/src/cameras/PerspectiveCamera';\nimport { Scene } from 'three/src/scenes/Scene';\nimport { WebGLRenderer } from 'three/src/renderers/WebGLRenderer';\n\n// Treeshake only the things we need \nconst THREE = {\n\tDirectionalLight,\n  BoxBufferGeometry,\n  Mesh,\n  MeshNormalMaterial,\n  PerspectiveCamera,\n  Scene,\n  WebGLRenderer\n};\n\nwindow.THREE = THREE;\n","import {\n\tRGBAFormat,\n\tHalfFloatType,\n\tFloatType,\n\tUnsignedByteType,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tTrianglesDrawMode,\n\tLinearToneMapping,\n\tBackSide\n} from '../constants.js';\nimport { _Math } from '../math/Math.js';\nimport { DataTexture } from '../textures/DataTexture.js';\nimport { Frustum } from '../math/Frustum.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { ShaderLib } from './shaders/ShaderLib.js';\nimport { UniformsLib } from './shaders/UniformsLib.js';\nimport { cloneUniforms } from './shaders/UniformsUtils.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector4 } from '../math/Vector4.js';\nimport { WebGLAnimation } from './webgl/WebGLAnimation.js';\nimport { WebGLAttributes } from './webgl/WebGLAttributes.js';\nimport { WebGLBackground } from './webgl/WebGLBackground.js';\nimport { WebGLBufferRenderer } from './webgl/WebGLBufferRenderer.js';\nimport { WebGLCapabilities } from './webgl/WebGLCapabilities.js';\nimport { WebGLClipping } from './webgl/WebGLClipping.js';\nimport { WebGLExtensions } from './webgl/WebGLExtensions.js';\nimport { WebGLGeometries } from './webgl/WebGLGeometries.js';\nimport { WebGLIndexedBufferRenderer } from './webgl/WebGLIndexedBufferRenderer.js';\nimport { WebGLInfo } from './webgl/WebGLInfo.js';\nimport { WebGLMorphtargets } from './webgl/WebGLMorphtargets.js';\nimport { WebGLObjects } from './webgl/WebGLObjects.js';\nimport { WebGLPrograms } from './webgl/WebGLPrograms.js';\nimport { WebGLProperties } from './webgl/WebGLProperties.js';\nimport { WebGLRenderLists } from './webgl/WebGLRenderLists.js';\nimport { WebGLRenderStates } from './webgl/WebGLRenderStates.js';\nimport { WebGLShadowMap } from './webgl/WebGLShadowMap.js';\nimport { WebGLState } from './webgl/WebGLState.js';\nimport { WebGLTextures } from './webgl/WebGLTextures.js';\nimport { WebGLUniforms } from './webgl/WebGLUniforms.js';\nimport { WebGLUtils } from './webgl/WebGLUtils.js';\nimport { WebGLMultiview } from './webgl/WebGLMultiview.js';\nimport { WebVRManager } from './webvr/WebVRManager.js';\nimport { WebXRManager } from './webvr/WebXRManager.js';\n\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n * @author tschw\n */\n\nfunction WebGLRenderer( parameters ) {\n\n\tparameters = parameters || {};\n\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' ),\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n\t\t_powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default',\n\t\t_failIfMajorPerformanceCaveat = parameters.failIfMajorPerformanceCaveat !== undefined ? parameters.failIfMajorPerformanceCaveat : false;\n\n\tvar currentRenderList = null;\n\tvar currentRenderState = null;\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\n\t// Debug configuration container\n\tthis.debug = {\n\n\t\t/**\n\t\t * Enables error checking and reporting when shader programs are being compiled\n\t\t * @type {boolean}\n\t\t */\n\t\tcheckShaderErrors: true\n\t};\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// user-defined clipping\n\n\tthis.clippingPlanes = [];\n\tthis.localClippingEnabled = false;\n\n\t// physically based shading\n\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\n\tthis.gammaInput = false;\n\tthis.gammaOutput = false;\n\n\t// physical lights\n\n\tthis.physicallyCorrectLights = false;\n\n\t// tone mapping\n\n\tthis.toneMapping = LinearToneMapping;\n\tthis.toneMappingExposure = 1.0;\n\tthis.toneMappingWhitePoint = 1.0;\n\n\t// morphs\n\n\tthis.maxMorphTargets = 8;\n\tthis.maxMorphNormals = 4;\n\n\t// internal properties\n\n\tvar _this = this,\n\n\t\t_isContextLost = false,\n\n\t\t// internal state cache\n\n\t\t_framebuffer = null,\n\n\t\t_currentActiveCubeFace = 0,\n\t\t_currentActiveMipmapLevel = 0,\n\t\t_currentRenderTarget = null,\n\t\t_currentFramebuffer = null,\n\t\t_currentMaterialId = - 1,\n\n\t\t// geometry and program caching\n\n\t\t_currentGeometryProgram = {\n\t\t\tgeometry: null,\n\t\t\tprogram: null,\n\t\t\twireframe: false\n\t\t},\n\n\t\t_currentCamera = null,\n\t\t_currentArrayCamera = null,\n\n\t\t_currentViewport = new Vector4(),\n\t\t_currentScissor = new Vector4(),\n\t\t_currentScissorTest = null,\n\n\t\t//\n\n\t\t_width = _canvas.width,\n\t\t_height = _canvas.height,\n\n\t\t_pixelRatio = 1,\n\n\t\t_viewport = new Vector4( 0, 0, _width, _height ),\n\t\t_scissor = new Vector4( 0, 0, _width, _height ),\n\t\t_scissorTest = false,\n\n\t\t// frustum\n\n\t\t_frustum = new Frustum(),\n\n\t\t// clipping\n\n\t\t_clipping = new WebGLClipping(),\n\t\t_clippingEnabled = false,\n\t\t_localClippingEnabled = false,\n\n\t\t// camera matrices cache\n\n\t\t_projScreenMatrix = new Matrix4(),\n\n\t\t_vector3 = new Vector3();\n\n\tfunction getTargetPixelRatio() {\n\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t}\n\n\t// initialize\n\n\tvar _gl;\n\n\ttry {\n\n\t\tvar contextAttributes = {\n\t\t\talpha: _alpha,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer,\n\t\t\tpowerPreference: _powerPreference,\n\t\t\tfailIfMajorPerformanceCaveat: _failIfMajorPerformanceCaveat,\n\t\t\txrCompatible: true\n\t\t};\n\n\t\t// event listeners must be registered before WebGL context is created, see #12753\n\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\t_gl = _context || _canvas.getContext( 'webgl', contextAttributes ) || _canvas.getContext( 'experimental-webgl', contextAttributes );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tif ( _canvas.getContext( 'webgl' ) !== null ) {\n\n\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\n\n\t\t\t} else {\n\n\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t};\n\n\t\t}\n\n\t} catch ( error ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\n\t\tthrow error;\n\n\t}\n\n\tvar extensions, capabilities, state, info;\n\tvar properties, textures, attributes, geometries, objects;\n\tvar programCache, renderLists, renderStates;\n\n\tvar background, morphtargets, bufferRenderer, indexedBufferRenderer;\n\n\tvar utils;\n\n\tfunction initGLContext() {\n\n\t\textensions = new WebGLExtensions( _gl );\n\n\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\t\tif ( capabilities.isWebGL2 === false ) {\n\n\t\t\textensions.get( 'WEBGL_depth_texture' );\n\t\t\textensions.get( 'OES_texture_float' );\n\t\t\textensions.get( 'OES_texture_half_float' );\n\t\t\textensions.get( 'OES_texture_half_float_linear' );\n\t\t\textensions.get( 'OES_standard_derivatives' );\n\t\t\textensions.get( 'OES_element_index_uint' );\n\t\t\textensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t}\n\n\t\textensions.get( 'OES_texture_float_linear' );\n\n\t\tutils = new WebGLUtils( _gl, extensions, capabilities );\n\n\t\tstate = new WebGLState( _gl, extensions, capabilities );\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t\tinfo = new WebGLInfo( _gl );\n\t\tproperties = new WebGLProperties();\n\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\n\t\tattributes = new WebGLAttributes( _gl );\n\t\tgeometries = new WebGLGeometries( _gl, attributes, info );\n\t\tobjects = new WebGLObjects( _gl, geometries, attributes, info );\n\t\tmorphtargets = new WebGLMorphtargets( _gl );\n\t\tprogramCache = new WebGLPrograms( _this, extensions, capabilities );\n\t\trenderLists = new WebGLRenderLists();\n\t\trenderStates = new WebGLRenderStates();\n\n\t\tbackground = new WebGLBackground( _this, state, objects, _premultipliedAlpha );\n\n\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, info, capabilities );\n\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info, capabilities );\n\n\t\tinfo.programs = programCache.programs;\n\n\t\t_this.capabilities = capabilities;\n\t\t_this.extensions = extensions;\n\t\t_this.properties = properties;\n\t\t_this.renderLists = renderLists;\n\t\t_this.state = state;\n\t\t_this.info = info;\n\n\t}\n\n\tinitGLContext();\n\n\t// vr\n\n\tvar vr = ( typeof navigator !== 'undefined' && 'xr' in navigator ) ? new WebXRManager( _this, _gl ) : new WebVRManager( _this );\n\n\tthis.vr = vr;\n\n\t// Multiview\n\n\tvar multiview = new WebGLMultiview( _this, _gl );\n\n\t// shadow map\n\n\tvar shadowMap = new WebGLShadowMap( _this, objects, capabilities.maxTextureSize );\n\n\tthis.shadowMap = shadowMap;\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _gl.getContextAttributes();\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\tvar extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.loseContext();\n\n\t};\n\n\tthis.forceContextRestore = function () {\n\n\t\tvar extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.restoreContext();\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value === undefined ) return;\n\n\t\t_pixelRatio = value;\n\n\t\tthis.setSize( _width, _height, false );\n\n\t};\n\n\tthis.getSize = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getsize() now requires a Vector2 as an argument' );\n\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set( _width, _height );\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\tif ( vr.isPresenting() ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_canvas.width = Math.floor( width * _pixelRatio );\n\t\t_canvas.height = Math.floor( height * _pixelRatio );\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getDrawingBufferSize = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument' );\n\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set( _width * _pixelRatio, _height * _pixelRatio ).floor();\n\n\t};\n\n\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_pixelRatio = pixelRatio;\n\n\t\t_canvas.width = Math.floor( width * pixelRatio );\n\t\t_canvas.height = Math.floor( height * pixelRatio );\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getCurrentViewport = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument' );\n\n\t\t\ttarget = new Vector4();\n\n\t\t}\n\n\t\treturn target.copy( _currentViewport );\n\n\t};\n\n\tthis.getViewport = function ( target ) {\n\n\t\treturn target.copy( _viewport );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_viewport.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_viewport.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissor = function ( target ) {\n\n\t\treturn target.copy( _scissor );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_scissor.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_scissor.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissorTest = function () {\n\n\t\treturn _scissorTest;\n\n\t};\n\n\tthis.setScissorTest = function ( boolean ) {\n\n\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function () {\n\n\t\treturn background.getClearColor();\n\n\t};\n\n\tthis.setClearColor = function () {\n\n\t\tbackground.setClearColor.apply( background, arguments );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn background.getClearAlpha();\n\n\t};\n\n\tthis.setClearAlpha = function () {\n\n\t\tbackground.setClearAlpha.apply( background, arguments );\n\n\t};\n\n\tthis.clear = function ( color, depth, stencil ) {\n\n\t\tvar bits = 0;\n\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\tthis.clear( true, false, false );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\tthis.clear( false, true, false );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\tthis.clear( false, false, true );\n\n\t};\n\n\t//\n\n\tthis.dispose = function () {\n\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\trenderLists.dispose();\n\t\trenderStates.dispose();\n\t\tproperties.dispose();\n\t\tobjects.dispose();\n\n\t\tvr.dispose();\n\n\t\tanimation.stop();\n\n\t};\n\n\t// Events\n\n\tfunction onContextLost( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\n\n\t\t_isContextLost = true;\n\n\t}\n\n\tfunction onContextRestore( /* event */ ) {\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\n\n\t\t_isContextLost = false;\n\n\t\tinitGLContext();\n\n\t}\n\n\tfunction onMaterialDispose( event ) {\n\n\t\tvar material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t}\n\n\t// Buffer deallocation\n\n\tfunction deallocateMaterial( material ) {\n\n\t\treleaseMaterialProgramReference( material );\n\n\t\tproperties.remove( material );\n\n\t}\n\n\n\tfunction releaseMaterialProgramReference( material ) {\n\n\t\tvar programInfo = properties.get( material ).program;\n\n\t\tmaterial.program = undefined;\n\n\t\tif ( programInfo !== undefined ) {\n\n\t\t\tprogramCache.releaseProgram( programInfo );\n\n\t\t}\n\n\t}\n\n\t// Buffer rendering\n\n\tfunction renderObjectImmediate( object, program ) {\n\n\t\tobject.render( function ( object ) {\n\n\t\t\t_this.renderBufferImmediate( object, program );\n\n\t\t} );\n\n\t}\n\n\tthis.renderBufferImmediate = function ( object, program ) {\n\n\t\tstate.initAttributes();\n\n\t\tvar buffers = properties.get( object );\n\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tif ( object.hasPositions ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.position );\n\t\t\t_gl.vertexAttribPointer( programAttributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasNormals ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.normal );\n\t\t\t_gl.vertexAttribPointer( programAttributes.normal, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasUvs ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.uv );\n\t\t\t_gl.vertexAttribPointer( programAttributes.uv, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasColors ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.color );\n\t\t\t_gl.vertexAttribPointer( programAttributes.color, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tstate.disableUnusedAttributes();\n\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\n\n\t\tobject.count = 0;\n\n\t};\n\n\tthis.renderBufferDirect = function ( camera, fog, geometry, material, object, group ) {\n\n\t\tvar frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\tvar program = setProgram( camera, fog, material, object );\n\n\t\tvar updateBuffers = false;\n\n\t\tif ( _currentGeometryProgram.geometry !== geometry.id ||\n\t\t\t_currentGeometryProgram.program !== program.id ||\n\t\t\t_currentGeometryProgram.wireframe !== ( material.wireframe === true ) ) {\n\n\t\t\t_currentGeometryProgram.geometry = geometry.id;\n\t\t\t_currentGeometryProgram.program = program.id;\n\t\t\t_currentGeometryProgram.wireframe = material.wireframe === true;\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\tif ( object.morphTargetInfluences ) {\n\n\t\t\tmorphtargets.update( object, geometry, material, program );\n\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\t//\n\n\t\tvar index = geometry.index;\n\t\tvar position = geometry.attributes.position;\n\n\t\t//\n\n\t\tif ( index !== null && index.count === 0 ) return;\n\t\tif ( position === undefined || position.count === 0 ) return;\n\n\t\t//\n\n\t\tvar rangeFactor = 1;\n\n\t\tif ( material.wireframe === true ) {\n\n\t\t\tindex = geometries.getWireframeAttribute( geometry );\n\t\t\trangeFactor = 2;\n\n\t\t}\n\n\t\tvar attribute;\n\t\tvar renderer = bufferRenderer;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattribute = attributes.get( index );\n\n\t\t\trenderer = indexedBufferRenderer;\n\t\t\trenderer.setIndex( attribute );\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tsetupVertexAttributes( object, geometry, material, program );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, attribute.buffer );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar dataCount = Infinity;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdataCount = index.count;\n\n\t\t} else if ( position !== undefined ) {\n\n\t\t\tdataCount = position.count;\n\n\t\t}\n\n\t\tvar rangeStart = geometry.drawRange.start * rangeFactor;\n\t\tvar rangeCount = geometry.drawRange.count * rangeFactor;\n\n\t\tvar groupStart = group !== null ? group.start * rangeFactor : 0;\n\t\tvar groupCount = group !== null ? group.count * rangeFactor : Infinity;\n\n\t\tvar drawStart = Math.max( rangeStart, groupStart );\n\t\tvar drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\n\n\t\tvar drawCount = Math.max( 0, drawEnd - drawStart + 1 );\n\n\t\tif ( drawCount === 0 ) return;\n\n\t\t//\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else {\n\n\t\t\t\tswitch ( object.drawMode ) {\n\n\t\t\t\t\tcase TrianglesDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLES );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TriangleStripDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_STRIP );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TriangleFanDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_FAN );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( object.isLine ) {\n\n\t\t\tvar lineWidth = material.linewidth;\n\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\tif ( object.isLineSegments ) {\n\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else if ( object.isLineLoop ) {\n\n\t\t\t\trenderer.setMode( _gl.LINE_LOOP );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\n\n\t\t\t}\n\n\t\t} else if ( object.isPoints ) {\n\n\t\t\trenderer.setMode( _gl.POINTS );\n\n\t\t} else if ( object.isSprite ) {\n\n\t\t\trenderer.setMode( _gl.TRIANGLES );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\trenderer.renderInstances( geometry, drawStart, drawCount, object.count );\n\n\t\t} else if ( geometry.isInstancedBufferGeometry ) {\n\n\t\t\trenderer.renderInstances( geometry, drawStart, drawCount, geometry.maxInstancedCount );\n\n\t\t} else {\n\n\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t}\n\n\t};\n\n\tfunction setupVertexAttributes( object, geometry, material, program ) {\n\n\t\tif ( capabilities.isWebGL2 === false && ( object.isInstancedMesh || geometry.isInstancedBufferGeometry ) ) {\n\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) return;\n\n\t\t}\n\n\t\tstate.initAttributes();\n\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tvar materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( var name in programAttributes ) {\n\n\t\t\tvar programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute >= 0 ) {\n\n\t\t\t\tvar geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tvar normalized = geometryAttribute.normalized;\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\n\n\t\t\t\t\tvar attribute = attributes.get( geometryAttribute );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tvar buffer = attribute.buffer;\n\t\t\t\t\tvar type = attribute.type;\n\t\t\t\t\tvar bytesPerElement = attribute.bytesPerElement;\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tvar data = geometryAttribute.data;\n\t\t\t\t\t\tvar stride = data.stride;\n\t\t\t\t\t\tvar offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data && data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, data.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, offset * bytesPerElement );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, 0, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( name === 'instanceMatrix' ) {\n\n\t\t\t\t\tvar attribute = attributes.get( object.instanceMatrix );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tvar buffer = attribute.buffer;\n\t\t\t\t\tvar type = attribute.type;\n\n\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute + 0, 1 );\n\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute + 1, 1 );\n\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute + 2, 1 );\n\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute + 3, 1 );\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute + 0, 4, type, false, 64, 0 );\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute + 1, 4, type, false, 64, 16 );\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute + 2, 4, type, false, 64, 32 );\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute + 3, 4, type, false, 64, 48 );\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tvar value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib4fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib1fv( programAttribute, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.disableUnusedAttributes();\n\n\t}\n\n\t// Compile\n\n\tthis.compile = function ( scene, camera ) {\n\n\t\tcurrentRenderState = renderStates.get( scene, camera );\n\t\tcurrentRenderState.init();\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\tcurrentRenderState.setupLights( camera );\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object.material ) {\n\n\t\t\t\tif ( Array.isArray( object.material ) ) {\n\n\t\t\t\t\tfor ( var i = 0; i < object.material.length; i ++ ) {\n\n\t\t\t\t\t\tinitMaterial( object.material[ i ], scene.fog, object );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinitMaterial( object.material, scene.fog, object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\t// Animation Loop\n\n\tvar onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time ) {\n\n\t\tif ( vr.isPresenting() ) return;\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time );\n\n\t}\n\n\tvar animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tif ( typeof window !== 'undefined' ) animation.setContext( window );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\t\tvr.setAnimationLoop( callback );\n\n\t\tanimation.start();\n\n\t};\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tvar renderTarget, forceClear;\n\n\t\tif ( arguments[ 2 ] !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.' );\n\t\t\trenderTarget = arguments[ 2 ];\n\n\t\t}\n\n\t\tif ( arguments[ 3 ] !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.' );\n\t\t\tforceClear = arguments[ 3 ];\n\n\t\t}\n\n\t\tif ( ! ( camera && camera.isCamera ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( _isContextLost ) return;\n\n\t\t// reset caching for this frame\n\n\t\t_currentGeometryProgram.geometry = null;\n\t\t_currentGeometryProgram.program = null;\n\t\t_currentGeometryProgram.wireframe = false;\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\n\t\t// update scene graph\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tif ( vr.enabled && vr.isPresenting() ) {\n\n\t\t\tcamera = vr.getCamera( camera );\n\n\t\t}\n\n\t\t//\n\n\t\tcurrentRenderState = renderStates.get( scene, camera );\n\t\tcurrentRenderState.init();\n\n\t\tscene.onBeforeRender( _this, scene, camera, renderTarget || _currentRenderTarget );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t_clippingEnabled = _clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\n\n\t\tcurrentRenderList = renderLists.get( scene, camera );\n\t\tcurrentRenderList.init();\n\n\t\tprojectObject( scene, camera, 0, _this.sortObjects );\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\tcurrentRenderList.sort();\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _clippingEnabled ) _clipping.beginShadows();\n\n\t\tvar shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tshadowMap.render( shadowsArray, scene, camera );\n\n\t\tcurrentRenderState.setupLights( camera );\n\n\t\tif ( _clippingEnabled ) _clipping.endShadows();\n\n\t\t//\n\n\t\tif ( this.info.autoReset ) this.info.reset();\n\n\t\tif ( renderTarget !== undefined ) {\n\n\t\t\tthis.setRenderTarget( renderTarget );\n\n\t\t}\n\n\t\tif ( vr.enabled && multiview.isAvailable() ) {\n\n\t\t\tmultiview.attachCamera( camera );\n\n\t\t}\n\n\t\t//\n\n\t\tbackground.render( currentRenderList, scene, camera, forceClear );\n\n\t\t// render scene\n\n\t\tvar opaqueObjects = currentRenderList.opaque;\n\t\tvar transparentObjects = currentRenderList.transparent;\n\n\t\tif ( scene.overrideMaterial ) {\n\n\t\t\tvar overrideMaterial = scene.overrideMaterial;\n\n\t\t\tif ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera, overrideMaterial );\n\t\t\tif ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera, overrideMaterial );\n\n\t\t} else {\n\n\t\t\t// opaque pass (front-to-back order)\n\n\t\t\tif ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera );\n\n\t\t\t// transparent pass (back-to-front order)\n\n\t\t\tif ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera );\n\n\t\t}\n\n\t\t//\n\n\t\tscene.onAfterRender( _this, scene, camera );\n\n\t\t//\n\n\t\tif ( _currentRenderTarget !== null ) {\n\n\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\t\ttextures.updateRenderTargetMipmap( _currentRenderTarget );\n\n\t\t\t// resolve multisample renderbuffers to a single-sample texture if necessary\n\n\t\t\ttextures.updateMultisampleRenderTarget( _currentRenderTarget );\n\n\t\t}\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tstate.buffers.depth.setTest( true );\n\t\tstate.buffers.depth.setMask( true );\n\t\tstate.buffers.color.setMask( true );\n\n\t\tstate.setPolygonOffset( false );\n\n\t\tif ( vr.enabled ) {\n\n\t\t\tif ( multiview.isAvailable() ) {\n\n\t\t\t\tmultiview.detachCamera( camera );\n\n\t\t\t}\n\n\t\t\tvr.submitFrame();\n\n\t\t}\n\n\t\t// _gl.finish();\n\n\t\tcurrentRenderList = null;\n\t\tcurrentRenderState = null;\n\n\t};\n\n\tfunction projectObject( object, camera, groupOrder, sortObjects ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tvar visible = object.layers.test( camera.layers );\n\n\t\tif ( visible ) {\n\n\t\t\tif ( object.isGroup ) {\n\n\t\t\t\tgroupOrder = object.renderOrder;\n\n\t\t\t} else if ( object.isLOD ) {\n\n\t\t\t\tif ( object.autoUpdate === true ) object.update( camera );\n\n\t\t\t} else if ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar geometry = objects.update( object );\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tif ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isImmediateRenderObject ) {\n\n\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tcurrentRenderList.push( object, null, object.material, groupOrder, _vector3.z, null );\n\n\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\t\t// update skeleton only once in a frame\n\n\t\t\t\t\tif ( object.skeleton.frame !== info.render.frame ) {\n\n\t\t\t\t\t\tobject.skeleton.update();\n\t\t\t\t\t\tobject.skeleton.frame = info.render.frame;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar geometry = objects.update( object );\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tvar group = groups[ i ];\n\t\t\t\t\t\t\tvar groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, groupOrder, _vector3.z, group );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera, groupOrder, sortObjects );\n\n\t\t}\n\n\t}\n\n\tfunction renderObjects( renderList, scene, camera, overrideMaterial ) {\n\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tvar renderItem = renderList[ i ];\n\n\t\t\tvar object = renderItem.object;\n\t\t\tvar geometry = renderItem.geometry;\n\t\t\tvar material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\n\t\t\tvar group = renderItem.group;\n\n\t\t\tif ( camera.isArrayCamera ) {\n\n\t\t\t\t_currentArrayCamera = camera;\n\n\t\t\t\tif ( vr.enabled && multiview.isAvailable() ) {\n\n\t\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvar cameras = camera.cameras;\n\n\t\t\t\t\tfor ( var j = 0, jl = cameras.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tvar camera2 = cameras[ j ];\n\n\t\t\t\t\t\tif ( object.layers.test( camera2.layers ) ) {\n\n\t\t\t\t\t\t\tstate.viewport( _currentViewport.copy( camera2.viewport ) );\n\n\t\t\t\t\t\t\tcurrentRenderState.setupLights( camera2 );\n\n\t\t\t\t\t\t\trenderObject( object, scene, camera2, geometry, material, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_currentArrayCamera = null;\n\n\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderObject( object, scene, camera, geometry, material, group ) {\n\n\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\n\n\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\tif ( object.isImmediateRenderObject ) {\n\n\t\t\tstate.setMaterial( material );\n\n\t\t\tvar program = setProgram( camera, scene.fog, material, object );\n\n\t\t\t_currentGeometryProgram.geometry = null;\n\t\t\t_currentGeometryProgram.program = null;\n\t\t\t_currentGeometryProgram.wireframe = false;\n\n\t\t\trenderObjectImmediate( object, program );\n\n\t\t} else {\n\n\t\t\t_this.renderBufferDirect( camera, scene.fog, geometry, material, object, group );\n\n\t\t}\n\n\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\n\n\t}\n\n\tfunction initMaterial( material, fog, object ) {\n\n\t\tvar materialProperties = properties.get( material );\n\n\t\tvar lights = currentRenderState.state.lights;\n\t\tvar shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tvar lightsStateVersion = lights.state.version;\n\n\t\tvar parameters = programCache.getParameters(\n\t\t\tmaterial, lights.state, shadowsArray, fog, _clipping.numPlanes, _clipping.numIntersection, object );\n\n\t\tvar programCacheKey = programCache.getProgramCacheKey( material, parameters );\n\n\t\tvar program = materialProperties.program;\n\t\tvar programChange = true;\n\n\t\tif ( program === undefined ) {\n\n\t\t\t// new material\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t} else if ( program.cacheKey !== programCacheKey ) {\n\n\t\t\t// changed glsl or parameters\n\t\t\treleaseMaterialProgramReference( material );\n\n\t\t} else if ( materialProperties.lightsStateVersion !== lightsStateVersion ) {\n\n\t\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\n\n\t\t\tprogramChange = false;\n\n\t\t} else if ( parameters.shaderID !== undefined ) {\n\n\t\t\t// same glsl and uniform list\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// only rebuild uniform list\n\t\t\tprogramChange = false;\n\n\t\t}\n\n\t\tif ( programChange ) {\n\n\t\t\tif ( parameters.shaderID ) {\n\n\t\t\t\tvar shader = ShaderLib[ parameters.shaderID ];\n\n\t\t\t\tmaterialProperties.shader = {\n\t\t\t\t\tname: material.type,\n\t\t\t\t\tuniforms: cloneUniforms( shader.uniforms ),\n\t\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\t\tfragmentShader: shader.fragmentShader\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tmaterialProperties.shader = {\n\t\t\t\t\tname: material.type,\n\t\t\t\t\tuniforms: material.uniforms,\n\t\t\t\t\tvertexShader: material.vertexShader,\n\t\t\t\t\tfragmentShader: material.fragmentShader\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tmaterial.onBeforeCompile( materialProperties.shader, _this );\n\n\t\t\t// Computing cache key again as onBeforeCompile may have changed the shaders\n\t\t\tprogramCacheKey = programCache.getProgramCacheKey( material, parameters );\n\n\t\t\tprogram = programCache.acquireProgram( material, materialProperties.shader, parameters, programCacheKey );\n\n\t\t\tmaterialProperties.program = program;\n\t\t\tmaterial.program = program;\n\n\t\t}\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tif ( material.morphTargets ) {\n\n\t\t\tmaterial.numSupportedMorphTargets = 0;\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\n\n\t\t\t\tif ( programAttributes[ 'morphTarget' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.morphNormals ) {\n\n\t\t\tmaterial.numSupportedMorphNormals = 0;\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphNormals; i ++ ) {\n\n\t\t\t\tif ( programAttributes[ 'morphNormal' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar uniforms = materialProperties.shader.uniforms;\n\n\t\tif ( ! material.isShaderMaterial &&\n\t\t\t! material.isRawShaderMaterial ||\n\t\t\tmaterial.clipping === true ) {\n\n\t\t\tmaterialProperties.numClippingPlanes = _clipping.numPlanes;\n\t\t\tmaterialProperties.numIntersection = _clipping.numIntersection;\n\t\t\tuniforms.clippingPlanes = _clipping.uniform;\n\n\t\t}\n\n\t\tmaterialProperties.fog = fog;\n\n\t\t// store the light setup it was created for\n\n\t\tmaterialProperties.needsLights = materialNeedsLights( material );\n\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\n\n\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\n\t\t\tuniforms.lightProbe.value = lights.state.probe;\n\t\t\tuniforms.directionalLights.value = lights.state.directional;\n\t\t\tuniforms.spotLights.value = lights.state.spot;\n\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\n\t\t\tuniforms.pointLights.value = lights.state.point;\n\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\n\n\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\n\t\t\tuniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\n\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\n\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t}\n\n\t\tvar progUniforms = materialProperties.program.getUniforms(),\n\t\t\tuniformsList =\n\t\t\t\tWebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\tmaterialProperties.uniformsList = uniformsList;\n\n\t}\n\n\tfunction setProgram( camera, fog, material, object ) {\n\n\t\ttextures.resetTextureUnits();\n\n\t\tvar materialProperties = properties.get( material );\n\t\tvar lights = currentRenderState.state.lights;\n\n\t\tif ( _clippingEnabled ) {\n\n\t\t\tif ( _localClippingEnabled || camera !== _currentCamera ) {\n\n\t\t\t\tvar useCache =\n\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t// (#8465, #8379)\n\t\t\t\t_clipping.setState(\n\t\t\t\t\tmaterial.clippingPlanes, material.clipIntersection, material.clipShadows,\n\t\t\t\t\tcamera, materialProperties, useCache );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.version === materialProperties.__version ) {\n\n\t\t\tif ( materialProperties.program === undefined ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( material.fog && materialProperties.fog !== fog ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( materialProperties.needsLights && ( materialProperties.lightsStateVersion !== lights.state.version ) ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t( materialProperties.numClippingPlanes !== _clipping.numPlanes ||\n\t\t\t\tmaterialProperties.numIntersection !== _clipping.numIntersection ) ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.version !== materialProperties.__version ) {\n\n\t\t\tinitMaterial( material, fog, object );\n\t\t\tmaterialProperties.__version = material.version;\n\n\t\t}\n\n\t\tvar refreshProgram = false;\n\t\tvar refreshMaterial = false;\n\t\tvar refreshLights = false;\n\n\t\tvar program = materialProperties.program,\n\t\t\tp_uniforms = program.getUniforms(),\n\t\t\tm_uniforms = materialProperties.shader.uniforms;\n\n\t\tif ( state.useProgram( program.program ) ) {\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || _currentCamera !== camera ) {\n\n\t\t\tif ( program.numMultiviewViews > 0 ) {\n\n\t\t\t\tmultiview.updateCameraProjectionMatricesUniform( camera, p_uniforms );\n\n\t\t\t} else {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\n\n\t\t\t}\n\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\t\t\tif ( _currentCamera !== camera ) {\n\n\t\t\t\t_currentCamera = camera;\n\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t}\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material.isShaderMaterial ||\n\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.envMap ) {\n\n\t\t\t\tvar uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl,\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'isOrthographic', camera.isOrthographicCamera === true );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ||\n\t\t\t\tmaterial.skinning ) {\n\n\t\t\t\tif ( program.numMultiviewViews > 0 ) {\n\n\t\t\t\t\tmultiview.updateCameraViewMatricesUniform( camera, p_uniforms );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// skinning uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone texture must go before other textures\n\t\t// not sure why, but otherwise weird things happen\n\n\t\tif ( material.skinning ) {\n\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\tvar skeleton = object.skeleton;\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tvar bones = skeleton.bones;\n\n\t\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\t\tif ( skeleton.boneTexture === undefined ) {\n\n\t\t\t\t\t\t// layout (1 matrix = 4 pixels)\n\t\t\t\t\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t\t\t\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t\t\t\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t\t\t\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t\t\t\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\n\t\t\t\t\t\tvar size = Math.sqrt( bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\t\t\t\t\tsize = _Math.ceilPowerOfTwo( size );\n\t\t\t\t\t\tsize = Math.max( size, 4 );\n\n\t\t\t\t\t\tvar boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\t\t\t\t\tboneMatrices.set( skeleton.boneMatrices ); // copy current values\n\n\t\t\t\t\t\tvar boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\n\n\t\t\t\t\t\tskeleton.boneMatrices = boneMatrices;\n\t\t\t\t\t\tskeleton.boneTexture = boneTexture;\n\t\t\t\t\t\tskeleton.boneTextureSize = size;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture, textures );\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( refreshMaterial || materialProperties.receiveShadow !== object.receiveShadow ) {\n\n\t\t\tmaterialProperties.receiveShadow = object.receiveShadow;\n\t\t\tp_uniforms.setValue( _gl, 'receiveShadow', object.receiveShadow );\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingWhitePoint', _this.toneMappingWhitePoint );\n\n\t\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t// values\n\t\t\t\t//\n\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t// the GL state when required\n\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t}\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog ) {\n\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshBasicMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshLambertMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsLambert( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshPhongMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t\tif ( material.isMeshToonMaterial ) {\n\n\t\t\t\t\trefreshUniformsToon( m_uniforms, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\trefreshUniformsPhong( m_uniforms, material );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.isMeshStandardMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t\tif ( material.isMeshPhysicalMaterial ) {\n\n\t\t\t\t\trefreshUniformsPhysical( m_uniforms, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\trefreshUniformsStandard( m_uniforms, material );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.isMeshMatcapMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t\trefreshUniformsMatcap( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsDepth( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshDistanceMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsDistance( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsNormal( m_uniforms, material );\n\n\t\t\t} else if ( material.isLineBasicMaterial ) {\n\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\n\t\t\t\tif ( material.isLineDashedMaterial ) {\n\n\t\t\t\t\trefreshUniformsDash( m_uniforms, material );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\t\trefreshUniformsPoints( m_uniforms, material );\n\n\t\t\t} else if ( material.isSpriteMaterial ) {\n\n\t\t\t\trefreshUniformsSprites( m_uniforms, material );\n\n\t\t\t} else if ( material.isShadowMaterial ) {\n\n\t\t\t\tm_uniforms.color.value.copy( material.color );\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\n\n\t\t\t}\n\n\t\t\t// RectAreaLight Texture\n\t\t\t// TODO (mrdoob): Find a nicer implementation\n\n\t\t\tif ( m_uniforms.ltc_1 !== undefined ) m_uniforms.ltc_1.value = UniformsLib.LTC_1;\n\t\t\tif ( m_uniforms.ltc_2 !== undefined ) m_uniforms.ltc_2.value = UniformsLib.LTC_2;\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\n\t\t\tif ( material.isShaderMaterial ) {\n\n\t\t\t\tmaterial.uniformsNeedUpdate = false; // #15581\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\t\t\tmaterial.uniformsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( material.isSpriteMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'center', object.center );\n\n\t\t}\n\n\t\t// common matrices\n\n\t\tif ( program.numMultiviewViews > 0 ) {\n\n\t\t\tmultiview.updateObjectMatricesUniforms( object, camera, p_uniforms );\n\n\t\t} else {\n\n\t\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\n\t\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\n\n\t\t}\n\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\treturn program;\n\n\t}\n\n\t// Uniforms (refresh uniforms objects)\n\n\tfunction refreshUniformsCommon( uniforms, material ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( material.color ) {\n\n\t\t\tuniforms.diffuse.value.copy( material.color );\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.specularMap ) {\n\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\n\t\t}\n\n\t\tif ( material.envMap ) {\n\n\t\t\tuniforms.envMap.value = material.envMap;\n\n\t\t\t// don't flip CubeTexture envMaps, flip everything else:\n\t\t\t//  WebGLRenderTargetCube will be flipped for backwards compatibility\n\t\t\t//  WebGLRenderTargetCube.texture will be flipped because it's a Texture and NOT a CubeTexture\n\t\t\t// this check must be handled differently, or removed entirely, if WebGLRenderTargetCube uses a CubeTexture in the future\n\t\t\tuniforms.flipEnvMap.value = material.envMap.isCubeTexture ? - 1 : 1;\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t\tuniforms.maxMipLevel.value = properties.get( material.envMap ).__maxMipLevel;\n\n\t\t}\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. specular map\n\t\t// 3. normal map\n\t\t// 4. bump map\n\t\t// 5. alpha map\n\t\t// 6. emissive map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.displacementMap ) {\n\n\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.roughnessMap ) {\n\n\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t} else if ( material.metalnessMap ) {\n\n\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t} else if ( material.emissiveMap ) {\n\n\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * _pixelRatio;\n\t\tuniforms.scale.value = _height * 0.5;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsSprites( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.rotation.value = material.rotation;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsFog( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value.copy( fog.color );\n\n\t\tif ( fog.isFog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLambert( uniforms, material ) {\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong( uniforms, material ) {\n\n\t\tuniforms.specular.value.copy( material.specular );\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsToon( uniforms, material ) {\n\n\t\trefreshUniformsPhong( uniforms, material );\n\n\t\tif ( material.gradientMap ) {\n\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard( uniforms, material ) {\n\n\t\tuniforms.roughness.value = material.roughness;\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif ( material.roughnessMap ) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( material.metalnessMap ) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tif ( material.envMap ) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical( uniforms, material ) {\n\n\t\trefreshUniformsStandard( uniforms, material );\n\n\t\tuniforms.reflectivity.value = material.reflectivity; // also part of uniforms common\n\n\t\tuniforms.clearcoat.value = material.clearcoat;\n\t\tuniforms.clearcoatRoughness.value = material.clearcoatRoughness;\n\t\tif ( material.sheen ) uniforms.sheen.value.copy( material.sheen );\n\n\t\tif ( material.clearcoatNormalMap ) {\n\n\t\t\tuniforms.clearcoatNormalScale.value.copy( material.clearcoatNormalScale );\n\t\t\tuniforms.clearcoatNormalMap.value = material.clearcoatNormalMap;\n\n\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\tuniforms.clearcoatNormalScale.value.negate();\n\n\t\t\t}\n\n\t\t}\n\n\t\tuniforms.transparency.value = material.transparency;\n\n\t}\n\n\tfunction refreshUniformsMatcap( uniforms, material ) {\n\n\t\tif ( material.matcap ) {\n\n\t\t\tuniforms.matcap.value = material.matcap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDepth( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDistance( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tuniforms.referencePosition.value.copy( material.referencePosition );\n\t\tuniforms.nearDistance.value = material.nearDistance;\n\t\tuniforms.farDistance.value = material.farDistance;\n\n\t}\n\n\tfunction refreshUniformsNormal( uniforms, material ) {\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = value;\n\t\tuniforms.lightProbe.needsUpdate = value;\n\n\t\tuniforms.directionalLights.needsUpdate = value;\n\t\tuniforms.pointLights.needsUpdate = value;\n\t\tuniforms.spotLights.needsUpdate = value;\n\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t}\n\n\tfunction materialNeedsLights( material ) {\n\n\t\treturn material.isMeshLambertMaterial || material.isMeshPhongMaterial ||\n\t\t\tmaterial.isMeshStandardMaterial || material.isShadowMaterial ||\n\t\t\t( material.isShaderMaterial && material.lights === true );\n\n\t}\n\n\t//\n\tthis.setFramebuffer = function ( value ) {\n\n\t\tif ( _framebuffer !== value && _currentRenderTarget === null ) _gl.bindFramebuffer( _gl.FRAMEBUFFER, value );\n\n\t\t_framebuffer = value;\n\n\t};\n\n\tthis.getActiveCubeFace = function () {\n\n\t\treturn _currentActiveCubeFace;\n\n\t};\n\n\tthis.getActiveMipmapLevel = function () {\n\n\t\treturn _currentActiveMipmapLevel;\n\n\t};\n\n\tthis.getRenderTarget = function () {\n\n\t\treturn _currentRenderTarget;\n\n\t};\n\n\tthis.setRenderTarget = function ( renderTarget, activeCubeFace, activeMipmapLevel ) {\n\n\t\t_currentRenderTarget = renderTarget;\n\t\t_currentActiveCubeFace = activeCubeFace;\n\t\t_currentActiveMipmapLevel = activeMipmapLevel;\n\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\n\n\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t}\n\n\t\tvar framebuffer = _framebuffer;\n\t\tvar isCube = false;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tvar __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\tif ( renderTarget.isWebGLRenderTargetCube ) {\n\n\t\t\t\tframebuffer = __webglFramebuffer[ activeCubeFace || 0 ];\n\t\t\t\tisCube = true;\n\n\t\t\t} else if ( renderTarget.isWebGLMultisampleRenderTarget ) {\n\n\t\t\t\tframebuffer = properties.get( renderTarget ).__webglMultisampledFramebuffer;\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = __webglFramebuffer;\n\n\t\t\t}\n\n\t\t\t_currentViewport.copy( renderTarget.viewport );\n\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t} else {\n\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t}\n\n\t\tif ( _currentFramebuffer !== framebuffer ) {\n\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t\t_currentFramebuffer = framebuffer;\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport );\n\t\tstate.scissor( _currentScissor );\n\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\tif ( isCube ) {\n\n\t\t\tvar textureProperties = properties.get( renderTarget.texture );\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + ( activeCubeFace || 0 ), textureProperties.__webglTexture, activeMipmapLevel || 0 );\n\n\t\t}\n\n\t};\n\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer, activeCubeFaceIndex ) {\n\n\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\tif ( renderTarget.isWebGLRenderTargetCube && activeCubeFaceIndex !== undefined ) {\n\n\t\t\tframebuffer = framebuffer[ activeCubeFaceIndex ];\n\n\t\t}\n\n\t\tif ( framebuffer ) {\n\n\t\t\tvar restore = false;\n\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\t\t\trestore = true;\n\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tvar texture = renderTarget.texture;\n\t\t\t\tvar textureFormat = texture.format;\n\t\t\t\tvar textureType = texture.type;\n\n\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_FORMAT ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_TYPE ) && // IE11, Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t! ( textureType === FloatType && ( capabilities.isWebGL2 || extensions.get( 'OES_texture_float' ) || extensions.get( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t! ( textureType === HalfFloatType && ( capabilities.isWebGL2 ? extensions.get( 'EXT_color_buffer_float' ) : extensions.get( 'EXT_color_buffer_half_float' ) ) ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\n\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\n\n\t\t\t\t}\n\n\t\t\t} finally {\n\n\t\t\t\tif ( restore ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.copyFramebufferToTexture = function ( position, texture, level ) {\n\n\t\tif ( level === undefined ) level = 0;\n\n\t\tvar levelScale = Math.pow( 2, - level );\n\t\tvar width = Math.floor( texture.image.width * levelScale );\n\t\tvar height = Math.floor( texture.image.height * levelScale );\n\t\tvar glFormat = utils.convert( texture.format );\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\t_gl.copyTexImage2D( _gl.TEXTURE_2D, level, glFormat, position.x, position.y, width, height, 0 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.copyTextureToTexture = function ( position, srcTexture, dstTexture, level ) {\n\n\t\tvar width = srcTexture.image.width;\n\t\tvar height = srcTexture.image.height;\n\t\tvar glFormat = utils.convert( dstTexture.format );\n\t\tvar glType = utils.convert( dstTexture.type );\n\n\t\ttextures.setTexture2D( dstTexture, 0 );\n\n\t\tif ( srcTexture.isDataTexture ) {\n\n\t\t\t_gl.texSubImage2D( _gl.TEXTURE_2D, level || 0, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data );\n\n\t\t} else {\n\n\t\t\t_gl.texSubImage2D( _gl.TEXTURE_2D, level || 0, position.x, position.y, glFormat, glType, srcTexture.image );\n\n\t\t}\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.initTexture = function ( texture ) {\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t}\n\n}\n\nexport { WebGLRenderer };\n"],"names":["EventDispatcher","Object","assign","prototype","addEventListener","type","listener","undefined","this","_listeners","listeners","indexOf","push","hasEventListener","removeEventListener","listenerArray","index","splice","dispatchEvent","event","target","array","slice","i","l","length","call","_lut","toString","_Math","DEG2RAD","Math","PI","RAD2DEG","generateUUID","d0","random","d1","d2","d3","toUpperCase","clamp","value","min","max","euclideanModulo","n","m","mapLinear","x","a1","a2","b1","b2","lerp","y","t","smoothstep","smootherstep","randInt","low","high","floor","randFloat","randFloatSpread","range","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","pow","ceil","log","LN2","floorPowerOfTwo","_colorKeywords","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","_hslA","h","s","_hslB","Color","r","g","b","set","setRGB","hue2rgb","p","q","SRGBToLinear","c","LinearToSRGB","Quaternion","z","w","_x","_y","_z","_w","isColor","copy","setHex","setStyle","setScalar","scalar","hex","setHSL","style","handleAlpha","string","parseFloat","console","warn","exec","color","name","components","parseInt","size","charAt","setColorName","clone","constructor","copyGammaToLinear","gammaFactor","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","copySRGBToLinear","copyLinearToSRGB","convertSRGBToLinear","convertLinearToSRGB","getHex","getHexString","getHSL","hue","saturation","lightness","delta","getStyle","offsetHSL","add","addColors","color1","color2","addScalar","sub","multiply","multiplyScalar","alpha","lerpHSL","equals","fromArray","offset","toArray","toJSON","NAMES","slerp","qa","qb","qm","slerpFlat","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","cos","dir","sqrSin","Number","EPSILON","sin","sqrt","len","atan2","tDir","f","defineProperties","get","_onChangeCallback","isQuaternion","quaternion","setFromEuler","euler","update","isEuler","Error","order","c1","c2","c3","s1","s2","s3","setFromAxisAngle","axis","angle","halfAngle","setFromRotationMatrix","te","elements","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","setFromUnitVectors","vFrom","vTo","dot","abs","normalize","angleTo","acos","rotateTowards","step","inverse","conjugate","v","lengthSq","multiplyQuaternions","premultiply","a","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","_onChange","callback","_vector","Vector3","_quaternion","Face3","normal","materialIndex","isVector3","vertexNormals","Array","isArray","vertexColors","setX","setY","setZ","setComponent","getComponent","addVectors","addScaledVector","subVectors","subScalar","multiplyVectors","applyEuler","error","applyQuaternion","applyAxisAngle","applyMatrix3","e","applyNormalMatrix","applyMatrix4","qx","qy","qz","qw","ix","iy","iz","iw","project","camera","matrixWorldInverse","projectionMatrix","unproject","projectionMatrixInverse","matrixWorld","transformDirection","divide","divideScalar","clampScalar","minVal","maxVal","clampLength","round","roundToZero","negate","manhattanLength","setLength","lerpVectors","v1","v2","cross","crossVectors","ax","ay","az","bx","by","bz","projectOnVector","projectOnPlane","planeNormal","reflect","denominator","theta","distanceTo","distanceToSquared","dx","dy","dz","manhattanDistanceTo","setFromSpherical","setFromSphericalCoords","radius","phi","sinPhiRadius","setFromCylindrical","setFromCylindricalCoords","setFromMatrixPosition","setFromMatrixScale","sx","setFromMatrixColumn","sy","sz","fromBufferAttribute","attribute","getX","getY","getZ","source","il","Matrix3","arguments","isMatrix3","n11","n12","n13","n21","n22","n23","n31","n32","n33","identity","me","setFromMatrix4","applyToBufferAttribute","count","setXYZ","multiplyMatrices","ae","be","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","determinant","d","getInverse","matrix","throwOnDegenerate","isMatrix4","t11","t12","t13","det","msg","detInv","transpose","tmp","getNormalMatrix","matrix4","transposeIntoArray","setUvTransform","tx","ty","rotation","cx","cy","scale","rotate","translate","_points","_box","Box3","_v0","_v1","_v2","_f0","_f1","_f2","_center","_extents","_triangleNormal","_testAxis","Infinity","satForAxes","axes","v0","extents","j","p0","p1","p2","isBox3","setFromArray","minX","minY","minZ","maxX","maxY","maxZ","setFromBufferAttribute","setFromPoints","points","makeEmpty","expandByPoint","setFromCenterAndSize","center","halfSize","setFromObject","object","expandByObject","box","isEmpty","getCenter","getSize","point","expandByVector","vector","expandByScalar","updateWorldMatrix","geometry","boundingBox","computeBoundingBox","children","containsPoint","containsBox","getParameter","intersectsBox","intersectsSphere","sphere","clampPoint","intersectsPlane","plane","constant","intersectsTriangle","triangle","distanceToPoint","getBoundingSphere","intersect","union","Sphere","optionalCenter","maxRadiusSq","empty","radiusSum","deltaLengthSq","getBoundingBox","getMaxScaleOnAxis","_m1","Matrix4","_zero","_one","Vector2","n14","n24","n34","n41","n42","n43","n44","copyPosition","extractBasis","xAxis","yAxis","zAxis","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","af","bf","ce","cf","de","df","ac","ad","bc","bd","makeRotationFromQuaternion","compose","lookAt","eye","up","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","setPosition","t14","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","makeScale","makeShear","position","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","decompose","invSX","invSY","invSZ","makePerspective","left","right","top","bottom","near","far","makeOrthographic","width","height","isVector2","rotateAround","_matrix","Euler","_order","DefaultOrder","Layers","mask","RotationOrders","asin","setFromQuaternion","setFromVector3","reorder","newOrder","toVector3","optionalResult","channel","enable","enableAll","toggle","disable","disableAll","test","layers","CullFaceNone","CullFaceBack","CullFaceFront","PCFShadowMap","PCFSoftShadowMap","VSMShadowMap","FrontSide","BackSide","DoubleSide","NoColors","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","Uncharted2ToneMapping","CineonToneMapping","ACESFilmicToneMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipmapNearestFilter","NearestMipmapLinearFilter","LinearFilter","LinearMipmapNearestFilter","LinearMipmapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","UnsignedInt248Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","DepthFormat","DepthStencilFormat","RedFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","RGBA_ASTC_4x4_Format","RGBA_ASTC_5x4_Format","RGBA_ASTC_5x5_Format","RGBA_ASTC_6x5_Format","RGBA_ASTC_6x6_Format","RGBA_ASTC_8x5_Format","RGBA_ASTC_8x6_Format","RGBA_ASTC_8x8_Format","RGBA_ASTC_10x5_Format","RGBA_ASTC_10x6_Format","RGBA_ASTC_10x8_Format","RGBA_ASTC_10x10_Format","RGBA_ASTC_12x10_Format","RGBA_ASTC_12x12_Format","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","LogLuvEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","BasicDepthPacking","RGBADepthPacking","TangentSpaceNormalMap","ObjectSpaceNormalMap","KeepStencilOp","AlwaysStencilFunc","StaticDrawUsage","_object3DId","_q1","_target","_position","_scale","_xAxis","_yAxis","_zAxis","_addedEvent","_removedEvent","Object3D","defineProperty","uuid","parent","DefaultUp","configurable","enumerable","modelViewMatrix","normalMatrix","matrixAutoUpdate","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","frustumCulled","renderOrder","userData","create","isObject3D","onBeforeRender","onAfterRender","applyMatrix","updateMatrix","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","rotateOnWorldAxis","rotateX","rotateY","rotateZ","translateOnAxis","distance","translateX","translateY","translateZ","localToWorld","worldToLocal","isCamera","isLight","remove","attach","getObjectById","id","getObjectByProperty","getObjectByName","getWorldPosition","updateMatrixWorld","getWorldQuaternion","getWorldScale","getWorldDirection","raycast","traverse","traverseVisible","traverseAncestors","force","updateParents","updateChildren","meta","isRootObject","output","geometries","materials","textures","images","shapes","metadata","version","generator","serialize","library","element","JSON","stringify","isMesh","drawMode","isInstancedMesh","instanceMatrix","isLine","isPoints","parameters","shape","material","uuids","extractFromCache","cache","values","key","data","recursive","parse","child","_geometryId","_obj","_offset","Geometry","vertices","colors","faces","faceVertexUvs","morphTargets","morphNormals","skinWeights","skinIndices","lineDistances","boundingSphere","elementsNeedUpdate","verticesNeedUpdate","uvsNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","lineDistancesNeedUpdate","groupsNeedUpdate","Vector4","BufferAttribute","itemSize","normalized","TypeError","usage","updateRange","Int8BufferAttribute","Int8Array","Uint8BufferAttribute","Uint8Array","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Int16Array","Uint16BufferAttribute","Uint16Array","Int32BufferAttribute","Int32Array","Uint32BufferAttribute","Uint32Array","Float32BufferAttribute","Float32Array","Float64BufferAttribute","Float64Array","DirectGeometry","normals","uvs","uvs2","groups","arrayMax","isGeometry","face","jl","computeBoundingSphere","fromBufferGeometry","scope","indices","attributes","positions","uv","uv2","addFace","group","start","computeFaceNormals","cb","ab","fl","vA","vB","vC","computeVertexNormals","areaWeighted","vl","computeFlatVertexNormals","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","merge","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","colors1","colors2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","faceVertexUvs2","uvsCopy","k","kl","mergeMesh","mesh","mergeVertices","verticesMap","unique","changes","precision","faceIndicesToRemove","idx","diff","sortFacesByMaterialIndex","_id","sort","newUvs1","newUvs2","uvs1","vertex","normalsHash","colorsHash","uvsHash","hasFaceVertexUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","enabled","hash","morphTarget","morphNormal","srcVertexNormal","destVertexNormal","dispose","isVector4","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","getW","isBufferAttribute","onUploadCallback","setUsage","copyAt","index1","index2","copyArray","copyColorsArray","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","setXY","setXYZW","onUpload","computeGroups","fromGeometry","morphTargetsPosition","hasFaceVertexUv2","morphTargetsLength","morphTargetsNormal","morphNormalsLength","hasSkinIndices","hasSkinWeights","vertexUvs","_bufferGeometryId","_boxMorphTargets","BufferGeometry","morphAttributes","morphTargetsRelative","drawRange","isBufferGeometry","getIndex","setIndex","getAttribute","setAttribute","deleteAttribute","addGroup","clearGroups","setDrawRange","needsUpdate","tangent","updateFromObject","direct","__directGeometry","lineDistance","fromDirectGeometry","morphAttributesPosition","morphAttribute","isNaN","pA","pB","pC","normalizeNormals","attributeArray1","attribute2","attributeArray2","attributeOffset","toNonIndexed","convertBufferAttribute","array2","geometry2","newAttribute","morphArray","keys","attributeData","hasMorphAttributes","attributeArray","BoxBufferGeometry","[object Object]","depth","widthSegments","heightSegments","depthSegments","super","numberOfVertices","groupStart","buildPlane","u","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","Light","intensity","groundColor","decay","penumbra","shadow","_vector1","_vector2","_normalMatrix","Plane","isPlane","setComponents","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","intersectLine","line","direction","intersectsLine","startSign","endSign","end","coplanarPoint","optionalNormalMatrix","referencePoint","_sphere","Frustum","p3","p4","p5","planes","LightShadow","bias","mapSize","map","mapPass","_frustum","_frameExtents","_viewportCount","_viewports","Camera","OrthographicCamera","zoom","view","updateProjectionMatrix","DirectionalLightShadow","DirectionalLight","frustum","setFromMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","intersectsObject","intersectsSprite","sprite","negRadius","_projScreenMatrix","_lightPositionWorld","_lookTarget","getViewportCount","getFrustum","updateMatrices","light","shadowCamera","shadowMatrix","projScreenMatrix","lookTarget","lightPositionWorld","getViewport","viewportIndex","getFrameExtents","isOrthographicCamera","setViewOffset","fullWidth","fullHeight","offsetX","offsetY","clearViewOffset","zoomW","zoomH","scaleW","scaleH","isDirectionalLightShadow","isDirectionalLight","_segCenter","_segDir","_diff","_edge1","_edge2","_normal","Ray","origin","ray","at","recast","closestPointToPoint","directionDistance","distanceSqToPoint","distanceSqToSegment","optionalPointOnRay","optionalPointOnSegment","s0","sqrDist","extDet","segExtent","a01","b0","invDet","intersectSphere","tca","radius2","thc","t0","t1","distanceToPlane","intersectPlane","distToPoint","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","backfaceCulling","sign","DdN","DdQxE2","DdE1xQ","QdN","_v3","_vab","_vac","_vbc","_vap","_vbp","_vcp","Triangle","getNormal","targetLengthSq","getBarycoord","dot00","dot01","dot02","dot11","dot12","denom","invDenom","getUV","uv1","uv3","isFrontFacing","setFromPointsAndIndices","i0","i1","i2","getArea","getMidpoint","getPlane","d4","vc","d5","d6","vb","va","materialId","Material","fog","blending","side","flatShading","vertexTangents","opacity","transparent","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","depthWrite","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","stencilWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaTest","premultipliedAlpha","toneMapped","MeshBasicMaterial","lightMap","lightMapIntensity","aoMap","aoMapIntensity","specularMap","alphaMap","envMap","combine","reflectivity","refractionRatio","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","skinning","setValues","isMaterial","onBeforeCompile","newValue","currentValue","isRoot","roughness","metalness","sheen","emissive","emissiveIntensity","specular","shininess","clearcoat","clearcoatRoughness","clearcoatNormalMap","isTexture","clearcoatNormalScale","matcap","bumpMap","bumpScale","normalMap","normalMapType","normalScale","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","emissiveMap","envMapIntensity","gradientMap","sizeAttenuation","linewidth","dashSize","gapSize","srcPlanes","dstPlanes","isMeshBasicMaterial","_canvas","_inverseMatrix","_ray","_vA","_vB","_vC","_tempA","_tempB","_tempC","_morphA","_morphB","_morphC","_uvA","_uvB","_uvC","_intersectionPoint","_intersectionPointWorld","Mesh","updateMorphTargets","checkIntersection","raycaster","checkBufferGeometryIntersection","morphPosition","morphInfluences","morphTargetInfluences","influence","intersection","MeshNormalMaterial","PerspectiveCamera","fov","aspect","focus","filmGauge","filmOffset","Scene","background","overrideMaterial","autoUpdate","__THREE_DEVTOOLS__","CustomEvent","detail","setDrawMode","morphTargetDictionary","ml","String","intersects","groupMaterial","faceIndex","fvA","fvB","fvC","isMultiMaterial","faceMaterial","uvs_f","isMeshNormalMaterial","isPerspectiveCamera","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","getEffectiveFOV","getFilmWidth","skew","isScene","ImageUtils","image","canvas","HTMLCanvasElement","src","document","createElementNS","context","getContext","ImageData","putImageData","drawImage","toDataURL","textureId","Texture","mapping","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","DEFAULT_IMAGE","mipmaps","DEFAULT_MAPPING","repeat","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","onUpdate","DataTexture","wrap","url","transformUv","isDataTexture","ShaderChunk","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_common_pars_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_physical_pars_fragment","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars_begin","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normalmap_pars_fragment","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","clearcoat_normalmap_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","background_frag","background_vert","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshmatcap_frag","meshmatcap_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","sprite_frag","sprite_vert","cloneUniforms","property","mergeUniforms","uniforms","merged","UniformsLib","diffuse","uvTransform","specularmap","envmap","flipEnvMap","maxMipLevel","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","gradientmap","fogDensity","fogNear","fogFar","fogColor","lights","ambientLightColor","lightProbe","directionalLights","properties","shadowBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","coneCos","penumbraCos","spotShadowMap","spotShadowMatrix","pointLights","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","rectAreaLights","ShaderLib","basic","vertexShader","fragmentShader","lambert","phong","standard","dashed","totalSize","t2D","cube","tCube","tFlip","equirect","tEquirect","distanceRGBA","referencePosition","nearDistance","farDistance","WebGLAnimation","isAnimating","animationLoop","onAnimationFrame","time","frame","requestAnimationFrame","stop","setAnimationLoop","setContext","WebGLAttributes","gl","buffers","WeakMap","isInterleavedBufferAttribute","deleteBuffer","buffer","delete","bufferType","createBuffer","bindBuffer","bufferData","FLOAT","UNSIGNED_SHORT","SHORT","UNSIGNED_INT","INT","BYTE","UNSIGNED_BYTE","bytesPerElement","BYTES_PER_ELEMENT","bufferSubData","subarray","updateBuffer","PlaneGeometry","PlaneBufferGeometry","width_half","height_half","segment_width","segment_height","physical","transparency","ShaderMaterial","defines","default_vertex","default_fragment","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","WebGLBackground","renderer","state","objects","planeMesh","boxMesh","clearColor","clearAlpha","currentBackground","currentBackgroundVersion","setClear","getClearColor","setClearColor","getClearAlpha","setClearAlpha","render","renderList","scene","forceClear","vr","session","getSession","environmentBlendMode","autoClear","clear","autoClearColor","autoClearDepth","autoClearStencil","isCubeTexture","isWebGLRenderTargetCube","texture","unshift","WebGLBufferRenderer","info","capabilities","mode","isWebGL2","setMode","drawArrays","renderInstances","primcount","extension","methodName","WebGLCapabilities","maxAnisotropy","getMaxPrecision","getShaderPrecisionFormat","VERTEX_SHADER","HIGH_FLOAT","FRAGMENT_SHADER","MEDIUM_FLOAT","WebGL2RenderingContext","WebGL2ComputeRenderingContext","maxPrecision","logarithmicDepthBuffer","maxTextures","MAX_TEXTURE_IMAGE_UNITS","maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","maxTextureSize","MAX_TEXTURE_SIZE","maxCubemapSize","MAX_CUBE_MAP_TEXTURE_SIZE","maxAttributes","MAX_VERTEX_ATTRIBS","maxVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","maxVaryings","MAX_VARYING_VECTORS","maxFragmentUniforms","MAX_FRAGMENT_UNIFORM_VECTORS","vertexTextures","floatFragmentTextures","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","floatVertexTextures","maxSamples","MAX_SAMPLES","WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","uniform","resetGlobalState","numPlanes","numIntersection","projectPlanes","skipTransform","nPlanes","dstArray","flatSize","viewMatrix","i4","init","enableLocalClipping","beginShadows","endShadows","setState","fromCache","nGlobal","lGlobal","clippingState","WebGLExtensions","getExtension","WebGLGeometries","wireframeAttributes","onGeometryDispose","buffergeometry","memory","updateWireframeAttribute","geometryIndex","geometryPosition","ELEMENT_ARRAY_BUFFER","previousAttribute","_bufferGeometry","geometryAttributes","ARRAY_BUFFER","getWireframeAttribute","currentAttribute","WebGLIndexedBufferRenderer","drawElements","WebGLInfo","calls","triangles","lines","programs","autoReset","reset","instanceCount","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","LINES","LINE_STRIP","LINE_LOOP","POINTS","absNumericalSort","WebGLMorphtargets","influencesList","program","objectInfluences","influences","morphInfluencesSum","morphBaseInfluence","getUniforms","setValue","WebGLObjects","updateList","CubeTexture","DataTexture2DArray","wrapR","DataTexture3D","isShaderMaterial","isDataTexture2DArray","isDataTexture3D","emptyTexture","emptyTexture2dArray","emptyTexture3d","emptyCubeTexture","arrayCacheF32","arrayCacheI32","mat4array","mat3array","mat2array","flatten","nBlocks","blockSize","firstElem","arraysEqual","allocTexUnits","allocateTextureUnit","setValueV1f","uniform1f","addr","setValueV2f","uniform2f","uniform2fv","setValueV3f","uniform3f","uniform3fv","setValueV4f","uniform4f","uniform4fv","setValueM2","uniformMatrix2fv","setValueM3","uniformMatrix3fv","setValueM4","uniformMatrix4fv","setValueT1","unit","uniform1i","safeSetTexture2D","setValueT2DArray1","setTexture2DArray","setValueT3D1","setTexture3D","setValueT6","safeSetTextureCube","setValueV1i","setValueV2i","uniform2iv","setValueV3i","uniform3iv","setValueV4i","uniform4iv","setValueV1fArray","uniform1fv","setValueV1iArray","uniform1iv","setValueV2iArray","setValueV3iArray","setValueV4iArray","setValueV2fArray","setValueV3fArray","setValueV4fArray","setValueM2Array","setValueM3Array","setValueM4Array","setValueT1Array","units","setValueT6Array","SingleUniform","activeInfo","getSingularSetter","PureArrayUniform","getPureArraySetter","StructuredUniform","seq","updateCache","RePathPart","addUniform","container","uniformObject","parseUniform","path","pathLength","lastIndex","match","matchEnd","idIsIndex","subscript","next","WebGLUniforms","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","WebGLShader","shader","createShader","shaderSource","compileShader","setOptional","upload","seqWithValue","programIdCount","getEncodingComponents","getShaderErrors","status","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","trim","split","join","addLineNumbers","getShaderSource","getTexelDecodingFunction","functionName","getToneMappingFunction","toneMapping","toneMappingName","filterEmptyLine","replaceLightNums","replace","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","numDirLightShadows","numSpotLightShadows","numPointLightShadows","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","includePattern","resolveIncludes","includeReplacer","include","loopPattern","unrollLoops","loopReplacer","snippet","generatePrecision","precisionstring","WebGLProgram","cacheKey","prefixVertex","prefixFragment","shadowMapTypeDefine","shadowMapType","generateShadowMapTypeDefine","envMapTypeDefine","envMapMode","generateEnvMapTypeDefine","envMapModeDefine","generateEnvMapModeDefine","envMapBlendingDefine","generateEnvMapBlendingDefine","gammaFactorDefine","customExtensions","rendererExtensions","envMapCubeUV","tangentSpaceNormalMap","filter","generateExtensions","customDefines","chunks","generateDefines","createProgram","numMultiviewViews","isRawShaderMaterial","instancing","supportsVertexTextures","maxBones","useFog","fogExp2","objectSpaceNormalMap","uvsVertexOnly","useVertexTexture","doubleSided","flipSided","shadowMapEnabled","physicallyCorrectLights","outputEncoding","mapEncoding","matcapEncoding","envMapEncoding","emissiveMapEncoding","depthPacking","isGLSL3ShaderMaterial","versionRegex","cachedUniforms","cachedAttributes","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","debug","checkShaderErrors","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","LINK_STATUS","vertexErrors","fragmentErrors","getError","VALIDATE_STATUS","diagnostics","prefix","deleteShader","getAttributes","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","fetchAttributeLocations","destroy","deleteProgram","usedTimes","WebGLPrograms","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","MeshMatcapMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","SpriteMaterial","parameterNames","getTextureEncodingFromMap","gammaOverrideLinear","isWebGLRenderTarget","getParameters","shadows","nClipPlanes","nClipIntersection","shaderID","isSkinnedMesh","bones","skeleton","nVertexUniforms","nVertexMatrices","allocateBones","currentRenderTarget","getRenderTarget","isWebGLMultiviewRenderTarget","numViews","gammaOutput","gammaInput","isFogExp2","maxMorphTargets","maxMorphNormals","directional","spot","rectArea","hemi","shadowMap","getProgramCacheKey","acquireProgram","pl","preexistingProgram","releaseProgram","pop","WebGLProperties","painterSortStable","groupOrder","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","defaultProgram","getNextRenderItem","renderItem","WebGLRenderLists","lists","onSceneDispose","list","cameras","UniformsCache","halfWidth","halfHeight","nextVersion","shadowCastingLightsFirst","lightA","lightB","WebGLLights","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","numDirectionalShadows","numPointShadows","numSpotShadows","ambient","probe","vector3","matrix42","setup","isAmbientLight","isLightProbe","sh","coefficients","isSpotLight","isRectAreaLight","isPointLight","isHemisphereLight","WebGLRenderState","lightsArray","shadowsArray","setupLights","pushLight","pushShadow","shadowLight","WebGLRenderStates","renderStates","renderState","has","WebGLRenderTarget","options","scissor","scissorTest","viewport","depthBuffer","stencilBuffer","depthTexture","setSize","isMeshDepthMaterial","isMeshDistanceMaterial","WebGLShadowMap","_renderer","_objects","_shadowMapSize","_viewportSize","_viewport","_depthMaterials","_distanceMaterials","_materialCache","0","1","2","shadowMaterialVertical","SAMPLE_RATE","HALF_SAMPLE_RATE","shadow_pass","resolution","vsm_vert","vsm_frag","shadowMaterialHorizonal","HORIZONAL_PASS","fullScreenTri","fullScreenMesh","VSMPass","setRenderTarget","renderBufferDirect","getDepthMaterialVariant","useMorphing","useSkinning","useInstancing","getDistanceMaterialVariant","getDepthMaterial","result","getMaterialVariant","customMaterial","customDepthMaterial","customDistanceMaterial","keyA","keyB","materialsForVariant","cachedMaterial","renderObject","depthMaterial","activeCubeFace","getActiveCubeFace","activeMipmapLevel","getActiveMipmapLevel","_state","setBlending","setTest","setScissorTest","shadowFrameExtents","isPointLightShadow","pars","viewportCount","vp","WebGLState","colorBuffer","locked","currentColorMask","currentColorClear","setMask","colorMask","setLocked","lock","currentDepthMask","currentDepthFunc","currentDepthClear","DEPTH_TEST","depthMask","setFunc","NEVER","ALWAYS","LESS","LEQUAL","EQUAL","GEQUAL","GREATER","NOTEQUAL","clearDepth","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","STENCIL_TEST","stencilMask","setOp","stencilOp","stencil","clearStencil","maxVertexAttributes","newAttributes","enabledAttributes","attributeDivisors","enabledCapabilities","currentProgram","currentBlendingEnabled","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","MAX_COMBINED_TEXTURE_IMAGE_UNITS","lineWidthAvailable","glVersion","VERSION","currentTextureSlot","currentBoundTextures","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","texImage2D","RGBA","emptyTextures","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","TEXTURE_2D","TEXTURE_CUBE_MAP","TEXTURE_CUBE_MAP_POSITIVE_X","setFlipSided","setCullFace","CULL_FACE","equationToGL","FUNC_ADD","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","MIN","MAX","MIN_EXT","MAX_EXT","factorToGL","ZERO","ONE","SRC_COLOR","SRC_ALPHA","SRC_ALPHA_SATURATE","DST_COLOR","DST_ALPHA","ONE_MINUS_SRC_COLOR","ONE_MINUS_SRC_ALPHA","ONE_MINUS_DST_COLOR","ONE_MINUS_DST_ALPHA","BLEND","blendEquationSeparate","blendFuncSeparate","blendFunc","frontFace","CW","CCW","cullFace","BACK","FRONT","FRONT_AND_BACK","setPolygonOffset","factor","POLYGON_OFFSET_FILL","activeTexture","webglSlot","TEXTURE0","initAttributes","enableAttribute","disableUnusedAttributes","disableVertexAttribArray","useProgram","setMaterial","frontFaceCW","setLineWidth","lineWidth","SCISSOR_TEST","webglType","webglTexture","boundTexture","unbindTexture","compressedTexImage2D","apply","texImage3D","WebGLTextures","_gl","utils","_videoTextures","useOffscreenCanvas","OffscreenCanvas","createCanvas","resizeImage","needsPowerOfTwo","needsNewCanvas","maxSize","HTMLImageElement","ImageBitmap","textureNeedsGenerateMipmaps","supportsMips","generateMipmap","__maxMipLevel","LOG2E","getInternalFormat","glFormat","glType","internalFormat","RED","R32F","HALF_FLOAT","R16F","R8","RGB","RGB32F","RGB16F","RGB8","RGBA32F","RGBA16F","RGBA8","filterFallback","LINEAR","onTextureDispose","textureProperties","__webglInit","deleteTexture","__webglTexture","deallocateTexture","isVideoTexture","onRenderTargetDispose","renderTarget","renderTargetProperties","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","__webglColorTexture","__webglDepthStencilTexture","__webglViewFramebuffers","deallocateRenderTarget","textureUnits","setTexture2D","slot","updateVideoTexture","__version","complete","uploadTexture","setTextureCube","initTexture","pixelStorei","UNPACK_FLIP_Y_WEBGL","isCompressed","isCompressedTexture","cubeImage","convert","glInternalFormat","setTextureParameters","mipmap","mipmapImage","setTextureCubeDynamic","wrappingToGL","REPEAT","CLAMP_TO_EDGE","MIRRORED_REPEAT","filterToGL","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","textureType","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXTURE_3D","TEXTURE_2D_ARRAY","TEXTURE_WRAP_R","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","textureNeedsPowerOfTwo","isDepthTexture","DEPTH_COMPONENT","DEPTH_COMPONENT32F","DEPTH_COMPONENT16","DEPTH_STENCIL","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","isMultisample","bindRenderbuffer","RENDERBUFFER","samples","getRenderTargetSamples","renderbufferStorageMultisample","renderbufferStorage","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH24_STENCIL8","DEPTH_STENCIL_ATTACHMENT","setupDepthRenderbuffer","isCube","webglDepthTexture","setupDepthTexture","createRenderbuffer","isWebGLMultisampleRenderTarget","warnedTexture2D","warnedTextureCube","textureUnit","resetTextureUnits","setupRenderTarget","isMultiview","createFramebuffer","__webglMultisampledFramebuffer","__webglColorRenderbuffer","COLOR_ATTACHMENT0","__webglDepthRenderbuffer","ext","colorTexture","framebufferTextureMultiviewOVR","depthStencilTexture","UNSIGNED_INT_24_8","viewFramebuffers","framebufferTextureLayer","updateRenderTargetMipmap","updateMultisampleRenderTarget","READ_FRAMEBUFFER","DRAW_FRAMEBUFFER","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","blitFramebuffer","WebGLUtils","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","HALF_FLOAT_OES","ALPHA","LUMINANCE","LUMINANCE_ALPHA","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","UNSIGNED_INT_24_8_WEBGL","WebGLMultiviewRenderTarget","WebGLMultiview","mat3","mat4","cameraArray","renderSize","available","DEFAULT_NUMVIEWS","maxNumViews","getCameraArray","isArrayCamera","isAvailable","getContextAttributes","antialias","MAX_VIEWS_OVR","attachCamera","isMultiviewCompatible","getDrawingBufferSize","setNumViews","resizeRenderTarget","detachCamera","srcRenderTarget","srcFramebuffers","viewWidth","viewHeight","flush","updateCameraProjectionMatricesUniform","updateCameraViewMatricesUniform","updateObjectMatricesUniforms","Group","ArrayCamera","isGroup","cameraLPos","cameraRPos","setProjectionFromUnion","cameraL","cameraR","ipd","projL","projR","topFov","bottomFov","leftFov","rightFov","zOffset","xOffset","near2","far2","left2","right2","top2","bottom2","WebVRManager","renderWidth","renderHeight","device","frameData","controllers","standingMatrix","standingMatrixInverse","framebufferScaleFactor","referenceSpaceType","window","VRFrameData","onVRDisplayPresentChange","tempQuaternion","tempPosition","tempCamera","cameraVR","isPresenting","currentPixelRatio","currentSize","eyeParameters","getEyeParameters","getPixelRatio","setDrawingBufferSize","animation","triggers","grips","findGamepad","gamepads","navigator","getGamepads","gamepad","startsWith","hand","updateViewportFromBounds","bounds","getController","controller","getDevice","setDevice","setFramebufferScaleFactor","setReferenceSpaceType","getCamera","userHeight","depthNear","depthFar","getFrameData","stageParameters","sittingToStandingTransform","pose","orientation","leftViewMatrix","rightViewMatrix","leftProjectionMatrix","rightProjectionMatrix","getLayers","layer","leftBounds","rightBounds","hasPosition","buttonId","buttons","pressed","updateControllers","getStandingMatrix","submitFrame","setFrameOfReferenceType","WebXRManager","referenceSpace","sortedInputSources","onSessionEvent","inputSource","onSessionEnd","setFramebuffer","onRequestReferenceSpace","updateInputSources","findInputSource","inputSources","handedness","updateCamera","setSession","updateRenderState","baseLayer","XRWebGLLayer","requestReferenceSpace","then","onAnimationFrameCallback","getViewerPose","views","transform","inputPose","getPose","targetRaySpace","THREE","WebGLRenderer","_context","_alpha","_depth","_stencil","_antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","_failIfMajorPerformanceCaveat","failIfMajorPerformanceCaveat","currentRenderList","currentRenderState","domElement","sortObjects","toneMappingExposure","toneMappingWhitePoint","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","_this","_isContextLost","_framebuffer","_currentActiveCubeFace","_currentActiveMipmapLevel","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentGeometryProgram","_currentCamera","_currentArrayCamera","_currentViewport","_currentScissor","_currentScissorTest","_width","_height","_pixelRatio","_scissor","_scissorTest","_clipping","_clippingEnabled","_localClippingEnabled","_vector3","getTargetPixelRatio","contextAttributes","xrCompatible","onContextLost","onContextRestore","rangeMin","rangeMax","message","initGLContext","multiview","preventDefault","onMaterialDispose","releaseMaterialProgramReference","deallocateMaterial","programInfo","forceContextLoss","loseContext","forceContextRestore","restoreContext","setPixelRatio","updateStyle","setViewport","pixelRatio","getCurrentViewport","getScissor","setScissor","getScissorTest","boolean","bits","renderBufferImmediate","hasPositions","hasNormals","hasUvs","hasColors","programAttributes","positionArray","DYNAMIC_DRAW","vertexAttribPointer","normalArray","uvArray","colorArray","setProgram","updateBuffers","rangeFactor","isInstancedBufferGeometry","materialDefaultAttributeValues","programAttribute","geometryAttribute","stride","isInstancedInterleavedBuffer","maxInstancedCount","isInstancedBufferAttribute","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","setupVertexAttributes","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","isLineSegments","isLineLoop","isSprite","compile","initMaterial","projectObject","isLOD","isImmediateRenderObject","renderObjects","camera2","renderObjectImmediate","materialProperties","lightsStateVersion","programCacheKey","programChange","numSupportedMorphTargets","numSupportedMorphNormals","needsLights","isMeshLambertMaterial","isMeshPhongMaterial","isMeshStandardMaterial","isShadowMaterial","materialNeedsLights","progUniforms","uniformsList","useCache","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","boneTexture","boneMatrices","boneTextureSize","isFog","density","refreshUniformsFog","refreshUniformsCommon","refreshUniformsLambert","isMeshToonMaterial","refreshUniformsPhong","refreshUniformsToon","isMeshPhysicalMaterial","refreshUniformsStandard","refreshUniformsPhysical","isMeshMatcapMaterial","refreshUniformsMatcap","refreshUniformsDepth","refreshUniformsDistance","refreshUniformsNormal","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","uvScaleMap","refreshUniformsPoints","isSpriteMaterial","refreshUniformsSprites","ltc_1","LTC_1","ltc_2","LTC_2","opaqueObjects","transparentObjects","readRenderTargetPixels","activeCubeFaceIndex","restore","textureFormat","IMPLEMENTATION_COLOR_READ_FORMAT","IMPLEMENTATION_COLOR_READ_TYPE","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readPixels","copyFramebufferToTexture","level","levelScale","copyTexImage2D","copyTextureToTexture","srcTexture","dstTexture","texSubImage2D"],"mappings":"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nB,GAAYhkD,UAAYF,OAAOm5B,OAAQ6pB,GAAQ9iD,WAC/CgkD,GAAYhkD,UAAU6Q,YAAcmzC,GAEpCA,GAAYhkD,UAAUokD,eAAgB,MCkG3BC,GAAc,CACxBC,kBC9HwB,yFD+HxBC,uBE/HwB,qEFgIxBC,mBGhIwB,iFHiIxBC,eIjIwB,whBJkIxBC,oBKlIwB,gGLmIxBC,aMnIwB,2CNoIxBC,mBOpIwB,yHPqIxBC,MQrIwB,4tYRsIxBC,sBStIwB,83CTuIxBC,yBUvIwB,qlBVwIxBC,8BWxIwB,4NXyIxBC,4BYzIwB,+IZ0IxBC,uBa1IwB,qJb2IxBC,ec3IwB,kEd4IxBC,oBe5IwB,2Df6IxBC,kBgB7IwB,2DhB8IxBC,aiB9IwB,8DjB+IxBC,OkB/IwB,2nGlBgJxBC,4BmBhJwB,y/InBiJxBC,qBoBjJwB,6cpBkJxBC,4BqBlJwB,0JrBmJxBC,uBsBnJwB,2KtBoJxBC,qBuBpJwB,yNvBqJxBC,0BwBrJwB,2ExBsJxBC,mByBtJwB,0DzBuJxBC,wB0BvJwB,wyG1BwJxBC,gB2BxJwB,y7D3ByJxBC,4B4BzJwB,iP5B0JxBC,qB6B1JwB,2U7B2JxBC,mB8B3JwB,mT9B4JxBC,8B+B5JwB,s0I/B6JxBC,cgC7JwB,mrBhC8JxBC,WiC9JwB,8DjC+JxBC,gBkC/JwB,4DlCgKxBC,amChKwB,0SnCiKxBC,kBoCjKwB,4NpCkKxBC,0BqClKwB,ycrCmKxBC,kBsCnKwB,8MtCoKxBC,uBuCpKwB,yGvCqKxBC,sBwCrKwB,okFxCsKxBC,kByCtKwB,23KzCuKxBC,sB0CvKwB,0M1CwKxBC,2B2CxKwB,i/C3CyKxBC,yB4CzKwB,wrB5C0KxBC,8B6C1KwB,2qM7C2KxBC,sB8C3KwB,w6H9C4KxBC,qB+C5KwB,2+B/C6KxBC,oBgD7KwB,yRhD8KxBC,qBiD9KwB,4SjD+KxBC,0BkD/KwB,iLlDgLxBC,wBmDhLwB,sMnDiLxBC,mBoDjLwB,qZpDkLxBC,aqDlLwB,8JrDmLxBC,kBsDnLwB,2DtDoLxBC,sBuDpLwB,sWvDqLxBC,2BwDrLwB,2NxDsLxBC,sByDtLwB,8QzDuLxBC,2B0DvLwB,6E1DwLxBC,mB2DxLwB,wrB3DyLxBC,wB4DzLwB,wO5D0LxBC,mB6D1LwB,q9B7D2LxBC,sB8D3LwB,8iC9D4LxBC,qB+D5LwB,2vB/D6LxBC,wBgE7LwB,qrChE8LxBC,gCiE9LwB,6EjE+LxBC,+BkE/LwB,sXlEgMxBC,kCmEhMwB,gInEiMxBC,QoEjMwB,yvDpEkMxBC,6BqElMwB,8MrEmMxBC,esEnMwB,kOtEoMxBC,mBuEpMwB,wFvEqMxBC,wBwErMwB,2mBxEsMxBC,sByEtMwB,8QzEuMxBC,2B0EvMwB,6E1EwMxBC,wB2ExMwB,ktU3EyMxBC,sB4EzMwB,srB5E0MxBC,iB6E1MwB,syB7E2MxBC,yB8E3MwB,+hD9E4MxBC,gB+E5MwB,0O/E6MxBC,qBgF7MwB,wjChF8MxBC,gBiF9MwB,2YjF+MxBC,kBkF/MwB,selFgNxBC,qBmFhNwB,wMnFiNxBC,0BoFjNwB,2EpFkNxBC,qBqFlNwB,qGrFmNxBC,0BsFnNwB,4jDtFoNxBC,iBuFpNwB,iGvFqNxBC,ewFrNwB,0JxFsNxBC,UyFtNwB,6EzFuNxBC,kB0FvNwB,4F1FwNxBC,gB2FxNwB,mH3FyNxBC,W4FzNwB,qF5F0NxBC,gB6F1NwB,kS7F4NxBC,gB8F5NwB,4O9F6NxBC,gB+F7NwB,0K/F8NxBC,UgG9NwB,8XhG+NxBC,UiG/NwB,wQjGgOxBC,WkGhOwB,2xBlGiOxBC,WmGjOwB,srBnGkOxBC,kBoGlOwB,wuBpGmOxBC,kBqGnOwB,4uBrGoOxBC,csGpOwB,mgBtGqOxBC,cuGrOwB,6MvGsOxBC,gBwGtOwB,o1BxGuOxBC,gByGvOwB,oiBzGwOxBC,e0GxOwB,+lD1GyOxBC,e2GzOwB,y3B3G0OxBC,iB4G1OwB,u9E5G2OxBC,iB6G3OwB,ipC7G4OxBC,gB8G5OwB,w/C9G6OxBC,gB+G7OwB,6/B/G8OxBC,egH9OwB,kmEhH+OxBC,eiH/OwB,4vCjHgPxBC,kBkHhPwB,6jGlHiPxBC,kBmHjPwB,k8CnHkPxBC,YoHlPwB,qwBpHmPxBC,YqHnPwB,44CrHoPxBC,YsHpPwB,0wBtHqPxBC,YuHrPwB,6sBvHsPxBC,YwHtPwB,6WxHuPxBC,YyHvPwB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"}