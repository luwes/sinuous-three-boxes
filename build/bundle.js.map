{"version":3,"file":"bundle.js","sources":["../../node_modules/sinuous/module/observable.js","../../node_modules/sinuous/module/sinuous.js","../../src/sinuous-three.js","../../src/main.js"],"sourcesContent":["const n=[];let t,o;function r(){return!!t}function u(n){const o=t,r=()=>{};t=r,a(r);const u=n(()=>{S(r),t=void 0});return t=o,u}function c(n){const o=t;t=void 0;const r=n();return t=o,r}function i(t){o=[];const r=t();let u=o;return o=void 0,u.forEach(t=>{if(t.t!==n){const o=t.t;t.t=n,t(o)}}),r}function e(r){function u(c){if(0===arguments.length)return t&&!u.o.has(t)&&(u.o.add(t),t.u.push(u)),r;if(o)return u.t===n&&o.push(u),u.t=c,c;r=c;const i=t;return t=void 0,u.i=new Set(u.o),u.i.forEach(n=>n.s=!1),u.i.forEach(n=>{n.s||n()}),t=i,r}return(u.$o=!0,u.o=new Set,u.t=n,u)}function f(n,o){function r(){const u=t;t&&t.__c.push(r);const c=r.__c;return S(r),r.s=!0,t=r,o=n(o),c.forEach(n=>{-1===r.__c.indexOf(n)&&(n.s=!0)}),function n(t){return t.reduce((t,o)=>t.concat(o,n(o.__c)),[])}(r.__c).forEach(n=>{n.s&&n.u.forEach(t=>{t.i&&t.i.delete(n)})}),t=u,o}return n.v=r,a(r),r(),function(){return r.s?r.u.forEach(n=>n()):o=r(),o}}function s(n){return t&&t.S.push(n),n}function d(n){return f(n),()=>S(n.v)}function v(n){S(n.v)}function S(n){n.__c.forEach(S),n.u.forEach(t=>{t.o.delete(n)}),n.S.forEach(n=>n()),a(n)}function a(n){n.u=[],n.__c=[],n.S=[]}export{f as S,s as cleanup,f as computed,r as isListening,e as o,e as observable,u as root,c as sample,d as subscribe,i as transaction,v as unsubscribe};\n//# sourceMappingURL=observable.js.map\n","import*as n from\"./observable.js\";import{o as t}from\"./observable.js\";import o from\"./htm.js\";const e={},s=[],f=\"__g\";function i(n,t,o,e){if(o){if(t){if(!e){const t=(e=o.previousSibling||n.lastChild)[f];if(t)for(e=e.previousSibling;e&&e[f]!==t;)e=e.previousSibling}let t;for(;e&&e!==o;)t=e.nextSibling,n.removeChild(e),e[f]=0,e=t}}else n.textContent=\"\"}let r=0;function u(n,t,o,u,c){n=o&&o.parentNode||n;const l=typeof t;return t===u||(!t&&0!==t||!0===t?(i(n,u,o,c),u=null):u&&\"string\"!=typeof u||!(\"string\"===l||\"number\"===l&&(t+=\"\"))?\"function\"===l?e.subscribe((function(){u=e.insert(n,t(),o,u)})):(i(n,u,o,c),t instanceof Node||(t=e.h(s,t)),11===t.nodeType&&t.firstChild!==t.lastChild&&(t.firstChild[f]=t.lastChild[f]=++r),n.insertBefore(t,o||null),u=t):(null!=u&&n.firstChild?o?(o.previousSibling||n.lastChild).data=t:n.firstChild.data=t:o?n.insertBefore(document.createTextNode(t),o):n.textContent=t,u=t)),u}function c(n,t,o,s,f){if(!n||\"attrs\"===n&&(s=!0))for(n in t)c(n,t[n],o,s,f);else\"o\"!==n[0]||\"n\"!==n[1]||t.$o?\"function\"==typeof t?t.$t?t.$t(2,c,o,n):e.subscribe(()=>{c(n,t(),o,s,f)}):f?o.style.setProperty(n,t):s||\"data-\"===n.slice(0,5)||\"aria-\"===n.slice(0,5)?o.setAttribute(n,t):\"style\"===n?\"string\"==typeof t?o.style.cssText=t:c(null,t,o,s,!0):(\"class\"===n&&(n+=\"Name\"),o[n]=t):function(n,t,o){t=t.slice(2);const s=e.cleanup(()=>n.removeEventListener(t,l));o?n.addEventListener(t,l):s(),(n.t||(n.t={}))[t]=o}(o,n,t)}function l(n){return this.t[n.type](n)}function a(n,t){for(let t in n)e[t]=n[t];function o(){const n=s.slice.call(arguments);let o;return n.forEach((function e(s){const f=typeof s;if(null==s);else if(\"string\"===f)o?o.appendChild(document.createTextNode(s)):o=t?document.createElementNS(\"http://www.w3.org/2000/svg\",s):document.createElement(s);else if(Array.isArray(s))o||(o=document.createDocumentFragment()),s.forEach(e);else if(s instanceof Node)o?o.appendChild(s):o=s;else if(\"object\"===f)c(null,s,o,t);else if(\"function\"===f)if(o){const n=o.appendChild(document.createTextNode(\"\"));s.$t?s.$t(1,u,o,\"\"):u(o,s,n)}else o=s.apply(null,n.splice(1));else o.appendChild(document.createTextNode(\"\"+s))})),o}return e.insert=u,e.property=c,e.h=o,o}const m=a(n),p=a(n,!0),d=t;function b(){return o.apply(m,arguments)}function g(){return o.apply(p,arguments)}export{e as api,a as context,m as h,p as hs,b as html,d as o,d as observable,g as svg};\n//# sourceMappingURL=sinuous.js.map\n","/* global THREE */\nimport { h } from 'sinuous';\nimport { subscribe, cleanup } from 'sinuous/observable';\n\n// This is not the proper way to abstract the Three.js parent-child model but\n// Sinuous has no notion of these API's so I worked with what was available.\n\nexport function Scene(props, camera, light, meshes) {\n\tconst scene = new THREE.Scene();\n\tscene.add(light);\n\n\tsubscribe(() => {\n\t\tscene.remove.apply(scene, scene.children.slice(2));\n\t\tmeshes().forEach(mesh => scene.add(mesh));\n\t});\n\n\tconst renderer = new THREE.WebGLRenderer({ antialias: true });\n\trenderer.setPixelRatio(window.devicePixelRatio);\n\trenderer.setClearColor(0xffffff);\n\n\tfunction onWindowResize() {\n\t\tcamera.aspect = window.innerWidth / window.innerHeight;\n\t\tcamera.updateProjectionMatrix();\n\n\t\trenderer.setSize(window.innerWidth, window.innerHeight);\n\t}\n\n\tonWindowResize();\n\twindow.addEventListener('resize', onWindowResize);\n\n\tlet frame = requestAnimationFrame(function loop() {\n\t\tframe = requestAnimationFrame(loop);\n\t\trenderer.render(scene, camera);\n\t});\n\n\tcleanup(() => {\n\t\tcancelAnimationFrame(frame);\n\t\twindow.removeEventListener('resize', onWindowResize);\n\t});\n\n\treturn html`<div class=container>\n\t\t${renderer.domElement}\n\t</div>`;\n}\n\nexport function PerspectiveCamera({ location }) {\n\tconst aspect = window.innerWidth / window.innerHeight;\n\tconst camera = new THREE.PerspectiveCamera(106, aspect, 1, 1000);\n\tcamera.position.set(...location);\n\treturn camera;\n}\n\nexport function DirectionalLight({ direction }) {\n\tconst light = new THREE.DirectionalLight(0x000000);\n\tlight.position.set(...direction);\n\treturn light;\n}\n\nexport function Mesh({ geometry, rotation }) {\n\tconst material = new THREE.MeshNormalMaterial();\n\tconst mesh = new THREE.Mesh(geometry, material);\n\tsubscribe(() => {\n\t\tmesh.rotation.set(...rotation());\n\t});\n\treturn mesh;\n}\n\nexport function box() {\n\treturn new THREE.BoxBufferGeometry(2, 2, 2);\n}\n","import { h } from 'sinuous';\nimport { observable, computed, cleanup } from 'sinuous/observable';\nimport { Scene, PerspectiveCamera, DirectionalLight, Mesh, box } from './sinuous-three.js';\n\nconst counts = [20, 100, 200, 500, 1000, 2000, 10000];\nconst count = observable(counts[0]);\nconst random = () => Math.random() * 360;\nconst frames = observable(Array(30).fill(0)); // for smoothing out FPS counter\n\nconst boxes = computed(() => Array(count()).fill().map(() =>\n\tobservable([random(), random(), random()])));\n\nconst fps = computed(() =>\n\tframes().reduce((total, frame) => total + frame) / frames().length);\n\nfunction App() {\n\tlet last = Date.now();\n\tlet frame = requestAnimationFrame(function loop() {\n\t\tframe = requestAnimationFrame(loop);\n\n\t\tboxes().forEach(box => {\n\t\t\tconst b = box();\n\t\t\tbox([\n\t\t\t\tb[0] + 0.01,\n\t\t\t\tb[1] + 0.01,\n\t\t\t\tb[2] + 0.01\n\t\t\t]);\n\t\t});\n\n\t\tconst now = Date.now();\n\t\tconst elapsed = now - last;\n\t\tframes().shift();\n\t\tframes()[frames().length] = 1000 / elapsed;\n\t\tframes(frames());\n\n\t\tlast = now;\n\t});\n\n\tcleanup(() => cancelAnimationFrame(frame));\n\n\treturn html`\n\t\t<main>\n\t\t\t<${Scene}>\n\t\t\t\t<${PerspectiveCamera} location=${[0, 0, 3.2]} />\n\t\t\t\t<${DirectionalLight} direction=${[-5, 0, -10]} />\n\t\t\t\t${() => boxes().map((r) =>\n\t\t\t\t\thtml`<${Mesh} geometry=${box()} rotation=${r} />`)}\n\t\t\t</${Scene}>\n\n\t\t\t<div class=\"controls\">\n\t\t\t\t<label>\n\t\t\t\t\tAmount\n\t\t\t\t\t<select onchange=${(e) => count(parseInt(e.target.value))}>\n\t\t\t\t\t\t${counts.map(count => html`<option>${count}</option>`)}\n\t\t\t\t\t</select>\n\t\t\t\t</label>\n<!-- \t\t\t\t<label>\n\t\t\t\t\t${count}\n\t\t\t\t\t<input type=range oninput=${(e) => count(parseInt(e.target.value))}\n\t\t\t\t\t\tmin=20 max=2000 step=1>\n\t\t\t\t</label> -->\n\t\t\t</div>\n\n\t\t\t<div class=\"info\">\n\t\t\t\t<p><a href=\"https://github.com/luwes/sinuous-three-boxes\">\n\t\t\t\t\tgithub.com/luwes/sinuous-three-boxes\n\t\t\t\t</a></p>\n\t\t\t\tFPS ${() => Math.round(fps())}\n\t\t\t</div>\n\t\t</main>\n\t`;\n}\n\ndocument.body.append(App());\n"],"names":["EMPTY_ARR","currentUpdate","queue","isListening","root","fn","update","rootUpdate","resetUpdate","result","_unsubscribe","undefined","sample","value","transaction","q","forEach","data","_pending","pending","observable","nextValue","arguments","length","_listeners","has","add","_observables","push","clearedUpdate","_runListeners","Set","_fresh","$o","computed","listener","prevUpdate","_children","prevChildren","u","indexOf","getChildrenDeep","o","delete","_update","cleanup","_cleanups","subscribe","unsubscribe","c","n","t","e","f","previousSibling","lastChild","nextSibling","removeChild","textContent","i","l","s","parentNode","r","insert","Node","h","nodeType","firstChild","insertBefore","document","createTextNode","$t","style","setProperty","slice","setAttribute","cssText","removeEventListener","addEventListener","this","type","call","appendChild","createElementNS","createElement","Array","isArray","createDocumentFragment","apply","splice","property","Scene","props","camera","light","meshes","scene","THREE","remove","children","mesh","renderer","WebGLRenderer","antialias","setPixelRatio","window","devicePixelRatio","setClearColor","onWindowResize","aspect","innerWidth","innerHeight","updateProjectionMatrix","setSize","frame","requestAnimationFrame","loop","render","cancelAnimationFrame","domElement","PerspectiveCamera","location","position","set","DirectionalLight","direction","Mesh","geometry","rotation","material","MeshNormalMaterial","box","BoxBufferGeometry","counts","count","random","Math","frames","fill","boxes","map","fps","reduce","total","App","last","Date","now","b","elapsed","shift","parseInt","target","round","body","append"],"mappings":"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"}